"use strict";exports.id=938,exports.ids=[938],exports.modules={46896:e=>{var r,n,o,l,h,u=Object.create,p=Object.defineProperty,d=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,io=(e,r,n)=>r in e?p(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,a=(e,r)=>p(e,"name",{value:r,configurable:!0}),K=(e,r)=>()=>(e&&(r=e(e=0)),r),I=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ee=(e,r)=>{for(var n in r)p(e,n,{get:r[n],enumerable:!0})},Cn=(e,r,n,o)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let l of y(r))g.call(e,l)||l===n||p(e,l,{get:()=>r[l],enumerable:!(o=d(r,l))||o.enumerable});return e},We=(e,r,n)=>(n=null!=e?u(m(e)):{},Cn(!r&&e&&e.__esModule?n:p(n,"default",{value:e,enumerable:!0}),e)),O=e=>Cn(p({},"__esModule",{value:!0}),e),T=(e,r,n)=>(io(e,"symbol"!=typeof r?r+"":r,n),n),_=I(e=>{S(),e.byteLength=oo,e.toByteArray=uo,e.fromByteArray=lo;var r,n,o=[],l=[],h="u">typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(r=0,n=u.length;r<n;++r)o[r]=u[r],l[u.charCodeAt(r)]=r;function Tn(e){var r=e.length;if(r%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=r);var o=n===r?0:4-n%4;return[n,o]}function oo(e){var r=Tn(e),n=r[0],o=r[1];return(n+o)*3/4-o}function ao(e,r,n){return(r+n)*3/4-n}function uo(e){var r,n,o=Tn(e),u=o[0],p=o[1],d=new h(ao(e,u,p)),y=0,m=p>0?u-4:u;for(n=0;n<m;n+=4)r=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],d[y++]=r>>16&255,d[y++]=r>>8&255,d[y++]=255&r;return 2===p&&(r=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,d[y++]=255&r),1===p&&(r=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,d[y++]=r>>8&255,d[y++]=255&r),d}function co(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function ho(e,r,n){for(var o=[],l=r;l<n;l+=3)o.push(co((e[l]<<16&16711680)+(e[l+1]<<8&65280)+(255&e[l+2])));return o.join("")}function lo(e){for(var r,n=e.length,l=n%3,h=[],u=0,p=n-l;u<p;u+=16383)h.push(ho(e,u,u+16383>p?p:u+16383));return 1===l?h.push(o[(r=e[n-1])>>2]+o[r<<4&63]+"=="):2===l&&h.push(o[(r=(e[n-2]<<8)+e[n-1])>>10]+o[r>>4&63]+o[r<<2&63]+"="),h.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63,a(Tn,"getLens"),a(oo,"byteLength"),a(ao,"_byteLength"),a(uo,"toByteArray"),a(co,"tripletToBase64"),a(ho,"encodeChunk"),a(lo,"fromByteArray")}),b=I(e=>{S(),e.read=function(e,r,n,o,l){var h,u,p=8*l-o-1,d=(1<<p)-1,y=d>>1,m=-7,g=n?l-1:0,_=n?-1:1,b=e[r+g];for(g+=_,h=b&(1<<-m)-1,b>>=-m,m+=p;m>0;h=256*h+e[r+g],g+=_,m-=8);for(u=h&(1<<-m)-1,h>>=-m,m+=o;m>0;u=256*u+e[r+g],g+=_,m-=8);if(0===h)h=1-y;else{if(h===d)return u?NaN:(b?-1:1)*(1/0);u+=Math.pow(2,o),h-=y}return(b?-1:1)*u*Math.pow(2,h-o)},e.write=function(e,r,n,o,l,h){var u,p,d,y=8*h-l-1,m=(1<<y)-1,g=m>>1,_=23===l?5960464477539062e-23:0,b=o?0:h-1,v=o?1:-1,S=r<0||0===r&&1/r<0?1:0;for(isNaN(r=Math.abs(r))||r===1/0?(p=isNaN(r)?1:0,u=m):(u=Math.floor(Math.log(r)/Math.LN2),r*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+g>=1?r+=_/d:r+=_*Math.pow(2,1-g),r*d>=2&&(u++,d/=2),u+g>=m?(p=0,u=m):u+g>=1?(p=(r*d-1)*Math.pow(2,l),u+=g):(p=r*Math.pow(2,g-1)*Math.pow(2,l),u=0));l>=8;e[n+b]=255&p,b+=v,p/=256,l-=8);for(u=u<<l|p,y+=l;y>0;e[n+b]=255&u,b+=v,u/=256,y-=8);e[n+b-v]|=128*S}}),v=I(e=>{S();var r=_(),n=b(),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function fo(){try{let e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),42===e.foo()}catch{return!1}}function fe(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let r=new Uint8Array(e);return Object.setPrototypeOf(r,f.prototype),r}function f(e,r,n){if("number"==typeof e){if("string"==typeof r)throw TypeError('The "string" argument must be of type string. Received type number');return Mt(e)}return Dn(e,r,n)}function Dn(e,r,n){if("string"==typeof e)return yo(e,r);if(ArrayBuffer.isView(e))return mo(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ue(e,ArrayBuffer)||e&&ue(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(ue(e,SharedArrayBuffer)||e&&ue(e.buffer,SharedArrayBuffer)))return Rt(e,r,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return f.from(o,r,n);let l=go(e);if(l)return l;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),r,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function On(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function po(e,r,n){return On(e),e<=0?fe(e):void 0!==r?"string"==typeof n?fe(e).fill(r,n):fe(e).fill(r):fe(e)}function Mt(e){return On(e),fe(e<0?0:0|Dt(e))}function yo(e,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!f.isEncoding(r))throw TypeError("Unknown encoding: "+r);let n=0|kn(e,r),o=fe(n),l=o.write(e,r);return l!==n&&(o=o.slice(0,l)),o}function Lt(e){let r=e.length<0?0:0|Dt(e.length),n=fe(r);for(let o=0;o<r;o+=1)n[o]=255&e[o];return n}function mo(e){if(ue(e,Uint8Array)){let r=new Uint8Array(e);return Rt(r.buffer,r.byteOffset,r.byteLength)}return Lt(e)}function Rt(e,r,n){let o;if(r<0||e.byteLength<r)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(o=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),f.prototype),o}function go(e){if(f.isBuffer(e)){let r=0|Dt(e.length),n=fe(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||kt(e.length)?fe(0):Lt(e):"Buffer"===e.type&&Array.isArray(e.data)?Lt(e.data):void 0}function Dt(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function wo(e){return+e!=e&&(e=0),f.alloc(+e)}function kn(e,r){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ue(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;let l=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Ft(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $n(e).length;default:if(l)return o?-1:Ft(e).length;r=(""+r).toLowerCase(),l=!0}}function bo(e,r,n){let o=!1;if((void 0===r||r<0)&&(r=0),r>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Po(this,r,n);case"utf8":case"utf-8":return qn(this,r,n);case"ascii":return Io(this,r,n);case"latin1":case"binary":return To(this,r,n);case"base64":return Ao(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bo(this,r,n);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function Ae(e,r,n){let o=e[r];e[r]=e[n],e[n]=o}function Un(e,r,n,o,l){if(0===e.length)return -1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),kt(n=+n)&&(n=l?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(l)return -1;n=e.length-1}else if(n<0){if(!l)return -1;n=0}if("string"==typeof r&&(r=f.from(r,o)),f.isBuffer(r))return 0===r.length?-1:Rn(e,r,n,o,l);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?l?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):Rn(e,[r],n,o,l);throw TypeError("val must be string, number or Buffer")}function Rn(e,r,n,o,l){let h,u=1,p=e.length,d=r.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||r.length<2)return -1;u=2,p/=2,d/=2,n/=2}function c(e,r){return 1===u?e[r]:e.readUInt16BE(r*u)}if(a(c,"read"),l){let o=-1;for(h=n;h<p;h++)if(c(e,h)===c(r,-1===o?0:h-o)){if(-1===o&&(o=h),h-o+1===d)return o*u}else -1!==o&&(h-=h-o),o=-1}else for(n+d>p&&(n=p-d),h=n;h>=0;h--){let n=!0;for(let o=0;o<d;o++)if(c(e,h+o)!==c(r,o)){n=!1;break}if(n)return h}return -1}function So(e,r,n,o){let l;n=Number(n)||0;let h=e.length-n;o?(o=Number(o))>h&&(o=h):o=h;let u=r.length;for(o>u/2&&(o=u/2),l=0;l<o;++l){let o=parseInt(r.substr(2*l,2),16);if(kt(o))break;e[n+l]=o}return l}function xo(e,r,n,o){return ot(Ft(r,e.length-n),e,n,o)}function Eo(e,r,n,o){return ot(Mo(r),e,n,o)}function vo(e,r,n,o){return ot($n(r),e,n,o)}function _o(e,r,n,o){return ot(Do(r,e.length-n),e,n,o)}function Ao(e,n,o){return 0===n&&o===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(n,o))}function qn(e,r,n){n=Math.min(e.length,n);let o=[],l=r;for(;l<n;){let r=e[l],h=null,u=r>239?4:r>223?3:r>191?2:1;if(l+u<=n){let n,o,p,d;switch(u){case 1:r<128&&(h=r);break;case 2:(192&(n=e[l+1]))==128&&(d=(31&r)<<6|63&n)>127&&(h=d);break;case 3:n=e[l+1],o=e[l+2],(192&n)==128&&(192&o)==128&&(d=(15&r)<<12|(63&n)<<6|63&o)>2047&&(d<55296||d>57343)&&(h=d);break;case 4:n=e[l+1],o=e[l+2],p=e[l+3],(192&n)==128&&(192&o)==128&&(192&p)==128&&(d=(15&r)<<18|(63&n)<<12|(63&o)<<6|63&p)>65535&&d<1114112&&(h=d)}}null===h?(h=65533,u=1):h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|1023&h),o.push(h),l+=u}return Co(o)}function Co(e){let r=e.length;if(r<=4096)return String.fromCharCode.apply(String,e);let n="",o=0;for(;o<r;)n+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return n}function Io(e,r,n){let o="";n=Math.min(e.length,n);for(let l=r;l<n;++l)o+=String.fromCharCode(127&e[l]);return o}function To(e,r,n){let o="";n=Math.min(e.length,n);for(let l=r;l<n;++l)o+=String.fromCharCode(e[l]);return o}function Po(e,r,n){let o=e.length;(!r||r<0)&&(r=0),(!n||n<0||n>o)&&(n=o);let l="";for(let o=r;o<n;++o)l+=u[e[o]];return l}function Bo(e,r,n){let o=e.slice(r,n),l="";for(let e=0;e<o.length-1;e+=2)l+=String.fromCharCode(o[e]+256*o[e+1]);return l}function U(e,r,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+r>n)throw RangeError("Trying to access beyond buffer length")}function z(e,r,n,o,l,h){if(!f.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(r>l||r<h)throw RangeError('"value" argument is out of bounds');if(n+o>e.length)throw RangeError("Index out of range")}function Nn(e,r,n,o,l){Gn(r,o,l,e,n,7);let h=Number(r&BigInt(4294967295));e[n++]=h,h>>=8,e[n++]=h,h>>=8,e[n++]=h,h>>=8,e[n++]=h;let u=Number(r>>BigInt(32)&BigInt(4294967295));return e[n++]=u,u>>=8,e[n++]=u,u>>=8,e[n++]=u,u>>=8,e[n++]=u,n}function Qn(e,r,n,o,l){Gn(r,o,l,e,n,7);let h=Number(r&BigInt(4294967295));e[n+7]=h,h>>=8,e[n+6]=h,h>>=8,e[n+5]=h,h>>=8,e[n+4]=h;let u=Number(r>>BigInt(32)&BigInt(4294967295));return e[n+3]=u,u>>=8,e[n+2]=u,u>>=8,e[n+1]=u,u>>=8,e[n]=u,n+8}function Wn(e,r,n,o,l,h){if(n+o>e.length||n<0)throw RangeError("Index out of range")}function jn(e,r,o,l,h){return r=+r,o>>>=0,h||Wn(e,r,o,4,34028234663852886e22,-34028234663852886e22),n.write(e,r,o,l,23,4),o+4}function Hn(e,r,o,l,h){return r=+r,o>>>=0,h||Wn(e,r,o,8,17976931348623157e292,-17976931348623157e292),n.write(e,r,o,l,52,8),o+8}e.Buffer=f,e.SlowBuffer=wo,e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=fo(),!f.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),a(fo,"typedArraySupport"),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),a(fe,"createBuffer"),a(f,"Buffer"),f.poolSize=8192,a(Dn,"from"),f.from=function(e,r,n){return Dn(e,r,n)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),a(On,"assertSize"),a(po,"alloc"),f.alloc=function(e,r,n){return po(e,r,n)},a(Mt,"allocUnsafe"),f.allocUnsafe=function(e){return Mt(e)},f.allocUnsafeSlow=function(e){return Mt(e)},a(yo,"fromString"),a(Lt,"fromArrayLike"),a(mo,"fromArrayView"),a(Rt,"fromArrayBuffer"),a(go,"fromObject"),a(Dt,"checked"),a(wo,"SlowBuffer"),f.isBuffer=a(function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},"isBuffer"),f.compare=a(function(e,r){if(ue(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),ue(r,Uint8Array)&&(r=f.from(r,r.offset,r.byteLength)),!f.isBuffer(e)||!f.isBuffer(r))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,o=r.length;for(let l=0,h=Math.min(n,o);l<h;++l)if(e[l]!==r[l]){n=e[l],o=r[l];break}return n<o?-1:o<n?1:0},"compare"),f.isEncoding=a(function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),f.concat=a(function(e,r){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let o=f.allocUnsafe(r),l=0;for(n=0;n<e.length;++n){let r=e[n];if(ue(r,Uint8Array))l+r.length>o.length?(f.isBuffer(r)||(r=f.from(r)),r.copy(o,l)):Uint8Array.prototype.set.call(o,r,l);else if(f.isBuffer(r))r.copy(o,l);else throw TypeError('"list" argument must be an Array of Buffers');l+=r.length}return o},"concat"),a(kn,"byteLength"),f.byteLength=kn,a(bo,"slowToString"),f.prototype._isBuffer=!0,a(Ae,"swap"),f.prototype.swap16=a(function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Ae(this,r,r+1);return this},"swap16"),f.prototype.swap32=a(function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Ae(this,r,r+3),Ae(this,r+1,r+2);return this},"swap32"),f.prototype.swap64=a(function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Ae(this,r,r+7),Ae(this,r+1,r+6),Ae(this,r+2,r+5),Ae(this,r+3,r+4);return this},"swap64"),f.prototype.toString=a(function(){let e=this.length;return 0===e?"":0==arguments.length?qn(this,0,e):bo.apply(this,arguments)},"toString"),f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=a(function(e){if(!f.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},"equals"),f.prototype.inspect=a(function(){let r="",n=e.INSPECT_MAX_BYTES;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},"inspect"),o&&(f.prototype[o]=f.prototype.inspect),f.prototype.compare=a(function(e,r,n,o,l){if(ue(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===l&&(l=this.length),r<0||n>e.length||o<0||l>this.length)throw RangeError("out of range index");if(o>=l&&r>=n)return 0;if(o>=l)return -1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,l>>>=0,this===e)return 0;let h=l-o,u=n-r,p=Math.min(h,u),d=this.slice(o,l),y=e.slice(r,n);for(let e=0;e<p;++e)if(d[e]!==y[e]){h=d[e],u=y[e];break}return h<u?-1:u<h?1:0},"compare"),a(Un,"bidirectionalIndexOf"),a(Rn,"arrayIndexOf"),f.prototype.includes=a(function(e,r,n){return -1!==this.indexOf(e,r,n)},"includes"),f.prototype.indexOf=a(function(e,r,n){return Un(this,e,r,n,!0)},"indexOf"),f.prototype.lastIndexOf=a(function(e,r,n){return Un(this,e,r,n,!1)},"lastIndexOf"),a(So,"hexWrite"),a(xo,"utf8Write"),a(Eo,"asciiWrite"),a(vo,"base64Write"),a(_o,"ucs2Write"),f.prototype.write=a(function(e,r,n,o){if(void 0===r)o="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)o=r,n=this.length,r=0;else if(isFinite(r))r>>>=0,isFinite(n)?(n>>>=0,void 0===o&&(o="utf8")):(o=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let l=this.length-r;if((void 0===n||n>l)&&(n=l),e.length>0&&(n<0||r<0)||r>this.length)throw RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let h=!1;for(;;)switch(o){case"hex":return So(this,e,r,n);case"utf8":case"utf-8":return xo(this,e,r,n);case"ascii":case"latin1":case"binary":return Eo(this,e,r,n);case"base64":return vo(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _o(this,e,r,n);default:if(h)throw TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),h=!0}},"write"),f.prototype.toJSON=a(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),a(Ao,"base64Slice"),a(qn,"utf8Slice"),a(Co,"decodeCodePointsArray"),a(Io,"asciiSlice"),a(To,"latin1Slice"),a(Po,"hexSlice"),a(Bo,"utf16leSlice"),f.prototype.slice=a(function(e,r){let n=this.length;e=~~e,r=void 0===r?n:~~r,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),r<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);let o=this.subarray(e,r);return Object.setPrototypeOf(o,f.prototype),o},"slice"),a(U,"checkOffset"),f.prototype.readUintLE=f.prototype.readUIntLE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=this[e],l=1,h=0;for(;++h<r&&(l*=256);)o+=this[e+h]*l;return o},"readUIntLE"),f.prototype.readUintBE=f.prototype.readUIntBE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=this[e+--r],l=1;for(;r>0&&(l*=256);)o+=this[e+--r]*l;return o},"readUIntBE"),f.prototype.readUint8=f.prototype.readUInt8=a(function(e,r){return e>>>=0,r||U(e,1,this.length),this[e]},"readUInt8"),f.prototype.readUint16LE=f.prototype.readUInt16LE=a(function(e,r){return e>>>=0,r||U(e,2,this.length),this[e]|this[e+1]<<8},"readUInt16LE"),f.prototype.readUint16BE=f.prototype.readUInt16BE=a(function(e,r){return e>>>=0,r||U(e,2,this.length),this[e]<<8|this[e+1]},"readUInt16BE"),f.prototype.readUint32LE=f.prototype.readUInt32LE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},"readUInt32LE"),f.prototype.readUint32BE=f.prototype.readUInt32BE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},"readUInt32BE"),f.prototype.readBigUInt64LE=ge(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];(void 0===r||void 0===n)&&je(e,this.length-8);let o=r+256*this[++e]+65536*this[++e]+16777216*this[++e],l=this[++e]+256*this[++e]+65536*this[++e]+16777216*n;return BigInt(o)+(BigInt(l)<<BigInt(32))},"readBigUInt64LE")),f.prototype.readBigUInt64BE=ge(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];(void 0===r||void 0===n)&&je(e,this.length-8);let o=16777216*r+65536*this[++e]+256*this[++e]+this[++e],l=16777216*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(o)<<BigInt(32))+BigInt(l)},"readBigUInt64BE")),f.prototype.readIntLE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=this[e],l=1,h=0;for(;++h<r&&(l*=256);)o+=this[e+h]*l;return o>=(l*=128)&&(o-=Math.pow(2,8*r)),o},"readIntLE"),f.prototype.readIntBE=a(function(e,r,n){e>>>=0,r>>>=0,n||U(e,r,this.length);let o=r,l=1,h=this[e+--o];for(;o>0&&(l*=256);)h+=this[e+--o]*l;return h>=(l*=128)&&(h-=Math.pow(2,8*r)),h},"readIntBE"),f.prototype.readInt8=a(function(e,r){return e>>>=0,r||U(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},"readInt8"),f.prototype.readInt16LE=a(function(e,r){e>>>=0,r||U(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},"readInt16LE"),f.prototype.readInt16BE=a(function(e,r){e>>>=0,r||U(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},"readInt16BE"),f.prototype.readInt32LE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},"readInt32LE"),f.prototype.readInt32BE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},"readInt32BE"),f.prototype.readBigInt64LE=ge(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];return(void 0===r||void 0===n)&&je(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(r+256*this[++e]+65536*this[++e]+16777216*this[++e])},"readBigInt64LE")),f.prototype.readBigInt64BE=ge(a(function(e){Be(e>>>=0,"offset");let r=this[e],n=this[e+7];return(void 0===r||void 0===n)&&je(e,this.length-8),(BigInt((r<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+n)},"readBigInt64BE")),f.prototype.readFloatLE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),n.read(this,e,!0,23,4)},"readFloatLE"),f.prototype.readFloatBE=a(function(e,r){return e>>>=0,r||U(e,4,this.length),n.read(this,e,!1,23,4)},"readFloatBE"),f.prototype.readDoubleLE=a(function(e,r){return e>>>=0,r||U(e,8,this.length),n.read(this,e,!0,52,8)},"readDoubleLE"),f.prototype.readDoubleBE=a(function(e,r){return e>>>=0,r||U(e,8,this.length),n.read(this,e,!1,52,8)},"readDoubleBE"),a(z,"checkInt"),f.prototype.writeUintLE=f.prototype.writeUIntLE=a(function(e,r,n,o){if(e=+e,r>>>=0,n>>>=0,!o){let o=Math.pow(2,8*n)-1;z(this,e,r,n,o,0)}let l=1,h=0;for(this[r]=255&e;++h<n&&(l*=256);)this[r+h]=e/l&255;return r+n},"writeUIntLE"),f.prototype.writeUintBE=f.prototype.writeUIntBE=a(function(e,r,n,o){if(e=+e,r>>>=0,n>>>=0,!o){let o=Math.pow(2,8*n)-1;z(this,e,r,n,o,0)}let l=n-1,h=1;for(this[r+l]=255&e;--l>=0&&(h*=256);)this[r+l]=e/h&255;return r+n},"writeUIntBE"),f.prototype.writeUint8=f.prototype.writeUInt8=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,1,255,0),this[r]=255&e,r+1},"writeUInt8"),f.prototype.writeUint16LE=f.prototype.writeUInt16LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},"writeUInt16LE"),f.prototype.writeUint16BE=f.prototype.writeUInt16BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},"writeUInt16BE"),f.prototype.writeUint32LE=f.prototype.writeUInt32LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},"writeUInt32LE"),f.prototype.writeUint32BE=f.prototype.writeUInt32BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},"writeUInt32BE"),a(Nn,"wrtBigUInt64LE"),a(Qn,"wrtBigUInt64BE"),f.prototype.writeBigUInt64LE=ge(a(function(e,r=0){return Nn(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),f.prototype.writeBigUInt64BE=ge(a(function(e,r=0){return Qn(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),f.prototype.writeIntLE=a(function(e,r,n,o){if(e=+e,r>>>=0,!o){let o=Math.pow(2,8*n-1);z(this,e,r,n,o-1,-o)}let l=0,h=1,u=0;for(this[r]=255&e;++l<n&&(h*=256);)e<0&&0===u&&0!==this[r+l-1]&&(u=1),this[r+l]=(e/h>>0)-u&255;return r+n},"writeIntLE"),f.prototype.writeIntBE=a(function(e,r,n,o){if(e=+e,r>>>=0,!o){let o=Math.pow(2,8*n-1);z(this,e,r,n,o-1,-o)}let l=n-1,h=1,u=0;for(this[r+l]=255&e;--l>=0&&(h*=256);)e<0&&0===u&&0!==this[r+l+1]&&(u=1),this[r+l]=(e/h>>0)-u&255;return r+n},"writeIntBE"),f.prototype.writeInt8=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},"writeInt8"),f.prototype.writeInt16LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},"writeInt16LE"),f.prototype.writeInt16BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},"writeInt16BE"),f.prototype.writeInt32LE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},"writeInt32LE"),f.prototype.writeInt32BE=a(function(e,r,n){return e=+e,r>>>=0,n||z(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},"writeInt32BE"),f.prototype.writeBigInt64LE=ge(a(function(e,r=0){return Nn(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),f.prototype.writeBigInt64BE=ge(a(function(e,r=0){return Qn(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),a(Wn,"checkIEEE754"),a(jn,"writeFloat"),f.prototype.writeFloatLE=a(function(e,r,n){return jn(this,e,r,!0,n)},"writeFloatLE"),f.prototype.writeFloatBE=a(function(e,r,n){return jn(this,e,r,!1,n)},"writeFloatBE"),a(Hn,"writeDouble"),f.prototype.writeDoubleLE=a(function(e,r,n){return Hn(this,e,r,!0,n)},"writeDoubleLE"),f.prototype.writeDoubleBE=a(function(e,r,n){return Hn(this,e,r,!1,n)},"writeDoubleBE"),f.prototype.copy=a(function(e,r,n,o){if(!f.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<n&&(o=n),o===n||0===e.length||0===this.length)return 0;if(r<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(o<0)throw RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);let l=o-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),r),l},"copy"),f.prototype.fill=a(function(e,r,n,o){let l;if("string"==typeof e){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw TypeError("encoding must be a string");if("string"==typeof o&&!f.isEncoding(o))throw TypeError("Unknown encoding: "+o);if(1===e.length){let r=e.charCodeAt(0);("utf8"===o&&r<128||"latin1"===o)&&(e=r)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw RangeError("Out of range index");if(n<=r)return this;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(l=r;l<n;++l)this[l]=e;else{let h=f.isBuffer(e)?e:f.from(e,o),u=h.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(l=0;l<n-r;++l)this[l+r]=h[l%u]}return this},"fill");var l={};function Ot(e,r,n){var o;l[e]=(a(o=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}},"NodeError"),o)}function Mn(e){let r="",n=e.length,o="-"===e[0]?1:0;for(;n>=o+4;n-=3)r=`_${e.slice(n-3,n)}${r}`;return`${e.slice(0,n)}${r}`}function Lo(e,r,n){Be(r,"offset"),(void 0===e[r]||void 0===e[r+n])&&je(r,e.length-(n+1))}function Gn(e,r,n,o,h,u){if(e>n||e<r){let o="bigint"==typeof r?"n":"",h;throw h=u>3?0===r||r===BigInt(0)?`>= 0${o} and < 2${o} ** ${(u+1)*8}${o}`:`>= -(2${o} ** ${(u+1)*8-1}${o}) and \
< 2 ** ${(u+1)*8-1}${o}`:`>= ${r}${o} and <= ${n}${o}`,new l.ERR_OUT_OF_RANGE("value",h,e)}Lo(o,h,u)}function Be(e,r){if("number"!=typeof e)throw new l.ERR_INVALID_ARG_TYPE(r,"number",e)}function je(e,r,n){throw Math.floor(e)!==e?(Be(e,n),new l.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):r<0?new l.ERR_BUFFER_OUT_OF_BOUNDS:new l.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${r}`,e)}a(Ot,"E"),Ot("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ot("ERR_INVALID_ARG_TYPE",function(e,r){return`The "${e}" argum\
ent must be of type number. Received type ${typeof r}`},TypeError),Ot("ERR_OUT_OF_RANGE",function(e,r,n){let o=`The value of "${e}" is out of range.`,l=n;return Number.isInteger(n)&&Math.abs(n)>4294967296?l=Mn(String(n)):"bigint"==typeof n&&(l=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(l=Mn(l)),l+="n"),o+=` It\
 must be ${r}. Received ${l}`},RangeError),a(Mn,"addNumericalSeparator"),a(Lo,"checkBounds"),a(Gn,"checkIntBI"),a(Be,"validateNumber"),a(je,"boundsError");var h=/[^+/0-9A-Za-z-_]/g;function Fo(e){if((e=(e=e.split("=")[0]).trim().replace(h,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function Ft(e,r){r=r||1/0;let n,o=e.length,l=null,h=[];for(let u=0;u<o;++u){if((n=e.charCodeAt(u))>55295&&n<57344){if(!l){if(n>56319||u+1===o){(r-=3)>-1&&h.push(239,191,189);continue}l=n;continue}if(n<56320){(r-=3)>-1&&h.push(239,191,189),l=n;continue}n=(l-55296<<10|n-56320)+65536}else l&&(r-=3)>-1&&h.push(239,191,189);if(l=null,n<128){if((r-=1)<0)break;h.push(n)}else if(n<2048){if((r-=2)<0)break;h.push(n>>6|192,63&n|128)}else if(n<65536){if((r-=3)<0)break;h.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((r-=4)<0)break;h.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return h}function Mo(e){let r=[];for(let n=0;n<e.length;++n)r.push(255&e.charCodeAt(n));return r}function Do(e,r){let n,o,l=[];for(let h=0;h<e.length&&!((r-=2)<0);++h)o=(n=e.charCodeAt(h))>>8,l.push(n%256),l.push(o);return l}function $n(e){return r.toByteArray(Fo(e))}function ot(e,r,n,o){let l;for(l=0;l<o&&!(l+n>=r.length||l>=e.length);++l)r[l+n]=e[l];return l}function ue(e,r){return e instanceof r||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===r.name}function kt(e){return e!=e}a(Fo,"base64clean"),a(Ft,"utf8ToBytes"),a(Mo,"asciiToBytes"),a(Do,"utf16leToBytes"),a($n,"base64ToBytes"),a(ot,"blitBuffer"),a(ue,"isInstance"),a(kt,"numberIsNaN");var u=function(){let e="0123456789abcdef",r=Array(256);for(let n=0;n<16;++n){let o=16*n;for(let l=0;l<16;++l)r[o+l]=e[n]+e[l]}return r}();function ge(e){return typeof BigInt>"u"?ko:e}function ko(){throw Error("BigInt not supported")}a(ge,"defineBigIntMethod"),a(ko,"BufferBigIntNotDefined")}),S=K(()=>{r=globalThis,n=globalThis.setImmediate??(e=>setTimeout(e,0)),globalThis.clearImmediate??(e=>clearTimeout(e)),(o=globalThis.crypto??{}).subtle??(o.subtle={}),l="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:v().Buffer,(h=globalThis.process??{}).env??(h.env={});try{h.nextTick(()=>{})}catch{let e=Promise.resolve();h.nextTick=e.then.bind(e)}}),w=I((e,r)=>{S();var n,o="object"==typeof Reflect?Reflect:null,l=o&&"function"==typeof o.apply?o.apply:a(function(e,r,n){return Function.prototype.apply.call(e,r,n)},"ReflectApply");function Uo(e){console&&console.warn&&console.warn(e)}n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?a(function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))},"ReflectOwnKeys"):a(function(e){return Object.getOwnPropertyNames(e)},"ReflectOwnKeys"),a(Uo,"ProcessEmitWarning");var h=Number.isNaN||a(function(e){return e!=e},"NumberIsNaN");function B(){B.init.call(this)}a(B,"EventEmitter"),r.exports=B,r.exports.once=Wo,B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var u=10;function ut(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Zn(e){return void 0===e._maxListeners?B.defaultMaxListeners:e._maxListeners}function Jn(e,r,n,o){var l,h,u;if(ut(n),void 0===(h=e._events)?(h=e._events=Object.create(null),e._eventsCount=0):(void 0!==h.newListener&&(e.emit("newListener",r,n.listener?n.listener:n),h=e._events),u=h[r]),void 0===u)u=h[r]=n,++e._eventsCount;else if("function"==typeof u?u=h[r]=o?[n,u]:[u,n]:o?u.unshift(n):u.push(n),(l=Zn(e))>0&&u.length>l&&!u.warned){u.warned=!0;var p=Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=r,p.count=u.length,Uo(p)}return e}function qo(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xn(e,r,n){var o={fired:!1,wrapFn:void 0,target:e,type:r,listener:n},l=qo.bind(o);return l.listener=n,o.wrapFn=l,l}function ei(e,r,n){var o=e._events;if(void 0===o)return[];var l=o[r];return void 0===l?[]:"function"==typeof l?n?[l.listener||l]:[l]:n?Qo(l):ri(l,l.length)}function ti(e){var r=this._events;if(void 0!==r){var n=r[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function ri(e,r){for(var n=Array(r),o=0;o<r;++o)n[o]=e[o];return n}function No(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function Qo(e){for(var r=Array(e.length),n=0;n<r.length;++n)r[n]=e[n].listener||e[n];return r}function Wo(e,r){return new Promise(function(n,o){function i(n){e.removeListener(r,s),o(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}a(i,"errorListener"),a(s,"resolver"),ni(e,r,s,{once:!0}),"error"!==r&&jo(e,i,{once:!0})})}function jo(e,r,n){"function"==typeof e.on&&ni(e,"error",r,n)}function ni(e,r,n,o){if("function"==typeof e.on)o.once?e.once(r,n):e.on(r,n);else if("function"==typeof e.addEventListener)e.addEventListener(r,a(function i(l){o.once&&e.removeEventListener(r,i),n(l)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}a(ut,"checkListener"),Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||h(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),B.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=a(function(e){if("number"!=typeof e||e<0||h(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},"setMaxListeners"),a(Zn,"_getMaxListeners"),B.prototype.getMaxListeners=a(function(){return Zn(this)},"getMaxListeners"),B.prototype.emit=a(function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o="error"===e,h=this._events;if(void 0!==h)o=o&&void 0===h.error;else if(!o)return!1;if(o){if(r.length>0&&(u=r[0]),u instanceof Error)throw u;var u,p=Error("Unhandled error."+(u?" ("+u.message+")":""));throw p.context=u,p}var d=h[e];if(void 0===d)return!1;if("function"==typeof d)l(d,this,r);else for(var y=d.length,m=ri(d,y),n=0;n<y;++n)l(m[n],this,r);return!0},"emit"),a(Jn,"_addListener"),B.prototype.addListener=a(function(e,r){return Jn(this,e,r,!1)},"addListener"),B.prototype.on=B.prototype.addListener,B.prototype.prependListener=a(function(e,r){return Jn(this,e,r,!0)},"prependListener"),a(qo,"onceWrapper"),a(Xn,"_onceWrap"),B.prototype.once=a(function(e,r){return ut(r),this.on(e,Xn(this,e,r)),this},"once"),B.prototype.prependOnceListener=a(function(e,r){return ut(r),this.prependListener(e,Xn(this,e,r)),this},"prependOnceListener"),B.prototype.removeListener=a(function(e,r){var n,o,l,h,u;if(ut(r),void 0===(o=this._events)||void 0===(n=o[e]))return this;if(n===r||n.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||r));else if("function"!=typeof n){for(l=-1,h=n.length-1;h>=0;h--)if(n[h]===r||n[h].listener===r){u=n[h].listener,l=h;break}if(l<0)return this;0===l?n.shift():No(n,l),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,u||r)}return this},"removeListener"),B.prototype.off=B.prototype.removeListener,B.prototype.removeAllListeners=a(function(e){var r,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var l,h=Object.keys(n);for(o=0;o<h.length;++o)"removeListener"!==(l=h[o])&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=n[e]))this.removeListener(e,r);else if(void 0!==r)for(o=r.length-1;o>=0;o--)this.removeListener(e,r[o]);return this},"removeAllListeners"),a(ei,"_listeners"),B.prototype.listeners=a(function(e){return ei(this,e,!0)},"listeners"),B.prototype.rawListeners=a(function(e){return ei(this,e,!1)},"rawListeners"),B.listenerCount=function(e,r){return"function"==typeof e.listenerCount?e.listenerCount(r):ti.call(e,r)},B.prototype.listenerCount=ti,a(ti,"listenerCount"),B.prototype.eventNames=a(function(){return this._eventsCount>0?n(this._events):[]},"eventNames"),a(ri,"arrayClone"),a(No,"spliceOne"),a(Qo,"unwrapListeners"),a(Wo,"once"),a(jo,"addErrorHandlerIfEventEmitter"),a(ni,"eventTargetAgnosticAddListener")}),E={};ee(E,{default:()=>C});var C,A=K(()=>{S(),C={}});function $e(e){let r=1779033703,n=3144134277,o=1013904242,l=2773480762,h=1359893119,u=2600822924,p=528734635,d=1541459225,y=0,m=0,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_=a((e,r)=>e>>>r|e<<32-r,"rrot"),b=new Uint32Array(64),v=new Uint8Array(64),S=a(()=>{for(let e=0,r=0;e<16;e++,r+=4)b[e]=v[r]<<24|v[r+1]<<16|v[r+2]<<8|v[r+3];for(let e=16;e<64;e++){let r=_(b[e-15],7)^_(b[e-15],18)^b[e-15]>>>3,n=_(b[e-2],17)^_(b[e-2],19)^b[e-2]>>>10;b[e]=b[e-16]+r+b[e-7]+n|0}let e=r,y=n,S=o,w=l,E=h,C=u,A=p,L=d;for(let r=0;r<64;r++){let n=L+(_(E,6)^_(E,11)^_(E,25))+(E&C^~E&A)+g[r]+b[r]|0,o=(_(e,2)^_(e,13)^_(e,22))+(e&y^e&S^y&S)|0;L=A,A=C,C=E,E=w+n|0,w=S,S=y,y=e,e=n+o|0}r=r+e|0,n=n+y|0,o=o+S|0,l=l+w|0,h=h+E|0,u=u+C|0,p=p+A|0,d=d+L|0,m=0},"process"),w=a(e=>{"string"==typeof e&&(e=new TextEncoder().encode(e));for(let r=0;r<e.length;r++)v[m++]=e[r],64===m&&S();y+=e.length},"add"),E=a(()=>{if(v[m++]=128,64==m&&S(),m+8>64){for(;m<64;)v[m++]=0;S()}for(;m<58;)v[m++]=0;let e=8*y;v[m++]=e/1099511627776&255,v[m++]=e/4294967296&255,v[m++]=e>>>24,v[m++]=e>>>16&255,v[m++]=e>>>8&255,v[m++]=255&e,S();let g=new Uint8Array(32);return g[0]=r>>>24,g[1]=r>>>16&255,g[2]=r>>>8&255,g[3]=255&r,g[4]=n>>>24,g[5]=n>>>16&255,g[6]=n>>>8&255,g[7]=255&n,g[8]=o>>>24,g[9]=o>>>16&255,g[10]=o>>>8&255,g[11]=255&o,g[12]=l>>>24,g[13]=l>>>16&255,g[14]=l>>>8&255,g[15]=255&l,g[16]=h>>>24,g[17]=h>>>16&255,g[18]=h>>>8&255,g[19]=255&h,g[20]=u>>>24,g[21]=u>>>16&255,g[22]=u>>>8&255,g[23]=255&u,g[24]=p>>>24,g[25]=p>>>16&255,g[26]=p>>>8&255,g[27]=255&p,g[28]=d>>>24,g[29]=d>>>16&255,g[30]=d>>>8&255,g[31]=255&d,g},"digest");return void 0===e?{add:w,digest:E}:(w(e),E())}var L,P,R=K(()=>{S(),a($e,"sha256")}),M=K(()=>{S(),a(L=class k{constructor(){T(this,"_dataLength",0),T(this,"_bufferLength",0),T(this,"_state",new Int32Array(4)),T(this,"_buffer",new ArrayBuffer(68)),T(this,"_buffer8"),T(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=k.hexChars,n=k.hexOut,o,l,h,u;for(u=0;u<4;u+=1)for(l=8*u,o=e[u],h=0;h<8;h+=2)n[l+1+h]=r.charAt(15&o),o>>>=4,n[l+0+h]=r.charAt(15&o),o>>>=4;return n.join("")}static _md5cycle(e,r){let n=e[0],o=e[1],l=e[2],h=e[3];n+=(o&l|~o&h)+r[0]-680876936|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&l)+r[1]-389564586|0,l+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[2]+606105819|0,o+=((l=(l<<17|l>>>15)+h|0)&h|~l&n)+r[3]-1044525330|0,n+=((o=(o<<22|o>>>10)+l|0)&l|~o&h)+r[4]-176418897|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&l)+r[5]+1200080426|0,l+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[6]-1473231341|0,o+=((l=(l<<17|l>>>15)+h|0)&h|~l&n)+r[7]-45705983|0,n+=((o=(o<<22|o>>>10)+l|0)&l|~o&h)+r[8]+1770035416|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&l)+r[9]-1958414417|0,l+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[10]-42063|0,o+=((l=(l<<17|l>>>15)+h|0)&h|~l&n)+r[11]-1990404162|0,n+=((o=(o<<22|o>>>10)+l|0)&l|~o&h)+r[12]+1804603682|0,h+=((n=(n<<7|n>>>25)+o|0)&o|~n&l)+r[13]-40341101|0,l+=((h=(h<<12|h>>>20)+n|0)&n|~h&o)+r[14]-1502002290|0,o+=((l=(l<<17|l>>>15)+h|0)&h|~l&n)+r[15]+1236535329|0,n+=((o=(o<<22|o>>>10)+l|0)&h|l&~h)+r[1]-165796510|0,h+=((n=(n<<5|n>>>27)+o|0)&l|o&~l)+r[6]-1069501632|0,l+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[11]+643717713|0,o+=((l=(l<<14|l>>>18)+h|0)&n|h&~n)+r[0]-373897302|0,n+=((o=(o<<20|o>>>12)+l|0)&h|l&~h)+r[5]-701558691|0,h+=((n=(n<<5|n>>>27)+o|0)&l|o&~l)+r[10]+38016083|0,l+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[15]-660478335|0,o+=((l=(l<<14|l>>>18)+h|0)&n|h&~n)+r[4]-405537848|0,n+=((o=(o<<20|o>>>12)+l|0)&h|l&~h)+r[9]+568446438|0,h+=((n=(n<<5|n>>>27)+o|0)&l|o&~l)+r[14]-1019803690|0,l+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[3]-187363961|0,o+=((l=(l<<14|l>>>18)+h|0)&n|h&~n)+r[8]+1163531501|0,n+=((o=(o<<20|o>>>12)+l|0)&h|l&~h)+r[13]-1444681467|0,h+=((n=(n<<5|n>>>27)+o|0)&l|o&~l)+r[2]-51403784|0,l+=((h=(h<<9|h>>>23)+n|0)&o|n&~o)+r[7]+1735328473|0,o+=((l=(l<<14|l>>>18)+h|0)&n|h&~n)+r[12]-1926607734|0,n+=((o=(o<<20|o>>>12)+l|0)^l^h)+r[5]-378558|0,h+=((n=(n<<4|n>>>28)+o|0)^o^l)+r[8]-2022574463|0,l+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[11]+1839030562|0,o+=((l=(l<<16|l>>>16)+h|0)^h^n)+r[14]-35309556|0,n+=((o=(o<<23|o>>>9)+l|0)^l^h)+r[1]-1530992060|0,h+=((n=(n<<4|n>>>28)+o|0)^o^l)+r[4]+1272893353|0,l+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[7]-155497632|0,o+=((l=(l<<16|l>>>16)+h|0)^h^n)+r[10]-1094730640|0,n+=((o=(o<<23|o>>>9)+l|0)^l^h)+r[13]+681279174|0,h+=((n=(n<<4|n>>>28)+o|0)^o^l)+r[0]-358537222|0,l+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[3]-722521979|0,o+=((l=(l<<16|l>>>16)+h|0)^h^n)+r[6]+76029189|0,n+=((o=(o<<23|o>>>9)+l|0)^l^h)+r[9]-640364487|0,h+=((n=(n<<4|n>>>28)+o|0)^o^l)+r[12]-421815835|0,l+=((h=(h<<11|h>>>21)+n|0)^n^o)+r[15]+530742520|0,o+=((l=(l<<16|l>>>16)+h|0)^h^n)+r[2]-995338651|0,o=(o<<23|o>>>9)+l|0,n+=(l^(o|~h))+r[0]-198630844|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~l))+r[7]+1126891415|0,h=(h<<10|h>>>22)+n|0,l+=(n^(h|~o))+r[14]-1416354905|0,l=(l<<15|l>>>17)+h|0,o+=(h^(l|~n))+r[5]-57434055|0,o=(o<<21|o>>>11)+l|0,n+=(l^(o|~h))+r[12]+1700485571|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~l))+r[3]-1894986606|0,h=(h<<10|h>>>22)+n|0,l+=(n^(h|~o))+r[10]-1051523|0,l=(l<<15|l>>>17)+h|0,o+=(h^(l|~n))+r[1]-2054922799|0,o=(o<<21|o>>>11)+l|0,n+=(l^(o|~h))+r[8]+1873313359|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~l))+r[15]-30611744|0,h=(h<<10|h>>>22)+n|0,l+=(n^(h|~o))+r[6]-1560198380|0,l=(l<<15|l>>>17)+h|0,o+=(h^(l|~n))+r[13]+1309151649|0,o=(o<<21|o>>>11)+l|0,n+=(l^(o|~h))+r[4]-145523070|0,n=(n<<6|n>>>26)+o|0,h+=(o^(n|~l))+r[11]-1120210379|0,h=(h<<10|h>>>22)+n|0,l+=(n^(h|~o))+r[2]+718787259|0,l=(l<<15|l>>>17)+h|0,o+=(h^(l|~n))+r[9]-343485551|0,o=(o<<21|o>>>11)+l|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=l+e[2]|0,e[3]=h+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(k.stateIdentity),this}appendStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,l,h;for(h=0;h<e.length;h+=1){if((l=e.charCodeAt(h))<128)r[o++]=l;else if(l<2048)r[o++]=(l>>>6)+192,r[o++]=63&l|128;else if(l<55296||l>56319)r[o++]=(l>>>12)+224,r[o++]=l>>>6&63|128,r[o++]=63&l|128;else{if((l=(l-55296)*1024+(e.charCodeAt(++h)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");r[o++]=(l>>>18)+240,r[o++]=l>>>12&63|128,r[o++]=l>>>6&63|128,r[o++]=63&l|128}o>=64&&(this._dataLength+=64,k._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,l,h=0;for(;;){for(l=Math.min(e.length-h,64-o);l--;)r[o++]=e.charCodeAt(h++);if(o<64)break;this._dataLength+=64,k._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}appendByteArray(e){let r=this._buffer8,n=this._buffer32,o=this._bufferLength,l,h=0;for(;;){for(l=Math.min(e.length-h,64-o);l--;)r[o++]=e[h++];if(o<64)break;this._dataLength+=64,k._md5cycle(this._state,n),o=0}return this._bufferLength=o,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,n=e.state,o=this._state,l;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],l=0;l<r.length;l+=1)this._buffer8[l]=r.charCodeAt(l)}end(e=!1){let r=this._bufferLength,n=this._buffer8,o=this._buffer32,l=(r>>2)+1;this._dataLength+=r;let h=8*this._dataLength;if(n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,o.set(k.buffer32Identity.subarray(l),l),r>55&&(k._md5cycle(this._state,o),o.set(k.buffer32Identity)),h<=4294967295)o[14]=h;else{let e=h.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;let r=parseInt(e[2],16),n=parseInt(e[1],16)||0;o[14]=r,o[15]=n}return k._md5cycle(this._state,o),e?this._state:k._hex(this._state)}},"Md5"),T(L,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),T(L,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),T(L,"hexChars","0123456789abcdef"),T(L,"hexOut",[]),T(L,"onePassHasher",new L),P=L}),N={};function Go(e){return o.getRandomValues(l.alloc(e))}function $o(e){if("sha256"===e)return{update:function(e){return{digest:function(){return l.from($e(e))}}}};if("md5"===e)return{update:function(e){return{digest:function(){return"string"==typeof e?P.hashStr(e):P.hashByteArray(e)}}}};throw Error(`Hash type '${e}' not supported`)}function Ko(e,r){if("sha256"!==e)throw Error(`Only sha256 is supported (requested: '${e}')`);return{update:function(e){return{digest:function(){"string"==typeof r&&(r=new TextEncoder().encode(r)),"string"==typeof e&&(e=new TextEncoder().encode(e));let n=r.length;if(n>64)r=$e(r);else if(n<64){let e=new Uint8Array(64);e.set(r),r=e}let o=new Uint8Array(64),h=new Uint8Array(64);for(let e=0;e<64;e++)o[e]=54^r[e],h[e]=92^r[e];let u=new Uint8Array(e.length+64);u.set(o,0),u.set(e,64);let p=new Uint8Array(96);return p.set(h,0),p.set($e(u),64),l.from($e(p))}}}}}ee(N,{createHash:()=>$o,createHmac:()=>Ko,randomBytes:()=>Go});var D=K(()=>{S(),R(),M(),a(Go,"randomBytes"),a($o,"createHash"),a(Ko,"createHmac")}),F=I(e=>{S(),e.parse=function(e,r){return new n(e,r).parse()};var r=class ct{constructor(e,r){this.source=e,this.transform=r||Vo,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&("NULL"!==(r=this.recorded.join(""))||e||(r=null),null!==r&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof()&&"="!==this.nextCharacter().value;);}parse(e){var r,n,o;for(this.consumeDimensions();!this.isEof();)if("{"!==(r=this.nextCharacter()).value||o){if("}"!==r.value||o)'"'!==r.value||r.escaped?","!==r.value||o?this.record(r.value):this.newEntry():(o&&this.newEntry(!0),o=!o);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(n=new ct(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);if(0!==this.dimension)throw Error("array dimension not balanced");return this.entries}};a(r,"ArrayParser");var n=r;function Vo(e){return e}a(Vo,"identity")}),W=I((e,r)=>{S();var n=F();r.exports={create:function(e,r){return{parse:function(){return n.parse(e,r)}}}}}),q=I((e,r)=>{S();var n=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,o=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,l=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,h=/^-?infinity$/;function ea(e){var r=o.exec(e);if(r){var n=parseInt(r[1],10);r[4]&&(n=ui(n));var l=new Date(n,parseInt(r[2],10)-1,r[3]);return Ht(n)&&l.setFullYear(n),l}}function ta(e){if(e.endsWith("+00"))return 0;var r=l.exec(e.split(" ")[1]);if(r){var n=r[1];return"Z"===n?0:(3600*parseInt(r[2],10)+60*parseInt(r[3]||0,10)+parseInt(r[4]||0,10))*("-"===n?-1:1)*1e3}}function ui(e){return-(e-1)}function Ht(e){return e>=0&&e<100}r.exports=a(function(e){if(h.test(e))return Number(e.replace("i","I"));var r=n.exec(e);if(!r)return ea(e)||null;var o=!!r[8],l=parseInt(r[1],10);o&&(l=ui(l));var u=parseInt(r[2],10)-1,p=r[3],d=parseInt(r[4],10),y=parseInt(r[5],10),m=parseInt(r[6],10),g=r[7];g=g?1e3*parseFloat(g):0;var _,b=ta(e);return null!=b?(_=new Date(Date.UTC(l,u,p,d,y,m,g)),Ht(l)&&_.setUTCFullYear(l),0!==b&&_.setTime(_.getTime()-b)):(_=new Date(l,u,p,d,y,m,g),Ht(l)&&_.setFullYear(l)),_},"parseDate"),a(ea,"getDate"),a(ta,"timeZoneOffset"),a(ui,"bcYearToNegativeYear"),a(Ht,"is0To99")}),Q=I((e,r)=>{S(),r.exports=na;var n=Object.prototype.hasOwnProperty;function na(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var l in o)n.call(o,l)&&(e[l]=o[l])}return e}a(na,"extend")}),$=I((e,r)=>{S();var n=Q();function Fe(e){if(!(this instanceof Fe))return new Fe(e);n(this,ma(e))}r.exports=Fe,a(Fe,"PostgresInterval");var o=["seconds","minutes","hours","days","months","years"];Fe.prototype.toPostgres=function(){var e=o.filter(this.hasOwnProperty,this);return this.milliseconds&&0>e.indexOf("seconds")&&e.push("seconds"),0===e.length?"0":e.map(function(e){var r=this[e]||0;return"seconds"===e&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var l={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},h=["years","months","days"],u=["hours","minutes","seconds"];Fe.prototype.toISOString=Fe.prototype.toISO=function(){return"P"+h.map(t,this).join("")+"T"+u.map(t,this).join("");function t(e){var r=this[e]||0;return"seconds"===e&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),r+l[e]}};var p="([+-]?\\d+)",d=new RegExp([p+"\\s+years?",p+"\\s+mons?",p+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(e){return"("+e+")?"}).join("\\s*")),y={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},m=["hours","minutes","seconds","milliseconds"];function ya(e){return parseInt(e+"000000".slice(e.length),10)/1e3}function ma(e){if(!e)return{};var r=d.exec(e),n="-"===r[8];return Object.keys(y).reduce(function(e,o){var l=r[y[o]];return l&&(l="milliseconds"===o?ya(l):parseInt(l,10))&&(n&&~m.indexOf(o)&&(l*=-1),e[o]=l),e},{})}a(ya,"parseMilliseconds"),a(ma,"parse")}),G=I((e,r)=>{S(),r.exports=a(function(e){if(/^\\x/.test(e))return new l(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if("\\"!==e[n])r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var o=1;n+o<e.length&&"\\"===e[n+o];)o++;for(var h=0;h<Math.floor(o/2);++h)r+="\\";n+=2*Math.floor(o/2)}return new l(r,"binary")},"parseBytea")}),H=I((e,r)=>{S();var n=F(),o=W(),l=q(),h=$(),u=G();function lt(e){return a(function(r){return null===r?r:e(r)},"nullAllowed")}function xi(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function ga(e){return e?n.parse(e,xi):null}function wa(e){return parseInt(e,10)}function $t(e){return e?n.parse(e,lt(wa)):null}function ba(e){return e?n.parse(e,lt(function(e){return v(e).trim()})):null}a(lt,"allowNull"),a(xi,"parseBool"),a(ga,"parseBoolArray"),a(wa,"parseBaseTenInt"),a($t,"parseIntegerArray"),a(ba,"parseBigIntegerArray");var p=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=E(e)),e}).parse():null},"parsePointArray"),d=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=parseFloat(e)),e}).parse():null},"parseFloatArray"),y=a(function(e){return e?o.create(e).parse():null},"parseStringArray"),m=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=l(e)),e}).parse():null},"parseDateArray"),g=a(function(e){return e?o.create(e,function(e){return null!==e&&(e=h(e)),e}).parse():null},"parseIntervalArray"),_=a(function(e){return e?n.parse(e,lt(u)):null},"parseByteAArray"),b=a(function(e){return parseInt(e,10)},"parseInteger"),v=a(function(e){var r=String(e);return/^\d+$/.test(r)?r:e},"parseBigInteger"),w=a(function(e){return e?n.parse(e,lt(JSON.parse)):null},"parseJsonArray"),E=a(function(e){return"("!==e[0]?null:{x:parseFloat((e=e.substring(1,e.length-1).split(","))[0]),y:parseFloat(e[1])}},"parsePoint"),C=a(function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var r="(",n="",o=!1,l=2;l<e.length-1;l++){if(o||(r+=e[l]),")"===e[l]){o=!0;continue}o&&","!==e[l]&&(n+=e[l])}var h=E(r);return h.radius=parseFloat(n),h},"parseCircle"),A=a(function(e){e(20,v),e(21,b),e(23,b),e(26,b),e(700,parseFloat),e(701,parseFloat),e(16,xi),e(1082,l),e(1114,l),e(1184,l),e(600,E),e(651,y),e(718,C),e(1e3,ga),e(1001,_),e(1005,$t),e(1007,$t),e(1028,$t),e(1016,ba),e(1017,p),e(1021,d),e(1022,d),e(1231,d),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,m),e(1182,m),e(1185,m),e(1186,h),e(1187,g),e(17,u),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,w),e(3807,w),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)},"init");r.exports={init:A}}),V=I((e,r)=>{function Aa(e){var r=e.readInt32BE(0),n=e.readUInt32BE(4),o="";r<0&&(r=~r+(0===n),n=~n+1>>>0,o="-");var l,h,u,p,d,y,m="";if(l=r%1e6,r=r/1e6>>>0,n=(h=4294967296*l+n)/1e6>>>0,u=""+(h-1e6*n),0===n&&0===r)return o+u+m;for(p="",d=6-u.length,y=0;y<d;y++)p+="0";if(m=p+u+m,l=r%1e6,r=r/1e6>>>0,n=(h=4294967296*l+n)/1e6>>>0,u=""+(h-1e6*n),0===n&&0===r)return o+u+m;for(p="",d=6-u.length,y=0;y<d;y++)p+="0";if(m=p+u+m,l=r%1e6,r=r/1e6>>>0,n=(h=4294967296*l+n)/1e6>>>0,u=""+(h-1e6*n),0===n&&0===r)return o+u+m;for(p="",d=6-u.length,y=0;y<d;y++)p+="0";return m=p+u+m,o+(u=""+(h=4294967296*(l=r%1e6)+n)%1e6)+m}S(),a(Aa,"readInt8"),r.exports=Aa}),Y=I((e,r)=>{S();var n=V(),o=a(function(e,r,n,o,l){n=n||0,o=o||!1,l=l||function(e,r,n){return e*Math.pow(2,n)+r};var h=n>>3,u=a(function(e){return o?255&~e:e},"inv"),p=255,d=8-n%8;r<d&&(p=255<<8-r&255,d=r),n&&(p>>=n%8);var y=0;n%8+r>=8&&(y=l(0,u(e[h])&p,d));for(var m=r+n>>3,g=h+1;g<m;g++)y=l(y,u(e[g]),8);var _=(r+n)%8;return _>0&&(y=l(y,u(e[m])>>8-_,_)),y},"parseBits"),l=a(function(e,r,n){var l=Math.pow(2,n-1)-1,h=o(e,1),u=o(e,n,1);if(0===u)return 0;var p=1,d=o(e,r,n+1,!1,a(function(e,r,n){0===e&&(e=1);for(var o=1;o<=n;o++)p/=2,(r&1<<n-o)>0&&(e+=p);return e},"parsePrecisionBits"));return u==Math.pow(2,n+1)-1?0===d?0===h?1/0:-1/0:NaN:(0===h?1:-1)*Math.pow(2,u-l)*d},"parseFloatFromBits"),h=a(function(e){return 1==o(e,1)?-1*(o(e,15,1,!0)+1):o(e,15,1)},"parseInt16"),u=a(function(e){return 1==o(e,1)?-1*(o(e,31,1,!0)+1):o(e,31,1)},"parseInt32"),p=a(function(e){return l(e,23,8)},"parseFloat32"),d=a(function(e){return l(e,52,11)},"parseFloat64"),y=a(function(e){var r=o(e,16,32);if(49152==r)return NaN;for(var n=Math.pow(1e4,o(e,16,16)),l=0,h=o(e,16),u=0;u<h;u++)l+=o(e,16,64+16*u)*n,n/=1e4;var p=Math.pow(10,o(e,16,48));return(0===r?1:-1)*Math.round(l*p)/p},"parseNumeric"),m=a(function(e,r){var n=o(r,1),l=o(r,63,1),h=new Date((0===n?1:-1)*l/1e3+9466848e5);return e||h.setTime(h.getTime()+6e4*h.getTimezoneOffset()),h.usec=l%1e3,h.getMicroSeconds=function(){return this.usec},h.setMicroSeconds=function(e){this.usec=e},h.getUTCMicroSeconds=function(){return this.usec},h},"parseDate"),g=a(function(e){for(var r=o(e,32),n=(o(e,32,32),o(e,32,64)),l=96,h=[],u=0;u<r;u++)h[u]=o(e,32,l),l+=64;var p=a(function(r){var n,h=o(e,32,l);return(l+=32,4294967295==h)?null:23==r||20==r?(n=o(e,8*h,l),l+=8*h,n):25==r?e.toString(this.encoding,l>>3,(l+=h<<3)>>3):void console.log("ERROR: ElementType not implemented: "+r)},"parseElement"),d=a(function(e,r){var n,o=[];if(e.length>1){var l=e.shift();for(n=0;n<l;n++)o[n]=d(e,r);e.unshift(l)}else for(n=0;n<e[0];n++)o[n]=p(r);return o},"parse");return d(h,n)},"parseArray"),_=a(function(e){return e.toString("utf8")},"parseText"),b=a(function(e){return null===e?null:o(e,8)>0},"parseBool"),v=a(function(e){e(20,n),e(21,h),e(23,u),e(26,u),e(1700,y),e(700,p),e(701,d),e(16,b),e(1114,m.bind(null,!1)),e(1184,m.bind(null,!0)),e(1e3,g),e(1007,g),e(1016,g),e(1008,g),e(1009,g),e(25,_)},"init");r.exports={init:v}}),Z=I((e,r)=>{S(),r.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),J=I(e=>{S();var r=H(),n=Y(),o=W(),l=Z();e.getTypeParser=Ua,e.setTypeParser=qa,e.arrayParser=o,e.builtins=l;var h={text:{},binary:{}};function Mi(e){return String(e)}function Ua(e,r){return h[r=r||"text"]&&h[r][e]||Mi}function qa(e,r,n){"function"==typeof r&&(n=r,r="text"),h[r][e]=n}a(Mi,"noParse"),a(Ua,"getTypeParser"),a(qa,"setTypeParser"),r.init(function(e,r){h.text[e]=r}),n.init(function(e,r){h.binary[e]=r})}),et=I((e,r)=>{S(),r.exports={host:"localhost",user:"win32"===h.platform?h.env.USERNAME:h.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var n=J(),o=n.getTypeParser(20,"text"),l=n.getTypeParser(1016,"text");r.exports.__defineSetter__("parseInt8",function(e){n.setTypeParser(20,"text",e?n.getTypeParser(23,"text"):o),n.setTypeParser(1016,"text",e?n.getTypeParser(1007,"text"):l)})}),er=I((e,r)=>{S();var n=(D(),O(N)),o=et();function Ha(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function Di(e){for(var r="{",n=0;n<e.length;n++)n>0&&(r+=","),null===e[n]||typeof e[n]>"u"?r+="NULL":Array.isArray(e[n])?r+=Di(e[n]):e[n]instanceof l?r+="\\\\x"+e[n].toString("hex"):r+=Ha(h(e[n]));return r+"}"}a(Ha,"escapeElement"),a(Di,"arrayString");var h=a(function(e,r){if(null==e)return null;if(e instanceof l)return e;if(ArrayBuffer.isView(e)){var n=l.from(e.buffer,e.byteOffset,e.byteLength);return n.length===e.byteLength?n:n.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?o.parseInputDatesAsUTC?Ka(e):$a(e):Array.isArray(e)?Di(e):"object"==typeof e?Ga(e,r):e.toString()},"prepareValue");function Ga(e,r){if(e&&"function"==typeof e.toPostgres){if(-1!==(r=r||[]).indexOf(e))throw Error('circular reference detected while preparing "'+e+'" for query');return r.push(e),h(e.toPostgres(h),r)}return JSON.stringify(e)}function j(e,r){for(e=""+e;e.length<r;)e="0"+e;return e}function $a(e){var r=-e.getTimezoneOffset(),n=e.getFullYear(),o=n<1;o&&(n=Math.abs(n)+1);var l=j(n,4)+"-"+j(e.getMonth()+1,2)+"-"+j(e.getDate(),2)+"T"+j(e.getHours(),2)+":"+j(e.getMinutes(),2)+":"+j(e.getSeconds(),2)+"."+j(e.getMilliseconds(),3);return r<0?(l+="-",r*=-1):l+="+",l+=j(Math.floor(r/60),2)+":"+j(r%60,2),o&&(l+=" BC"),l}function Ka(e){var r=e.getUTCFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var o=j(r,4)+"-"+j(e.getUTCMonth()+1,2)+"-"+j(e.getUTCDate(),2)+"T"+j(e.getUTCHours(),2)+":"+j(e.getUTCMinutes(),2)+":"+j(e.getUTCSeconds(),2)+"."+j(e.getUTCMilliseconds(),3);return o+="+00:00",n&&(o+=" BC"),o}function Va(e,r,n){return e="string"==typeof e?{text:e}:e,r&&("function"==typeof r?e.callback=r:e.values=r),n&&(e.callback=n),e}a(Ga,"prepareObject"),a(j,"pad"),a($a,"dateToString"),a(Ka,"dateToStringUTC"),a(Va,"normalizeQueryConfig");var u=a(function(e){return n.createHash("md5").update(e,"utf-8").digest("hex")},"md5"),p=a(function(e,r,n){var o=u(r+e);return"md5"+u(l.concat([l.from(o),n]))},"postgresMd5PasswordHash");r.exports={prepareValue:a(function(e){return h(e)},"prepareValueWrapper"),normalizeQueryConfig:Va,postgresMd5PasswordHash:p,md5:u}}),en=I((e,r)=>{S();var n=(D(),O(N));function Ya(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let r=n.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:r,response:"n,,n=*,r="+r,message:"SASLInitialResponse"}}function Za(e,r,n){if("SASLInitialResponse"!==e.message)throw Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof r)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof n)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let o=eu(n);if(o.nonce.startsWith(e.clientNonce)){if(o.nonce.length===e.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var h=nu(r,l.from(o.salt,"base64"),o.iteration),u=De(h,"Client Key"),p=ru(u),d="n=*,r="+e.clientNonce,y="r="+o.nonce+",s="+o.salt+",i="+o.iteration,m="c=biws,r="+o.nonce,g=d+","+y+","+m,_=qi(u,De(p,g)).toString("base64"),b=De(h,"Server Key"),v=De(b,g);e.message="SASLResponse",e.serverSignature=v.toString("base64"),e.response=m+",p="+_}function Ja(e,r){if("SASLResponse"!==e.message)throw Error("SASL: Last message was not SASLResponse");if("string"!=typeof r)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:n}=tu(r);if(n!==e.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function Xa(e){if("string"!=typeof e)throw TypeError("SASL: text must be a string");return e.split("").map((r,n)=>e.charCodeAt(n)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function ki(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function Ui(e){if("string"!=typeof e)throw TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]}))}function eu(e){let r=Ui(e),n=r.get("r");if(n){if(!Xa(n))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let o=r.get("s");if(o){if(!ki(o))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let l=r.get("i");if(l){if(!/^[1-9][0-9]*$/.test(l))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:n,salt:o,iteration:parseInt(l,10)}}function tu(e){let r=Ui(e).get("v");if(r){if(!ki(r))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function qi(e,r){if(!l.isBuffer(e))throw TypeError("first argument must be a Buffer");if(!l.isBuffer(r))throw TypeError("second argument must be a Buffer");if(e.length!==r.length)throw Error("Buffer lengths must match");if(0===e.length)throw Error("Buffers cannot be empty");return l.from(e.map((n,o)=>e[o]^r[o]))}function ru(e){return n.createHash("sha256").update(e).digest()}function De(e,r){return n.createHmac("sha256",e).update(r).digest()}function nu(e,r,n){for(var o=De(e,l.concat([r,l.from([0,0,0,1])])),h=o,u=0;u<n-1;u++)h=qi(h,o=De(e,o));return h}a(Ya,"startSession"),a(Za,"continueSession"),a(Ja,"finalizeSession"),a(Xa,"isPrintableChars"),a(ki,"isBase64"),a(Ui,"parseAttributePairs"),a(eu,"parseServerFirstMessage"),a(tu,"parseServerFinalMessage"),a(qi,"xorBuffers"),a(ru,"sha256"),a(De,"hmacSha256"),a(nu,"Hi"),r.exports={startSession:Ya,continueSession:Za,finalizeSession:Ja}}),es={};function iu(...e){return e.join("/")}ee(es,{join:()=>iu});var eo=K(()=>{S(),a(iu,"join")}),el={};function su(e,r){r(Error("No filesystem"))}ee(el,{stat:()=>su});var eh=K(()=>{S(),a(su,"stat")}),ec={};ee(ec,{default:()=>ef});var ef,ep=K(()=>{S(),ef={}}),ed={};ee(ed,{StringDecoder:()=>em});var ey,em,eg=K(()=>{S(),a(ey=class{constructor(e){T(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},"StringDecoder"),em=ey}),e_=I((e,r)=>{S();var{Transform:n}=(ep(),O(ec)),{StringDecoder:o}=(eg(),O(ed)),l=Symbol("last"),h=Symbol("decoder");function cu(e,r,n){let o;if(this.overflow){if(1===(o=this[h].write(e).split(this.matcher)).length)return n();o.shift(),this.overflow=!1}else this[l]+=this[h].write(e),o=this[l].split(this.matcher);this[l]=o.pop();for(let e=0;e<o.length;e++)try{Gi(this,this.mapper(o[e]))}catch(e){return n(e)}if(this.overflow=this[l].length>this.maxLength,this.overflow&&!this.skipOverflow){n(Error("maximum buffer reached"));return}n()}function hu(e){if(this[l]+=this[h].end(),this[l])try{Gi(this,this.mapper(this[l]))}catch(r){return e(r)}e()}function Gi(e,r){void 0!==r&&e.push(r)}function Hi(e){return e}function lu(e,r,u){switch(e=e||/\r?\n/,r=r||Hi,u=u||{},arguments.length){case 1:"function"==typeof e?(r=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||e[Symbol.split]||(u=e,e=/\r?\n/);break;case 2:"function"==typeof e?(u=r,r=e,e=/\r?\n/):"object"==typeof r&&(u=r,r=Hi)}(u=Object.assign({},u)).autoDestroy=!0,u.transform=cu,u.flush=hu,u.readableObjectMode=!0;let p=new n(u);return p[l]="",p[h]=new o("utf8"),p.matcher=e,p.mapper=r,p.maxLength=u.maxLength,p.skipOverflow=u.skipOverflow||!1,p.overflow=!1,p._destroy=function(e,r){this._writableState.errorEmitted=!1,r(e)},p}a(cu,"transform"),a(hu,"flush"),a(Gi,"push"),a(Hi,"noop"),a(lu,"split"),r.exports=lu}),eb=I((e,r)=>{S();var n=(eo(),O(es)),o=(ep(),O(ec)).Stream,l=e_(),u=(A(),O(E)),p="win32"===h.platform,d=h.stderr;function bu(e){return(61440&e)==32768}a(bu,"isRegFile");var y=["host","port","database","user","password"],m=y.length,g=y[m-1];function cr(){if(d instanceof o&&!0===d.writable){var e=Array.prototype.slice.call(arguments).concat(`
`);d.write(u.format.apply(u,e))}}a(cr,"warn"),Object.defineProperty(r.exports,"isWin",{get:function(){return p},set:function(e){p=e}}),r.exports.warnTo=function(e){var r=d;return d=e,r},r.exports.getFileName=function(e){var r=e||h.env;return r.PGPASSFILE||(p?n.join(r.APPDATA||"./","postgresql","pgpass.conf"):n.join(r.HOME||"./",".pgpass"))},r.exports.usePgPass=function(e,r){return!Object.prototype.hasOwnProperty.call(h.env,"PGPASSWORD")&&(!!p||(r=r||"<unkn>",bu(e.mode)?!(63&e.mode)||(cr('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',r),!1):(cr('WARNING: password file "%s" is not a plain file',r),!1)))};var _=r.exports.match=function(e,r){return y.slice(0,-1).reduce(function(n,o,l){return 1==l&&Number(e[o]||5432)===Number(r[o])?n&&!0:n&&("*"===r[o]||r[o]===e[o])},!0)};r.exports.getPassword=function(e,r,n){var o,h=r.pipe(l());function s(r){var n=b(r);n&&v(n)&&_(e,n)&&(o=n[g],h.end())}a(s,"onLine");var u=a(function(){r.destroy(),n(o)},"onEnd"),p=a(function(e){r.destroy(),cr("WARNING: error on reading file: %s",e),n(void 0)},"onErr");r.on("error",p),h.on("data",s).on("end",u).on("error",p)};var b=r.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var r="",n="",o=0,l=0,u={},p=a(function(r,n,o){var l=e.substring(n,o);Object.hasOwnProperty.call(h.env,"PGPASS_NO_DEESCAPE")||(l=l.replace(/\\([:\\])/g,"$1")),u[y[r]]=l},"addToObj"),d=0;d<e.length-1;d+=1){if(r=e.charAt(d+1),n=e.charAt(d),o==m-1){p(o,l);break}d>=0&&":"==r&&"\\"!==n&&(p(o,l,d+1),l=d+2,o+=1)}return u=Object.keys(u).length===m?u:null},v=r.exports.isValidEntry=function(e){for(var r={0:function(e){return e.length>0},1:function(e){return"*"===e||isFinite(e=Number(e))&&e>0&&e<9007199254740992&&Math.floor(e)===e},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},n=0;n<y.length;n+=1)if(!(0,r[n])(e[y[n]]||""))return!1;return!0}}),ev=I((e,r)=>{S(),eo(),O(es);var n=(eh(),O(el)),o=eb();r.exports=function(e,r){var l=o.getFileName();n.stat(l,function(h,u){if(h||!o.usePgPass(u,l))return r(void 0);var p=n.createReadStream(l);o.getPassword(e,p,r)})},r.exports.warnTo=o.warnTo}),eS=I((e,r)=>{S();var n=J();function mt(e){this._types=e||n,this.text={},this.binary={}}a(mt,"TypeOverrides"),mt.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},mt.prototype.setTypeParser=function(e,r,n){"function"==typeof r&&(n=r,r="text"),this.getOverrides(r)[e]=n},mt.prototype.getTypeParser=function(e,r){return r=r||"text",this.getOverrides(r)[e]||this._types.getTypeParser(e,r)},r.exports=mt}),ew={};ee(ew,{default:()=>eE});var eE,ek=K(()=>{S(),eE={}}),eC={};function fr(e,r=!1){let{protocol:n}=new URL(e),o="http:"+e.substring(n.length),{username:l,password:h,host:u,hostname:p,port:d,pathname:y,search:m,searchParams:g,hash:_}=new URL(o),b=l+":"+(h=decodeURIComponent(h)),v=r?Object.fromEntries(g.entries()):m;return{href:e,protocol:n,auth:b,username:l,password:h,host:u,hostname:p,port:d,pathname:y,search:m,query:v,hash:_}}ee(eC,{parse:()=>fr});var ex=K(()=>{S(),a(fr,"parse")}),eA=I((e,r)=>{S();var n=(ex(),O(eC)),o=(eh(),O(el));function yr(e){if("/"===e.charAt(0)){var r=e.split(" ");return{host:r[0],database:r[1]}}var l=n.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=l.query;for(var h in r)Array.isArray(r[h])&&(r[h]=r[h][r[h].length-1]);var u=(l.auth||":").split(":");if(r.user=u[0],r.password=u.splice(1).join(":"),r.port=l.port,"socket:"==l.protocol)return r.host=decodeURI(l.pathname),r.database=l.query.db,r.client_encoding=l.query.encoding,r;r.host||(r.host=l.hostname);var p=l.pathname;if(!r.host&&p&&/^%2f/i.test(p)){var d=p.split("/");r.host=decodeURIComponent(d[0]),p=d.splice(1).join("/")}switch(p&&"/"===p.charAt(0)&&(p=p.slice(1)||null),r.database=p&&decodeURI(p),("true"===r.ssl||"1"===r.ssl)&&(r.ssl=!0),"0"===r.ssl&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=o.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=o.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=o.readFileSync(r.sslrootcert).toString()),r.sslmode){case"disable":r.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":r.ssl.rejectUnauthorized=!1}return r}a(yr,"parse"),r.exports=yr,yr.parse=yr}),eT=I((e,r)=>{S();var n=(ek(),O(ew)),o=et(),l=eA().parse,u=a(function(e,r,n){return void 0===n?n=h.env["PG"+e.toUpperCase()]:!1===n||(n=h.env[n]),r[e]||n||o[e]},"val"),p=a(function(){switch(h.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return o.ssl},"readSSLConfigFromEnvironment"),d=a(function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),y=a(function(e,r,n){var o=r[n];null!=o&&e.push(n+"="+d(o))},"add"),m=class{constructor(e){(e="string"==typeof e?l(e):e||{}).connectionString&&(e=Object.assign({},e,l(e.connectionString))),this.user=u("user",e),this.database=u("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(u("port",e),10),this.host=u("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:u("password",e)}),this.binary=u("binary",e),this.options=u("options",e),this.ssl=typeof e.ssl>"u"?p():e.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=u("client_encoding",e),this.replication=u("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=u("application_name",e,"PGAPPNAME"),this.fallback_application_name=u("fallback_application_name",e,!1),this.statement_timeout=u("statement_timeout",e,!1),this.lock_timeout=u("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=u("idle_in_transaction_session_timeout",e,!1),this.query_timeout=u("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=h.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var r=[];y(r,this,"user"),y(r,this,"password"),y(r,this,"port"),y(r,this,"application_name"),y(r,this,"fallback_application_name"),y(r,this,"connect_timeout"),y(r,this,"options");var o="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(y(r,o,"sslmode"),y(r,o,"sslca"),y(r,o,"sslkey"),y(r,o,"sslcert"),y(r,o,"sslrootcert"),this.database&&r.push("dbname="+d(this.database)),this.replication&&r.push("replication="+d(this.replication)),this.host&&r.push("host="+d(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+d(this.client_encoding)),n.lookup(this.host,function(n,o){return n?e(n,null):(r.push("hostaddr="+d(o)),e(null,r.join(" ")))})}};a(m,"ConnectionParameters"),r.exports=m}),eI=I((e,r)=>{S();var n=J(),o=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,l=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var r;(r=e.text?o.exec(e.text):o.exec(e.command))&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){for(var r=Array(e.length),n=0,o=e.length;n<o;n++){var l=e[n];null!==l?r[n]=this._parsers[n](l):r[n]=null}return r}parseRow(e){for(var r={},n=0,o=e.length;n<o;n++){var l=e[n],h=this.fields[n].name;null!==l?r[h]=this._parsers[n](l):r[h]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=Array(e.length));for(var r=0;r<e.length;r++){var o=e[r];this._types?this._parsers[r]=this._types.getTypeParser(o.dataTypeID,o.format||"text"):this._parsers[r]=n.getTypeParser(o.dataTypeID,o.format||"text")}}};a(l,"Result"),r.exports=l}),eO=I((e,r)=>{S();var{EventEmitter:n}=w(),o=eI(),l=er(),u=class extends n{constructor(e,r,n){super(),e=l.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,h.domain&&e.callback&&(this.callback=h.domain.bind(e.callback)),this._result=new o(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new o(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(e){this._canceledDueToError=e;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(e){h.nextTick(()=>{throw e})}this.emit("end",this._results)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];return this.text&&r&&this.text!==r?Error(`Prepared statements must be \
unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:l.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};a(u,"Query"),r.exports=u}),eL={};function Lu(e){return 0}ee(eL,{Socket:()=>eB,isIP:()=>Lu});var eP,eR,eB,eM=K(()=>{S(),eP=We(w(),1),a(Lu,"isIP"),a(eR=class x extends eP.EventEmitter{constructor(){super(...arguments),T(this,"opts",{}),T(this,"connecting",!1),T(this,"pending",!0),T(this,"writable",!0),T(this,"encrypted",!1),T(this,"authorized",!1),T(this,"destroyed",!1),T(this,"ws",null),T(this,"writeBuffer"),T(this,"tlsState",0),T(this,"tlsRead"),T(this,"tlsWrite")}static get poolQueryViaFetch(){return x.opts.poolQueryViaFetch??x.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){x.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return x.opts.fetchEndpoint??x.defaults.fetchEndpoint}static set fetchEndpoint(e){x.opts.fetchEndpoint=e}static get fetchConnectionCache(){return x.opts.fetchConnectionCache??x.defaults.fetchConnectionCache}static set fetchConnectionCache(e){x.opts.fetchConnectionCache=e}static get fetchFunction(){return x.opts.fetchFunction??x.defaults.fetchFunction}static set fetchFunction(e){x.opts.fetchFunction=e}static get webSocketConstructor(){return x.opts.webSocketConstructor??x.defaults.webSocketConstructor}static set webSocketConstructor(e){x.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??x.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return x.opts.wsProxy??x.defaults.wsProxy}static set wsProxy(e){x.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??x.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return x.opts.coalesceWrites??x.defaults.coalesceWrites}static set coalesceWrites(e){x.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??x.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return x.opts.useSecureWebSocket??x.defaults.useSecureWebSocket}static set useSecureWebSocket(e){x.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??x.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return x.opts.forceDisablePgSSL??x.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){x.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??x.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return x.opts.disableSNI??x.defaults.disableSNI}static set disableSNI(e){x.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??x.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return x.opts.pipelineConnect??x.defaults.pipelineConnect}static set pipelineConnect(e){x.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??x.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return x.opts.subtls??x.defaults.subtls}static set subtls(e){x.opts.subtls=e}get subtls(){return this.opts.subtls??x.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return x.opts.pipelineTLS??x.defaults.pipelineTLS}static set pipelineTLS(e){x.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??x.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return x.opts.rootCerts??x.defaults.rootCerts}static set rootCerts(e){x.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??x.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let n=this.wsProxy;if(void 0===n)throw Error("No WebSocket proxy is configured. Please refer to https://github.com/neondatabase/serverless#run-your-own-websocket-proxy");return"function"==typeof n?n(e,r):`${n}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}async connect(e,r,n){let o;this.connecting=!0,n&&this.once("connect",n);try{o=this.wsProxyAddrForHost(r,"string"==typeof e?parseInt(e,10):e)}catch(e){this.emit("error",e),this.emit("close");return}return this.ws=await new Promise(async e=>{try{let r=(this.useSecureWebSocket?"wss:":"ws:")+"//"+o,n;if(void 0!==this.webSocketConstructor)n=new this.webSocketConstructor(r);else try{n=new WebSocket(r)}catch{n=new __unstable_WebSocket(r)}n.addEventListener("open",()=>{e(n)})}catch(r){try{let n=(this.useSecureWebSocket?"https:":"http:")+"//"+o;await fetch(n,{headers:{Upgrade:"websocket"}}).then(n=>{let o=n.webSocket;if(null==o)throw r;o.accept(),e(o)})}catch{this.emit("error",Error("All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless#run-on-node")),this.emit("close");return}}}),this.ws.binaryType="arraybuffer",this.ws.addEventListener("error",e=>{this.emit("error",e),this.emit("close")}),this.ws.addEventListener("close",()=>{this.emit("close")}),this.ws.addEventListener("message",e=>{if(0===this.tlsState){let r=l.from(e.data);this.emit("data",r)}}),this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready"),this}async startTls(e){if(void 0===this.subtls)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=this.subtls.TrustedCert.fromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),o=n.read.bind(n),l=this.rawWrite.bind(this),[h,u]=await this.subtls.startTls(e,r,o,l,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=h,this.tlsWrite=u,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(void 0===e)break;{let r=l.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(void 0===this.writeBuffer)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",n=e=>{}){return 0===e.length?n():("string"==typeof e&&(e=l.from(e,r)),0===this.tlsState?this.rawWrite(e):1===this.tlsState?this.once("secureConnection",()=>this.write(e,r,n)):this.tlsWrite(e),!0)}end(e=l.alloc(0),r="utf8",n){return this.write(e,r,()=>{this.ws.close(),n&&n()}),this}destroy(){return this.destroyed=!0,this.end()}},"Socket"),T(eR,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:e=>"https://"+e+"/sql",fetchConnectionCache:!1,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:e=>e+"/v2",useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),T(eR,"opts",{}),eB=eR}),eN=I(e=>{S(),Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeMessage=e.DataRowMessage=e.CommandCompleteMessage=e.ReadyForQueryMessage=e.NotificationResponseMessage=e.BackendKeyDataMessage=e.AuthenticationMD5Password=e.ParameterStatusMessage=e.ParameterDescriptionMessage=e.RowDescriptionMessage=e.Field=e.CopyResponse=e.CopyDataMessage=e.DatabaseError=e.copyDone=e.emptyQuery=e.replicationStart=e.portalSuspended=e.noData=e.closeComplete=e.bindComplete=e.parseComplete=void 0,e.parseComplete={name:"parseComplete",length:5},e.bindComplete={name:"bindComplete",length:5},e.closeComplete={name:"closeComplete",length:5},e.noData={name:"noData",length:5},e.portalSuspended={name:"portalSuspended",length:5},e.replicationStart={name:"replicationStart",length:4},e.emptyQuery={name:"emptyQuery",length:4},e.copyDone={name:"copyDone",length:4};var r=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};a(r,"DatabaseError"),e.DatabaseError=r;var n=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};a(n,"CopyDataMessage"),e.CopyDataMessage=n;var o=class{constructor(e,r,n,o){this.length=e,this.name=r,this.binary=n,this.columnTypes=Array(o)}};a(o,"CopyResponse"),e.CopyResponse=o;var l=class{constructor(e,r,n,o,l,h,u){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=o,this.dataTypeSize=l,this.dataTypeModifier=h,this.format=u}};a(l,"Field"),e.Field=l;var h=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=Array(this.fieldCount)}};a(h,"RowDescriptionMessage"),e.RowDescriptionMessage=h;var u=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};a(u,"ParameterDescriptionMessage"),e.ParameterDescriptionMessage=u;var p=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};a(p,"ParameterStatusMessage"),e.ParameterStatusMessage=p;var d=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};a(d,"AuthenticationMD5Password"),e.AuthenticationMD5Password=d;var y=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};a(y,"BackendKeyDataMessage"),e.BackendKeyDataMessage=y;var m=class{constructor(e,r,n,o){this.length=e,this.processId=r,this.channel=n,this.payload=o,this.name="notification"}};a(m,"NotificationResponseMessage"),e.NotificationResponseMessage=m;var g=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};a(g,"ReadyForQueryMessage"),e.ReadyForQueryMessage=g;var _=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};a(_,"CommandCompleteMessage"),e.CommandCompleteMessage=_;var b=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};a(b,"DataRowMessage"),e.DataRowMessage=b;var v=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};a(v,"NoticeMessage"),e.NoticeMessage=v}),eU=I(e=>{S(),Object.defineProperty(e,"__esModule",{value:!0}),e.Writer=void 0;var r=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=l.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){var r=this.buffer,n=r.length+(r.length>>1)+e;this.buffer=l.allocUnsafe(n),r.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var r=l.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var r=l.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=l.allocUnsafe(this.size),r}};a(r,"Writer"),e.Writer=r}),eD=I(e=>{S(),Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;var r=eU(),n=new r.Writer,o=a(e=>{for(let r of(n.addInt16(3).addInt16(0),Object.keys(e)))n.addCString(r).addCString(e[r]);n.addCString("client_encoding").addCString("UTF8");var o=n.addCString("").flush(),l=o.length+4;return new r.Writer().addInt32(l).add(o).flush()},"startup"),h=a(()=>{let e=l.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},"requestSsl"),u=a(e=>n.addCString(e).flush(112),"password"),p=a(function(e,r){return n.addCString(e).addInt32(l.byteLength(r)).addString(r),n.flush(112)},"sendSASLInitialResponseMessage"),d=a(function(e){return n.addString(e).flush(112)},"sendSCRAMClientFinalMessage"),y=a(e=>n.addCString(e).flush(81),"query"),m=[],g=a(e=>{let r=e.name||"";r.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",r,r.length),console.error("This can cause conflicts and silent errors executing queries"));let o=e.types||m;for(var l=o.length,h=n.addCString(r).addCString(e.text).addInt16(l),u=0;u<l;u++)h.addInt32(o[u]);return n.flush(80)},"parse"),_=new r.Writer,b=a(function(e,r){for(let o=0;o<e.length;o++){let h=r?r(e[o],o):e[o];null==h?(n.addInt16(0),_.addInt32(-1)):h instanceof l?(n.addInt16(1),_.addInt32(h.length),_.add(h)):(n.addInt16(0),_.addInt32(l.byteLength(h)),_.addString(h))}},"writeValues"),v=a((e={})=>{let r=e.portal||"",o=e.statement||"",l=e.binary||!1,h=e.values||m,u=h.length;return n.addCString(r).addCString(o),n.addInt16(u),b(h,e.valueMapper),n.addInt16(u),n.add(_.flush()),n.addInt16(l?1:0),n.flush(66)},"bind"),w=l.from([69,0,0,0,9,0,0,0,0,0]),E=a(e=>{if(!e||!e.portal&&!e.rows)return w;let r=e.portal||"",n=e.rows||0,o=l.byteLength(r),h=4+o+1+4,u=l.allocUnsafe(1+h);return u[0]=69,u.writeInt32BE(h,1),u.write(r,5,"utf-8"),u[o+5]=0,u.writeUInt32BE(n,u.length-4),u},"execute"),C=a((e,r)=>{let n=l.allocUnsafe(16);return n.writeInt32BE(16,0),n.writeInt16BE(1234,4),n.writeInt16BE(5678,6),n.writeInt32BE(e,8),n.writeInt32BE(r,12),n},"cancel"),A=a((e,r)=>{let n=4+l.byteLength(r)+1,o=l.allocUnsafe(1+n);return o[0]=e,o.writeInt32BE(n,1),o.write(r,5,"utf-8"),o[n]=0,o},"cstringMessage"),L=n.addCString("P").flush(68),P=n.addCString("S").flush(68),R=a(e=>e.name?A(68,`${e.type}${e.name||""}`):"P"===e.type?L:P,"describe"),M=a(e=>A(67,`${e.type}${e.name||""}`),"close"),N=a(e=>n.add(e).flush(100),"copyData"),D=a(e=>A(102,e),"copyFail"),F=a(e=>l.from([e,0,0,0,4]),"codeOnlyBuffer"),W=F(72),q=F(83),Q=F(88),$=F(99);e.serialize={startup:o,password:u,requestSsl:h,sendSASLInitialResponseMessage:p,sendSCRAMClientFinalMessage:d,query:y,parse:g,bind:v,execute:E,describe:R,close:M,flush:()=>W,sync:()=>q,end:()=>Q,copyData:N,copyDone:()=>$,copyFail:D,cancel:C}}),eF=I(e=>{S(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferReader=void 0;var r=l.allocUnsafe(0),n=class{constructor(e=0){this.offset=e,this.buffer=r,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;0!==this.buffer[r++];);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};a(n,"BufferReader"),e.BufferReader=n}),ej={};ee(ej,{default:()=>eW});var eW,eq=K(()=>{S(),eW={}}),eQ=I(e=>{S();var r=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var n=eN(),o=eF(),h=r((eq(),O(ej))),u=l.allocUnsafe(0),p=class{constructor(e){if(this.buffer=u,this.bufferLength=0,this.bufferOffset=0,this.reader=new o.BufferReader,e?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,o=this.bufferOffset;for(;o+5<=n;){let e=this.buffer[o],l=this.buffer.readUInt32BE(o+1),h=1+l;if(h+o<=n)r(this.handlePacket(o+5,e,l,this.buffer)),o+=h;else break}o===n?(this.buffer=u,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-o,this.bufferOffset=o)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let e;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let n=2*this.buffer.byteLength;for(;r>=n;)n*=2;e=l.allocUnsafe(n)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,o,l){switch(r){case 50:return n.bindComplete;case 49:return n.parseComplete;case 51:return n.closeComplete;case 110:return n.noData;case 115:return n.portalSuspended;case 99:return n.copyDone;case 87:return n.replicationStart;case 73:return n.emptyQuery;case 68:return this.parseDataRowMessage(e,o,l);case 67:return this.parseCommandCompleteMessage(e,o,l);case 90:return this.parseReadyForQueryMessage(e,o,l);case 65:return this.parseNotificationMessage(e,o,l);case 82:return this.parseAuthenticationResponse(e,o,l);case 83:return this.parseParameterStatusMessage(e,o,l);case 75:return this.parseBackendKeyData(e,o,l);case 69:return this.parseErrorMessage(e,o,l,"error");case 78:return this.parseErrorMessage(e,o,l,"notice");case 84:return this.parseRowDescriptionMessage(e,o,l);case 116:return this.parseParameterDescriptionMessage(e,o,l);case 71:return this.parseCopyInMessage(e,o,l);case 72:return this.parseCopyOutMessage(e,o,l);case 100:return this.parseCopyData(e,o,l);default:h.default.fail(`unknown message code: ${r.toString(16)}`)}}parseReadyForQueryMessage(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.string(1);return new n.ReadyForQueryMessage(r,l)}parseCommandCompleteMessage(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.cstring();return new n.CommandCompleteMessage(r,l)}parseCopyData(e,r,o){let l=o.slice(e,e+(r-4));return new n.CopyDataMessage(r,l)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,o,l){this.reader.setBuffer(e,o);let h=0!==this.reader.byte(),u=this.reader.int16(),p=new n.CopyResponse(r,l,h,u);for(let e=0;e<u;e++)p.columnTypes[e]=this.reader.int16();return p}parseNotificationMessage(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.int32(),h=this.reader.cstring(),u=this.reader.cstring();return new n.NotificationResponseMessage(r,l,h,u)}parseRowDescriptionMessage(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.int16(),h=new n.RowDescriptionMessage(r,l);for(let e=0;e<l;e++)h.fields[e]=this.parseField();return h}parseField(){let e=this.reader.cstring(),r=this.reader.int32(),o=this.reader.int16(),l=this.reader.int32(),h=this.reader.int16(),u=this.reader.int32(),p=0===this.reader.int16()?"text":"binary";return new n.Field(e,r,o,l,h,u,p)}parseParameterDescriptionMessage(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.int16(),h=new n.ParameterDescriptionMessage(r,l);for(let e=0;e<l;e++)h.dataTypeIDs[e]=this.reader.int32();return h}parseDataRowMessage(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.int16(),h=Array(l);for(let e=0;e<l;e++){let r=this.reader.int32();h[e]=-1===r?null:this.reader.string(r)}return new n.DataRowMessage(r,h)}parseParameterStatusMessage(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.cstring(),h=this.reader.cstring();return new n.ParameterStatusMessage(r,l,h)}parseBackendKeyData(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.int32(),h=this.reader.int32();return new n.BackendKeyDataMessage(r,l,h)}parseAuthenticationResponse(e,r,o){this.reader.setBuffer(e,o);let l=this.reader.int32(),h={name:"authenticationOk",length:r};switch(l){case 0:break;case 3:8===h.length&&(h.name="authenticationCleartextPassword");break;case 5:if(12===h.length){h.name="authenticationMD5Password";let e=this.reader.bytes(4);return new n.AuthenticationMD5Password(r,e)}break;case 10:let u;h.name="authenticationSASL",h.mechanisms=[];do(u=this.reader.cstring())&&h.mechanisms.push(u);while(u);break;case 11:h.name="authenticationSASLContinue",h.data=this.reader.string(r-8);break;case 12:h.name="authenticationSASLFinal",h.data=this.reader.string(r-8);break;default:throw Error("Unknown authenticationOk message type "+l)}return h}parseErrorMessage(e,r,o,l){this.reader.setBuffer(e,o);let h={},u=this.reader.string(1);for(;"\x00"!==u;)h[u]=this.reader.cstring(),u=this.reader.string(1);let p=h.M,d="notice"===l?new n.NoticeMessage(r,p):new n.DatabaseError(p,r,l);return d.severity=h.S,d.code=h.C,d.detail=h.D,d.hint=h.H,d.position=h.P,d.internalPosition=h.p,d.internalQuery=h.q,d.where=h.W,d.schema=h.s,d.table=h.t,d.column=h.c,d.dataType=h.d,d.constraint=h.n,d.file=h.F,d.line=h.L,d.routine=h.R,d}};a(p,"Parser"),e.Parser=p}),e$=I(e=>{S(),Object.defineProperty(e,"__esModule",{value:!0}),e.DatabaseError=e.serialize=e.parse=void 0;var r=eN();Object.defineProperty(e,"DatabaseError",{enumerable:!0,get:function(){return r.DatabaseError}});var n=eD();Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}});var o=eQ();function hc(e,r){let n=new o.Parser;return e.on("data",e=>n.parse(e,r)),new Promise(r=>e.on("end",()=>r()))}a(hc,"parse"),e.parse=hc}),eG={};function lc({socket:e,servername:r}){return e.startTls(r),e}ee(eG,{connect:()=>lc});var eH=K(()=>{S(),a(lc,"connect")}),eV=I((e,r)=>{S();var n=(eM(),O(eL)),o=w().EventEmitter,{parse:l,serialize:h}=e$(),u=h.flush(),p=h.sync(),d=h.end(),y=class extends o{constructor(e){super(),e=e||{},this.stream=e.stream||new n.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var r=this;this.on("newListener",function(e){"message"===e&&(r._emitMessage=!0)})}connect(e,r){var o=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){o._keepAlive&&o.stream.setKeepAlive(!0,o._keepAliveInitialDelayMillis),o.emit("connect")});let l=a(function(e){o._ending&&("ECONNRESET"===e.code||"EPIPE"===e.code)||o.emit("error",e)},"reportStreamError");if(this.stream.on("error",l),this.stream.on("close",function(){o.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(e){switch(e.toString("utf8")){case"S":break;case"N":return o.stream.end(),o.emit("error",Error("The server does not support SSL connections"));default:return o.stream.end(),o.emit("error",Error("There was an error establishing an SSL connection"))}var h=(eH(),O(eG));let u={socket:o.stream};!0!==o.ssl&&(Object.assign(u,o.ssl),"key"in o.ssl&&(u.key=o.ssl.key)),0===n.isIP(r)&&(u.servername=r);try{o.stream=h.connect(u)}catch(e){return o.emit("error",e)}o.attachListeners(o.stream),o.stream.on("error",l),o.emit("sslconnect")})}attachListeners(e){e.on("end",()=>{this.emit("end")}),l(e,e=>{var r="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(r,e)})}requestSsl(){this.stream.write(h.requestSsl())}startup(e){this.stream.write(h.startup(e))}cancel(e,r){this._send(h.cancel(e,r))}password(e){this._send(h.password(e))}sendSASLInitialResponseMessage(e,r){this._send(h.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(h.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(h.query(e))}parse(e){this._send(h.parse(e))}bind(e){this._send(h.bind(e))}execute(e){this._send(h.execute(e))}flush(){this.stream.writable&&this.stream.write(u)}sync(){this._ending=!0,this._send(u),this._send(p)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(d,()=>{this.stream.end()})}close(e){this._send(h.close(e))}describe(e){this._send(h.describe(e))}sendCopyFromChunk(e){this._send(h.copyData(e))}endCopyFrom(){this._send(h.copyDone())}sendCopyFail(e){this._send(h.copyFail(e))}};a(y,"Connection"),r.exports=y}),ez=I((e,n)=>{S();var o=w().EventEmitter,l=(A(),O(E),er()),u=en(),p=ev(),d=eS(),y=eT(),m=eO(),g=et(),_=eV(),b=class extends o{constructor(e){super(),this.connectionParameters=new y(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var n=e||{};this._Promise=n.Promise||r.Promise,this._types=new d(n.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=n.connection||new _({stream:n.stream,ssl:this.connectionParameters.ssl,keepAlive:n.keepAlive||!1,keepAliveInitialDelayMillis:n.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=n.binary||g.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=n.connectionTimeoutMillis||0}_errorAllQueries(e){let r=a(r=>{h.nextTick(()=>{r.handleError(e,this.connection)})},"enqueueError");this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){var r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let r=Error("Client has already been connected. You cannot reuse a client.");h.nextTick(()=>{e(r)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let e=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),h.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(n=>{if(void 0!==n){if("string"!=typeof n){r.emit("error",TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(e=>{r.emit("error",e)}):null!==this.password?e():p(this.connectionParameters,r=>{void 0!==r&&(this.connectionParameters.password=this.password=r),e()})}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(()=>{let r=l.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)})}_handleAuthSASL(e){this._checkPgPass(()=>{this.saslSession=u.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(e){u.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){u.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){var n=this.connection;this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else -1!==e.queryQueue.indexOf(r)&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var r=!1,n="'",o=0;o<e.length;o++){var l=e[o];"'"===l?n+=l+l:"\\"===l?(n+=l+l,r=!0):n+=l}return n+="'",!0===r&&(n=" E"+n),n}_pulseQueryQueue(){if(!0===this.readyForQuery){if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&h.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}}query(e,r,n){var o,l,u,p,d;if(null==e)throw TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(u=e.query_timeout||this.connectionParameters.query_timeout,l=o=e,"function"==typeof r&&(o.callback=o.callback||r)):(u=this.connectionParameters.query_timeout,(o=new m(e,r,n)).callback||(l=new this._Promise((e,r)=>{o.callback=(n,o)=>n?r(n):e(o)}))),u&&(d=o.callback,p=setTimeout(()=>{var e=Error("Query read timeout");h.nextTick(()=>{o.handleError(e,this.connection)}),d(e),o.callback=()=>{};var r=this.queryQueue.indexOf(o);r>-1&&this.queryQueue.splice(r,1),this._pulseQueryQueue()},u),o.callback=(e,r)=>{clearTimeout(p),d(e,r)}),this.binary&&!o.binary&&(o.binary=!0),o._result&&!o._result._types&&(o._result._types=this._types),this._queryable?this._ending?h.nextTick(()=>{o.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(o),this._pulseQueryQueue()):h.nextTick(()=>{o.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),l}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)}};a(b,"Client"),b.Query=m,n.exports=b}),eK=I((e,o)=>{S();var l=w().EventEmitter,u=a(function(){},"NOOP"),p=a((e,r)=>{let n=e.findIndex(r);return -1===n?void 0:e.splice(n,1)[0]},"removeWhere"),d=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}};a(d,"IdleItem");var y=class{constructor(e){this.callback=e}};function _c(){throw Error("Release called on client which has already been released to the pool.")}function _t(e,r){let n,o;return r?{callback:r,result:void 0}:{callback:a(function(e,r){e?n(e):o(r)},"cb"),result:new e(function(e,r){o=e,n=r}).catch(e=>{throw Error.captureStackTrace(e),e})}}function Ac(e,r){return a(function t(n){n.client=r,r.removeListener("error",t),r.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(r),e.emit("error",n,r)},"idleListener")}a(y,"PendingItem"),a(_c,"throwOnDoubleRelease"),a(_t,"promisify"),a(Ac,"makeIdleListener");var m=class extends l{constructor(e,n){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),null!=e&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||n||e3().Client,this.Promise=this.options.Promise||r.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let o=r.idleListener;return this._acquireClient(n,e,o,!1)}if(!this._isFull())return this.newClient(e);throw Error("unexpected condition")}_remove(e){let r=p(this._idle,r=>r.client===e);void 0!==r&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(r=>r!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let r=Error("Cannot use a pool after calling end on the pool");return e?e(r):this.Promise.reject(r)}let r=_t(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&h.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new y(r.callback)),n;let e=a((e,n,o)=>{clearTimeout(l),r.callback(e,n,o)},"queueCallback"),o=new y(e),l=setTimeout(()=>{p(this._pendingQueue,r=>r.callback===e),o.timedOut=!0,r.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(o),n}return this.newClient(new y(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=Ac(this,r);this.log("checking client timeout");let o,l=!1;this.options.connectionTimeoutMillis&&(o=setTimeout(()=>{this.log("ending client due to timeout"),l=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(h=>{if(o&&clearTimeout(o),r.on("error",n),h)this.log("client failed to connect",h),this._clients=this._clients.filter(e=>e!==r),l&&(h.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(h,void 0,u);else{if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let e=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),-1!==this._idle.findIndex(e=>e.client===r)&&this._acquireClient(r,new y((e,r,n)=>n()),n,!1)},1e3*this.options.maxLifetimeSeconds);e.unref(),r.once("end",()=>clearTimeout(e))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,o){o&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?o&&this.options.verify?this.options.verify(e,e.release):e.release():o&&this.options.verify?this.options.verify(e,n=>{if(n)return e.release(n),r.callback(n,void 0,u);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return o=>{n&&_c(),n=!0,this._release(e,r,o)}}_release(e,r,n){let o;if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses){e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),this._pulseQueue();return}if(this._expired.has(e)){this.log("remove expired client"),this._expired.delete(e),this._remove(e),this._pulseQueue();return}this.options.idleTimeoutMillis&&(o=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new d(e,r,o)),this._pulseQueue()}query(e,r,o){if("function"==typeof e){let r=_t(this.Promise,e);return n(function(){return r.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),r.result}"function"==typeof r&&(o=r,r=void 0);let l=_t(this.Promise,o);return o=l.callback,this.connect((n,l)=>{if(n)return o(n);let h=!1,u=a(e=>{h||(h=!0,l.release(e),o(e))},"onError");l.once("error",u),this.log("dispatching query");try{l.query(e,r,(e,r)=>{if(this.log("query dispatched"),l.removeListener("error",u),!h)return h=!0,l.release(e),e?o(e):o(void 0,r)})}catch(e){return l.release(e),o(e)}}),l.result}end(e){if(this.log("ending"),this.ending){let r=Error("Called end on pool more than once");return e?e(r):this.Promise.reject(r)}this.ending=!0;let r=_t(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};a(m,"Pool"),o.exports=m}),eY={};ee(eY,{default:()=>eZ});var eZ,eX=K(()=>{S(),eZ={}}),eJ=I((e,r)=>{r.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),e1=I((e,r)=>{S();var o=w().EventEmitter,l=(A(),O(E)),u=er(),p=r.exports=function(e,r,n){o.call(this),e=u.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",(function(e){"row"===e&&(this._emitRowEvents=!0)}).bind(this))};l.inherits(p,o);var d={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};p.prototype.handleError=function(e){var r=this.native.pq.resultErrorFields();if(r)for(var n in r)e[d[n]||n]=r[n];this.callback?this.callback(e):this.emit("error",e),this.state="error"},p.prototype.then=function(e,r){return this._getPromise().then(e,r)},p.prototype.catch=function(e){return this._getPromise().catch(e)},p.prototype._getPromise=function(){return this._promise||(this._promise=new Promise((function(e,r){this._once("end",e),this._once("error",r)}).bind(this))),this._promise},p.prototype.submit=function(e){this.state="running";var r=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var o=a(function(o,l,h){if(e.native.arrayMode=!1,n(function(){r.emit("_done")}),o)return r.handleError(o);r._emitRowEvents&&(h.length>1?l.forEach((e,n)=>{e.forEach(e=>{r.emit("row",e,h[n])})}):l.forEach(function(e){r.emit("row",e,h)})),r.state="end",r.emit("end",h),r.callback&&r.callback(null,h)},"after");if(h.domain&&(o=h.domain.bind(o)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var l=(this.values||[]).map(u.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let e=Error(`Pre\
pared statements must be unique - '${this.name}' was used for a different statem\
ent`);return o(e)}return e.native.execute(this.name,l,o)}return e.native.prepare(this.name,this.text,l.length,function(n){return n?o(n):(e.namedQueries[r.name]=r.text,r.native.execute(r.name,l,o))})}if(this.values){if(!Array.isArray(this.values)){let e=Error("Query values must be an array");return o(e)}var p=this.values.map(u.prepareValue);e.native.query(this.text,p,o)}else e.native.query(this.text,o)}}),e0=I((e,n)=>{S();var o=(eX(),O(eY)),l=eS(),u=(eJ(),w().EventEmitter),p=(A(),O(E)),d=eT(),y=e1(),m=n.exports=function(e){u.call(this),e=e||{},this._Promise=e.Promise||r.Promise,this._types=new l(e.types),this.native=new o({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var n=this.connectionParameters=new d(e);this.user=n.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:n.password}),this.database=n.database,this.host=n.host,this.port=n.port,this.namedQueries={}};m.Query=y,p.inherits(m,u),m.prototype._errorAllQueries=function(e){let r=a(r=>{h.nextTick(()=>{r.native=this.native,r.handleError(e)})},"enqueueError");this._hasActiveQuery()&&(r(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(r),this._queryQueue.length=0},m.prototype._connect=function(e){var r=this;if(this._connecting){h.nextTick(()=>e(Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(n,o){if(n)return e(n);r.native.connect(o,function(n){if(n)return r.native.end(),e(n);r._connected=!0,r.native.on("error",function(e){r._queryable=!1,r._errorAllQueries(e),r.emit("error",e)}),r.native.on("notification",function(e){r.emit("notification",{channel:e.relname,payload:e.extra})}),r.emit("connect"),r._pulseQueryQueue(!0),e()})})},m.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})},m.prototype.query=function(e,r,n){var o,l,u,p,d;if(null==e)throw TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)u=e.query_timeout||this.connectionParameters.query_timeout,l=o=e,"function"==typeof r&&(e.callback=r);else if(u=this.connectionParameters.query_timeout,!(o=new y(e,r,n)).callback){let e,r;l=new this._Promise((n,o)=>{e=n,r=o}),o.callback=(n,o)=>n?r(n):e(o)}return u&&(d=o.callback,p=setTimeout(()=>{var e=Error("Query read timeout");h.nextTick(()=>{o.handleError(e,this.connection)}),d(e),o.callback=()=>{};var r=this._queryQueue.indexOf(o);r>-1&&this._queryQueue.splice(r,1),this._pulseQueryQueue()},u),o.callback=(e,r)=>{clearTimeout(p),d(e,r)}),this._queryable?this._ending?(o.native=this.native,h.nextTick(()=>{o.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(o),this._pulseQueryQueue()):(o.native=this.native,h.nextTick(()=>{o.handleError(Error("Client has encountered a connection error and is not queryable"))})),l},m.prototype.end=function(e){var r,n=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(r=new this._Promise(function(r,n){e=a(e=>e?n(e):r(),"cb")})),this.native.end(function(){n._errorAllQueries(Error("Connection terminated")),h.nextTick(()=>{n.emit("end"),e&&e()})}),r},m.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},m.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var r=this._queryQueue.shift();if(!r){e||this.emit("drain");return}this._activeQuery=r,r.submit(this);var n=this;r.once("_done",function(){n._pulseQueryQueue()})}},m.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},m.prototype.ref=function(){},m.prototype.unref=function(){},m.prototype.setTypeParser=function(e,r,n){return this._types.setTypeParser(e,r,n)},m.prototype.getTypeParser=function(e,r){return this._types.getTypeParser(e,r)}}),e2=I((e,r)=>{S(),r.exports=e0()}),e3=I((e,r)=>{S();var n=ez(),o=et(),l=eV(),u=eK(),{DatabaseError:p}=e$(),d=a(e=>{var r;return a(r=class extends u{constructor(r){super(r,e)}},"BoundPool"),r},"poolFactory"),y=a(function(e){this.defaults=o,this.Client=e,this.Query=this.Client.Query,this.Pool=d(this.Client),this._pools=[],this.Connection=l,this.types=J(),this.DatabaseError=p},"PG");"u">typeof h.env.NODE_PG_FORCE_NATIVE?r.exports=new y(e2()):(r.exports=new y(n),Object.defineProperty(r.exports,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new y(e2())}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e}return Object.defineProperty(r.exports,"native",{value:e}),e}}))}),e6={};ee(e6,{Client:()=>tn,ClientBase:()=>tt.ClientBase,Connection:()=>tt.Connection,DatabaseError:()=>tt.DatabaseError,NeonDbError:()=>e7,Pool:()=>to,Query:()=>tt.Query,defaults:()=>tt.defaults,neon:()=>xn,neonConfig:()=>eB,types:()=>tt.types}),e.exports=O(e6),S();var e5=We(e3());eM(),S(),ex(),eM();var e4=We(er()),e8=class extends Error{constructor(){super(...arguments),T(this,"name","NeonDbError"),T(this,"code",null),T(this,"sourceError")}};a(e8,"NeonDbError");var e7=e8,e9="transaction() expects an array of queries, or a function returning an array of queries";function xn(e,{arrayMode:r,fullResults:n,fetchOptions:o,isolationLevel:l,readOnly:h,deferrable:u,queryCallback:p,resultCallback:d}={}){let y;if(!e)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{y=fr(e)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(e))}let{protocol:m,username:g,password:_,hostname:b,port:v,pathname:S}=y;if("postgres:"!==m&&"postgresql:"!==m||!g||!_||!b||!S)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function X(e,...r){let n,o;if("string"==typeof e)n=e,o=r[1],r=r[0]??[];else{n="";for(let o=0;o<e.length;o++)n+=e[o],o<r.length&&(n+="$"+(o+1))}let l={query:n,params:r=r.map(e=>(0,e4.prepareValue)(e))};return p&&p(l),Nc(de,l,o)}async function de(p,y){let m,g=o??{},{fetchEndpoint:_,fetchConnectionCache:S,fetchFunction:w}=eB,E="function"==typeof _?_(b,v):_,C=Array.isArray(p)?{queries:p}:p,A=r??!1,L=n??!1,P=l,R=h,M=u;void 0!==y&&(void 0!==y.arrayMode&&(A=y.arrayMode),void 0!==y.fullResults&&(L=y.fullResults),void 0!==y.fetchOptions&&(g={...g,...y.fetchOptions}),void 0!==y.isolationLevel&&(P=y.isolationLevel),void 0!==y.readOnly&&(R=y.readOnly),void 0!==y.deferrable&&(M=y.deferrable));let N={"Neon-Connection-String":e,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"};!0===S&&(N["Neon-Pool-Opt-In"]="true"),Array.isArray(p)&&(void 0!==P&&(N["Neon-Batch-Isolation-Level"]=P),void 0!==R&&(N["Neon-Batch-Read-Only"]=String(R)),void 0!==M&&(N["Neon-Batch-Deferrable"]=String(M)));try{m=await (w??fetch)(E,{method:"POST",body:JSON.stringify(C),headers:N,...g})}catch(r){let e=new e7(`Error connecting to data\
base: ${r.message}`);throw e.sourceError=r,e}if(m.ok){let e=await m.json();if(!Array.isArray(p))return Ys(e,{arrayMode:A,fullResults:L,parameterizedQuery:p,resultCallback:d});{let r=e.results;if(!Array.isArray(r))throw new e7("Neon internal error: unexpected result format");return r.map((e,r)=>Ys(e,{arrayMode:A,fullResults:L,parameterizedQuery:p[r],resultCallback:d}))}}{let{status:e}=m;if(400===e){let{message:e,code:r}=await m.json(),n=new e7(e);throw n.code=r,n}{let r=await m.text();throw new e7(`Server error (HTTP status ${e}): ${r}`)}}}return a(X,"resolve"),X.transaction=async(e,r)=>{if("function"==typeof e&&(e=e(X)),!Array.isArray(e))throw Error(e9);return de(e.map(e=>{if("NeonQueryPromise"!==e[Symbol.toStringTag])throw Error(e9);return e.parameterizedQuery}),r)},a(de,"execute"),X}function Nc(e,r,n){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:r,opts:n,then:(o,l)=>e(r,n).then(o,l),catch:o=>e(r,n).catch(o),finally:o=>e(r,n).finally(o)}}function Ys(e,{arrayMode:r,fullResults:n,parameterizedQuery:o,resultCallback:l}){let h=e.fields.map(e=>e.name),u=e.fields.map(e=>tt.types.getTypeParser(e.dataTypeID)),p=!0===r?e.rows.map(e=>e.map((e,r)=>null===e?null:u[r](e))):e.rows.map(e=>Object.fromEntries(e.map((e,r)=>[h[r],null===e?null:u[r](e)])));return l&&l(o,e,p,{arrayMode:r,fullResults:n}),n?(e.viaNeonFetch=!0,e.rowAsArray=r,e.rows=p,e):p}a(xn,"neon"),a(Nc,"createNeonQueryPromise"),a(Ys,"processQueryResult");var te=We(eT()),tt=We(e3()),tr=class extends e5.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=this.config?.host!==void 0||this.config?.connectionString!==void 0||void 0!==h.env.PGHOST,o=h.env.USER??h.env.USERNAME;if(!n&&"localhost"===this.host&&this.user===o&&this.database===o&&null===this.password)throw Error(`No datab\
ase host or connection string was set, and key parameters have default values (h\
ost: localhost, user: ${o}, db: ${o}, password: null). Is an environment variabl\
e missing? Alternatively, if you intended to connect with these parameters, plea\
se set the host to 'localhost' explicitly.`);let l=super.connect(e),u=r.pipelineTLS&&this.ssl,p="password"===r.pipelineConnect;if(!u&&!r.pipelineConnect)return l;let d=this.connection;if(u&&d.on("connect",()=>d.stream.emit("data","S")),p){d.removeAllListeners("authenticationCleartextPassword"),d.removeAllListeners("readyForQuery"),d.once("readyForQuery",()=>d.on("readyForQuery",this._handleReadyForQuery.bind(this)));let e=this.ssl?"sslconnect":"connect";d.on(e,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return l}async _handleAuthSASLContinue(e){let r=this.saslSession,n=this.password,h=e.data;if("SASLInitialResponse"!==r.message||"string"!=typeof n||"string"!=typeof h)throw Error("SASL: protocol error");let u=Object.fromEntries(h.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]})),p=u.r,d=u.s,y=u.i;if(!p||!/^[!-+--~]+$/.test(p))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!d||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(d))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!y||!/^[1-9][0-9]*$/.test(y))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!p.startsWith(r.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(p.length===r.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let m=parseInt(y,10),g=l.from(d,"base64"),_=new TextEncoder,b=_.encode(n),v=await o.subtle.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),S=new Uint8Array(await o.subtle.sign("HMAC",v,l.concat([g,l.from([0,0,0,1])]))),w=S;for(var E=0;E<m-1;E++)S=new Uint8Array(await o.subtle.sign("HMAC",v,S)),w=l.from(w.map((e,r)=>w[r]^S[r]));let C=w,A=await o.subtle.importKey("raw",C,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),L=new Uint8Array(await o.subtle.sign("HMAC",A,_.encode("Client Key"))),P=await o.subtle.digest("SHA-256",L),R="n=*,r="+r.clientNonce,M="r="+p+",s="+d+",i="+m,N="c=biws,r="+p,D=R+","+M+","+N,F=await o.subtle.importKey("raw",P,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var W=new Uint8Array(await o.subtle.sign("HMAC",F,_.encode(D))),q=l.from(L.map((e,r)=>L[r]^W[r])).toString("base64");let Q=await o.subtle.importKey("raw",C,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),$=await o.subtle.sign("HMAC",Q,_.encode("Server Key")),G=await o.subtle.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var H=l.from(await o.subtle.sign("HMAC",G,_.encode(D)));r.message="SASLResponse",r.serverSignature=H.toString("base64"),r.response=N+",p="+q,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};a(tr,"NeonClient");var tn=tr;function Qc(e,r){let n,o;return r?{callback:r,result:void 0}:{callback:a(function(e,r){e?n(e):o(r)},"cb"),result:new e(function(e,r){o=e,n=r})}}a(Qc,"promisify");var ts=class extends e5.Pool{constructor(){super(...arguments),T(this,"Client",tn),T(this,"hasFetchUnsupportedListeners",!1)}on(e,r){return"error"!==e&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,n){if(!eB.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof e)return super.query(e,r,n);"function"==typeof r&&(n=r,r=void 0);let o=Qc(this.Promise,n);n=o.callback;try{let o=new te.default(this.options),l=encodeURIComponent,h=encodeURI,u=`postgresql://${l(o.user)}:${l(o.password)}@${l(o.host)}/${h(o.database)}`,p="string"==typeof e?e:e.text,d=r??e.values??[];xn(u,{fullResults:!0,arrayMode:"array"===e.rowMode})(p,d).then(e=>n(void 0,e)).catch(e=>n(e))}catch(e){n(e)}return o.result}};a(ts,"NeonPool");var to=ts;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/},72901:e=>{e.exports={mask:(e,r,n,o,l)=>{for(var h=0;h<l;h++)n[o+h]=e[h]^r[3&h]},unmask:(e,r)=>{let n=e.length;for(var o=0;o<n;o++)e[o]^=r[3&o]}}},93754:(e,r,n)=>{try{e.exports=n(13146)(__dirname)}catch(r){e.exports=n(72901)}},30989:e=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,h={};function stringifyCookie(e){var r;let n=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(r=e.value)?r:"")}; ${n.join("; ")}`}function parseCookie(e){let r=new Map;for(let n of e.split(/; */)){if(!n)continue;let e=n.indexOf("=");if(-1===e){r.set(n,"true");continue}let[o,l]=[n.slice(0,e),n.slice(e+1)];try{r.set(o,decodeURIComponent(null!=l?l:"true"))}catch{}}return r}function parseSetCookie(e){if(!e)return;let[[r,n],...o]=parseCookie(e),{domain:l,expires:h,httponly:u,maxage:p,path:d,samesite:y,secure:m,priority:g}=Object.fromEntries(o.map(([e,r])=>[e.toLowerCase(),r])),_={name:r,value:decodeURIComponent(n),domain:l,...h&&{expires:new Date(h)},...u&&{httpOnly:!0},..."string"==typeof p&&{maxAge:Number(p)},path:d,...y&&{sameSite:parseSameSite(y)},...m&&{secure:!0},...g&&{priority:parsePriority(g)}};return compact(_)}function compact(e){let r={};for(let n in e)e[n]&&(r[n]=e[n]);return r}((e,n)=>{for(var o in n)r(e,o,{get:n[o],enumerable:!0})})(h,{RequestCookies:()=>d,ResponseCookies:()=>y,parseCookie:()=>parseCookie,parseSetCookie:()=>parseSetCookie,stringifyCookie:()=>stringifyCookie}),e.exports=((e,h,u,p)=>{if(h&&"object"==typeof h||"function"==typeof h)for(let u of o(h))l.call(e,u)||void 0===u||r(e,u,{get:()=>h[u],enumerable:!(p=n(h,u))||p.enumerable});return e})(r({},"__esModule",{value:!0}),h);var u=["strict","lax","none"];function parseSameSite(e){return e=e.toLowerCase(),u.includes(e)?e:void 0}var p=["low","medium","high"];function parsePriority(e){return e=e.toLowerCase(),p.includes(e)?e:void 0}function splitCookiesString(e){if(!e)return[];var r,n,o,l,h,u=[],p=0;function skipWhitespace(){for(;p<e.length&&/\s/.test(e.charAt(p));)p+=1;return p<e.length}function notSpecialChar(){return"="!==(n=e.charAt(p))&&";"!==n&&","!==n}for(;p<e.length;){for(r=p,h=!1;skipWhitespace();)if(","===(n=e.charAt(p))){for(o=p,p+=1,skipWhitespace(),l=p;p<e.length&&notSpecialChar();)p+=1;p<e.length&&"="===e.charAt(p)?(h=!0,p=l,u.push(e.substring(r,o)),r=p):p=o+1}else p+=1;(!h||p>=e.length)&&u.push(e.substring(r,e.length))}return u}var d=class{constructor(e){this._parsed=new Map,this._headers=e;let r=e.get("cookie");if(r){let e=parseCookie(r);for(let[r,n]of e)this._parsed.set(r,{name:r,value:n})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let r="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(r)}getAll(...e){var r;let n=Array.from(this._parsed);if(!e.length)return n.map(([e,r])=>r);let o="string"==typeof e[0]?e[0]:null==(r=e[0])?void 0:r.name;return n.filter(([e])=>e===o).map(([e,r])=>r)}has(e){return this._parsed.has(e)}set(...e){let[r,n]=1===e.length?[e[0].name,e[0].value]:e,o=this._parsed;return o.set(r,{name:r,value:n}),this._headers.set("cookie",Array.from(o).map(([e,r])=>stringifyCookie(r)).join("; ")),this}delete(e){let r=this._parsed,n=Array.isArray(e)?e.map(e=>r.delete(e)):r.delete(e);return this._headers.set("cookie",Array.from(r).map(([e,r])=>stringifyCookie(r)).join("; ")),n}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},y=class{constructor(e){var r,n,o;this._parsed=new Map,this._headers=e;let l=null!=(o=null!=(n=null==(r=e.getSetCookie)?void 0:r.call(e))?n:e.get("set-cookie"))?o:[],h=Array.isArray(l)?l:splitCookiesString(l);for(let e of h){let r=parseSetCookie(e);r&&this._parsed.set(r.name,r)}}get(...e){let r="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(r)}getAll(...e){var r;let n=Array.from(this._parsed.values());if(!e.length)return n;let o="string"==typeof e[0]?e[0]:null==(r=e[0])?void 0:r.name;return n.filter(e=>e.name===o)}has(e){return this._parsed.has(e)}set(...e){let[r,n,o]=1===e.length?[e[0].name,e[0].value,e[0]]:e,l=this._parsed;return l.set(r,normalizeCookie({name:r,value:n,...o})),replace(l,this._headers),this}delete(...e){let[r,n,o]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:r,path:n,domain:o,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(stringifyCookie).join("; ")}};function replace(e,r){for(let[,n]of(r.delete("set-cookie"),e)){let e=stringifyCookie(n);r.append("set-cookie",e)}}function normalizeCookie(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}},10884:(e,r,n)=>{e.exports=n(30517)},76449:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var n in r)Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}(r,{RequestCookies:function(){return o.RequestCookies},ResponseCookies:function(){return o.ResponseCookies}});let o=n(30989)},13146:(e,r,n)=>{let o=require;"function"==typeof o.addon?e.exports=o.addon.bind(o):e.exports=n(46119)},46119:(e,r,n)=>{var o=n(57147),l=n(71017),h=n(22037),u=require,p=process.config&&process.config.variables||{},d=!!process.env.PREBUILDS_ONLY,y=process.versions.modules,m=isElectron()?"electron":isNwjs()?"node-webkit":"node",g=process.env.npm_config_arch||h.arch(),_=process.env.npm_config_platform||h.platform(),b=process.env.LIBC||(isAlpine(_)?"musl":"glibc"),v=process.env.ARM_VERSION||("arm64"===g?"8":p.arm_version)||"",S=(process.versions.uv||"").split(".")[0];function load(e){return u(load.resolve(e))}function readdirSync(e){try{return o.readdirSync(e)}catch(e){return[]}}function getFirst(e,r){var n=readdirSync(e).filter(r);return n[0]&&l.join(e,n[0])}function matchBuild(e){return/\.node$/.test(e)}function parseTuple(e){var r=e.split("-");if(2===r.length){var n=r[0],o=r[1].split("+");if(n&&o.length&&o.every(Boolean))return{name:e,platform:n,architectures:o}}}function matchTuple(e,r){return function(n){return null!=n&&n.platform===e&&n.architectures.includes(r)}}function compareTuples(e,r){return e.architectures.length-r.architectures.length}function parseTags(e){var r=e.split("."),n=r.pop(),o={file:e,specificity:0};if("node"===n){for(var l=0;l<r.length;l++){var h=r[l];if("node"===h||"electron"===h||"node-webkit"===h)o.runtime=h;else if("napi"===h)o.napi=!0;else if("abi"===h.slice(0,3))o.abi=h.slice(3);else if("uv"===h.slice(0,2))o.uv=h.slice(2);else if("armv"===h.slice(0,4))o.armv=h.slice(4);else{if("glibc"!==h&&"musl"!==h)continue;o.libc=h}o.specificity++}return o}}function matchTags(e,r){return function(n){return null!=n&&(!n.runtime||n.runtime===e||!!runtimeAgnostic(n))&&(!n.abi||n.abi===r||!!n.napi)&&(!n.uv||n.uv===S)&&(!n.armv||n.armv===v)&&(!n.libc||n.libc===b)}}function runtimeAgnostic(e){return"node"===e.runtime&&e.napi}function compareTags(e){return function(r,n){return r.runtime!==n.runtime?r.runtime===e?-1:1:r.abi!==n.abi?r.abi?-1:1:r.specificity!==n.specificity?r.specificity>n.specificity?-1:1:0}}function isNwjs(){return!!(process.versions&&process.versions.nw)}function isElectron(){return!!process.versions&&!!process.versions.electron||!!process.env.ELECTRON_RUN_AS_NODE}function isAlpine(e){return"linux"===e&&o.existsSync("/etc/alpine-release")}e.exports=load,load.resolve=load.path=function(e){e=l.resolve(e||".");try{var r=u(l.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[r+"_PREBUILD"]&&(e=process.env[r+"_PREBUILD"])}catch(e){}if(!d){var n=getFirst(l.join(e,"build/Release"),matchBuild);if(n)return n;var o=getFirst(l.join(e,"build/Debug"),matchBuild);if(o)return o}var h=resolve(e);if(h)return h;var p=resolve(l.dirname(process.execPath));if(p)return p;throw Error("No native build was found for "+["platform="+_,"arch="+g,"runtime="+m,"abi="+y,"uv="+S,v?"armv="+v:"","libc="+b,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ")+"\n    loaded from: "+e+"\n");function resolve(e){var r=readdirSync(l.join(e,"prebuilds")).map(parseTuple).filter(matchTuple(_,g)).sort(compareTuples)[0];if(r){var n=l.join(e,"prebuilds",r.name),o=readdirSync(n).map(parseTags).filter(matchTags(m,y)).sort(compareTags(m))[0];if(o)return l.join(n,o.file)}}},load.parseTags=parseTags,load.matchTags=matchTags,load.compareTags=compareTags,load.parseTuple=parseTuple,load.matchTuple=matchTuple,load.compareTuples=compareTuples},20288:e=>{function isValidUTF8(e){let r=e.length,n=0;for(;n<r;)if((128&e[n])==0)n++;else if((224&e[n])==192){if(n+1===r||(192&e[n+1])!=128||(254&e[n])==192)return!1;n+=2}else if((240&e[n])==224){if(n+2>=r||(192&e[n+1])!=128||(192&e[n+2])!=128||224===e[n]&&(224&e[n+1])==128||237===e[n]&&(224&e[n+1])==160)return!1;n+=3}else{if((248&e[n])!=240||n+3>=r||(192&e[n+1])!=128||(192&e[n+2])!=128||(192&e[n+3])!=128||240===e[n]&&(240&e[n+1])==128||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}e.exports=isValidUTF8},16876:(e,r,n)=>{try{e.exports=n(13146)(__dirname)}catch(r){e.exports=n(20288)}},72846:(e,r,n)=>{let{EMPTY_BUFFER:o}=n(8234),l=Buffer[Symbol.species];function concat(e,r){if(0===e.length)return o;if(1===e.length)return e[0];let n=Buffer.allocUnsafe(r),h=0;for(let r=0;r<e.length;r++){let o=e[r];n.set(o,h),h+=o.length}return h<r?new l(n.buffer,n.byteOffset,h):n}function _mask(e,r,n,o,l){for(let h=0;h<l;h++)n[o+h]=e[h]^r[3&h]}function _unmask(e,r){for(let n=0;n<e.length;n++)e[n]^=r[3&n]}function toArrayBuffer(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)}function toBuffer(e){let r;return(toBuffer.readOnly=!0,Buffer.isBuffer(e))?e:(e instanceof ArrayBuffer?r=new l(e):ArrayBuffer.isView(e)?r=new l(e.buffer,e.byteOffset,e.byteLength):(r=Buffer.from(e),toBuffer.readOnly=!1),r)}if(e.exports={concat,mask:_mask,toArrayBuffer,toBuffer,unmask:_unmask},!process.env.WS_NO_BUFFER_UTIL)try{let r=n(93754);e.exports.mask=function(e,n,o,l,h){h<48?_mask(e,n,o,l,h):r.mask(e,n,o,l,h)},e.exports.unmask=function(e,n){e.length<32?_unmask(e,n):r.unmask(e,n)}}catch(e){}},8234:e=>{e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},82060:(e,r,n)=>{let{kForOnEventAttribute:o,kListener:l}=n(8234),h=Symbol("kCode"),u=Symbol("kData"),p=Symbol("kError"),d=Symbol("kMessage"),y=Symbol("kReason"),m=Symbol("kTarget"),g=Symbol("kType"),_=Symbol("kWasClean");let Event=class Event{constructor(e){this[m]=null,this[g]=e}get target(){return this[m]}get type(){return this[g]}};Object.defineProperty(Event.prototype,"target",{enumerable:!0}),Object.defineProperty(Event.prototype,"type",{enumerable:!0});let CloseEvent=class CloseEvent extends Event{constructor(e,r={}){super(e),this[h]=void 0===r.code?0:r.code,this[y]=void 0===r.reason?"":r.reason,this[_]=void 0!==r.wasClean&&r.wasClean}get code(){return this[h]}get reason(){return this[y]}get wasClean(){return this[_]}};Object.defineProperty(CloseEvent.prototype,"code",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"reason",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"wasClean",{enumerable:!0});let ErrorEvent=class ErrorEvent extends Event{constructor(e,r={}){super(e),this[p]=void 0===r.error?null:r.error,this[d]=void 0===r.message?"":r.message}get error(){return this[p]}get message(){return this[d]}};Object.defineProperty(ErrorEvent.prototype,"error",{enumerable:!0}),Object.defineProperty(ErrorEvent.prototype,"message",{enumerable:!0});let MessageEvent=class MessageEvent extends Event{constructor(e,r={}){super(e),this[u]=void 0===r.data?null:r.data}get data(){return this[u]}};function callListener(e,r,n){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,n):e.call(r,n)}Object.defineProperty(MessageEvent.prototype,"data",{enumerable:!0}),e.exports={CloseEvent,ErrorEvent,Event,EventTarget:{addEventListener(e,r,n={}){let h;for(let h of this.listeners(e))if(!n[o]&&h[l]===r&&!h[o])return;if("message"===e)h=function(e,n){let o=new MessageEvent("message",{data:n?e:e.toString()});o[m]=this,callListener(r,this,o)};else if("close"===e)h=function(e,n){let o=new CloseEvent("close",{code:e,reason:n.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});o[m]=this,callListener(r,this,o)};else if("error"===e)h=function(e){let n=new ErrorEvent("error",{error:e,message:e.message});n[m]=this,callListener(r,this,n)};else{if("open"!==e)return;h=function(){let e=new Event("open");e[m]=this,callListener(r,this,e)}}h[o]=!!n[o],h[l]=r,n.once?this.once(e,h):this.on(e,h)},removeEventListener(e,r){for(let n of this.listeners(e))if(n[l]===r&&!n[o]){this.removeListener(e,n);break}}},MessageEvent}},57750:(e,r,n)=>{let{tokenChars:o}=n(80216);function push(e,r,n){void 0===e[r]?e[r]=[n]:e[r].push(n)}function parse(e){let r,n;let l=Object.create(null),h=Object.create(null),u=!1,p=!1,d=!1,y=-1,m=-1,g=-1,_=0;for(;_<e.length;_++)if(m=e.charCodeAt(_),void 0===r){if(-1===g&&1===o[m])-1===y&&(y=_);else if(0!==_&&(32===m||9===m))-1===g&&-1!==y&&(g=_);else if(59===m||44===m){if(-1===y)throw SyntaxError(`Unexpected character at index ${_}`);-1===g&&(g=_);let n=e.slice(y,g);44===m?(push(l,n,h),h=Object.create(null)):r=n,y=g=-1}else throw SyntaxError(`Unexpected character at index ${_}`)}else if(void 0===n){if(-1===g&&1===o[m])-1===y&&(y=_);else if(32===m||9===m)-1===g&&-1!==y&&(g=_);else if(59===m||44===m){if(-1===y)throw SyntaxError(`Unexpected character at index ${_}`);-1===g&&(g=_),push(h,e.slice(y,g),!0),44===m&&(push(l,r,h),h=Object.create(null),r=void 0),y=g=-1}else if(61===m&&-1!==y&&-1===g)n=e.slice(y,_),y=g=-1;else throw SyntaxError(`Unexpected character at index ${_}`)}else if(p){if(1!==o[m])throw SyntaxError(`Unexpected character at index ${_}`);-1===y?y=_:u||(u=!0),p=!1}else if(d){if(1===o[m])-1===y&&(y=_);else if(34===m&&-1!==y)d=!1,g=_;else if(92===m)p=!0;else throw SyntaxError(`Unexpected character at index ${_}`)}else if(34===m&&61===e.charCodeAt(_-1))d=!0;else if(-1===g&&1===o[m])-1===y&&(y=_);else if(-1!==y&&(32===m||9===m))-1===g&&(g=_);else if(59===m||44===m){if(-1===y)throw SyntaxError(`Unexpected character at index ${_}`);-1===g&&(g=_);let o=e.slice(y,g);u&&(o=o.replace(/\\/g,""),u=!1),push(h,n,o),44===m&&(push(l,r,h),h=Object.create(null),r=void 0),n=void 0,y=g=-1}else throw SyntaxError(`Unexpected character at index ${_}`);if(-1===y||d||32===m||9===m)throw SyntaxError("Unexpected end of input");-1===g&&(g=_);let b=e.slice(y,g);return void 0===r?push(l,b,h):(void 0===n?push(h,b,!0):u?push(h,n,b.replace(/\\/g,"")):push(h,n,b),push(l,r,h)),l}function format(e){return Object.keys(e).map(r=>{let n=e[r];return Array.isArray(n)||(n=[n]),n.map(e=>[r].concat(Object.keys(e).map(r=>{let n=e[r];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?r:`${r}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")}e.exports={format,parse}},4444:e=>{let r=Symbol("kDone"),n=Symbol("kRun");let Limiter=class Limiter{constructor(e){this[r]=()=>{this.pending--,this[n]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[n]()}[n](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[r])}}};e.exports=Limiter},28515:(e,r,n)=>{let o;let l=n(59796),h=n(72846),u=n(4444),{kStatusCode:p}=n(8234),d=Buffer[Symbol.species],y=Buffer.from([0,0,255,255]),m=Symbol("permessage-deflate"),g=Symbol("total-length"),_=Symbol("callback"),b=Symbol("buffers"),v=Symbol("error");let PerMessageDeflate=class PerMessageDeflate{constructor(e,r,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!o){let e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;o=new u(e)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[_];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(e=>(!1!==r.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==r.serverMaxWindowBits&&("number"!=typeof r.serverMaxWindowBits||!(r.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof r.clientMaxWindowBits||!!e.client_max_window_bits));if(!n)throw Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof r.serverMaxWindowBits&&(n.server_max_window_bits=r.serverMaxWindowBits),"number"==typeof r.clientMaxWindowBits?n.client_max_window_bits=r.clientMaxWindowBits:(!0===n.client_max_window_bits||!1===r.clientMaxWindowBits)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(!1===this._options.clientNoContextTakeover&&r.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(r.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(r.client_max_window_bits=this._options.clientMaxWindowBits);return r}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(r=>{let n=e[r];if(n.length>1)throw Error(`Parameter "${r}" must have only a single value`);if(n=n[0],"client_max_window_bits"===r){if(!0!==n){let e=+n;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${r}": ${n}`);n=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${r}": ${n}`)}else if("server_max_window_bits"===r){let e=+n;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${r}": ${n}`);n=e}else if("client_no_context_takeover"===r||"server_no_context_takeover"===r){if(!0!==n)throw TypeError(`Invalid value for parameter "${r}": ${n}`)}else throw Error(`Unknown parameter "${r}"`);e[r]=n})}),e}decompress(e,r,n){o.add(o=>{this._decompress(e,r,(e,r)=>{o(),n(e,r)})})}compress(e,r,n){o.add(o=>{this._compress(e,r,(e,r)=>{o(),n(e,r)})})}_decompress(e,r,n){let o=this._isServer?"client":"server";if(!this._inflate){let e=`${o}_max_window_bits`,r="number"!=typeof this.params[e]?l.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=l.createInflateRaw({...this._options.zlibInflateOptions,windowBits:r}),this._inflate[m]=this,this._inflate[g]=0,this._inflate[b]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[_]=n,this._inflate.write(e),r&&this._inflate.write(y),this._inflate.flush(()=>{let e=this._inflate[v];if(e){this._inflate.close(),this._inflate=null,n(e);return}let l=h.concat(this._inflate[b],this._inflate[g]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[g]=0,this._inflate[b]=[],r&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),n(null,l)})}_compress(e,r,n){let o=this._isServer?"server":"client";if(!this._deflate){let e=`${o}_max_window_bits`,r="number"!=typeof this.params[e]?l.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=l.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:r}),this._deflate[g]=0,this._deflate[b]=[],this._deflate.on("data",deflateOnData)}this._deflate[_]=n,this._deflate.write(e),this._deflate.flush(l.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=h.concat(this._deflate[b],this._deflate[g]);r&&(e=new d(e.buffer,e.byteOffset,e.length-4)),this._deflate[_]=null,this._deflate[g]=0,this._deflate[b]=[],r&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),n(null,e)})}};function deflateOnData(e){this[b].push(e),this[g]+=e.length}function inflateOnData(e){if(this[g]+=e.length,this[m]._maxPayload<1||this[g]<=this[m]._maxPayload){this[b].push(e);return}this[v]=RangeError("Max payload size exceeded"),this[v].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[v][p]=1009,this.removeListener("data",inflateOnData),this.reset()}function inflateOnError(e){this[m]._inflate=null,e[p]=1007,this[_](e)}e.exports=PerMessageDeflate},95775:(e,r,n)=>{let{Writable:o}=n(12781),l=n(28515),{BINARY_TYPES:h,EMPTY_BUFFER:u,kStatusCode:p,kWebSocket:d}=n(8234),{concat:y,toArrayBuffer:m,unmask:g}=n(72846),{isValidStatusCode:_,isValidUTF8:b}=n(80216),v=Buffer[Symbol.species],S=Promise.resolve(),w="function"==typeof queueMicrotask?queueMicrotask:queueMicrotaskShim;let Receiver=class Receiver extends o{constructor(e={}){super(),this._binaryType=e.binaryType||h[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[d]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,r,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let r=this._buffers[0];return this._buffers[0]=new v(r.buffer,r.byteOffset+e,r.length-e),new v(r.buffer,r.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],o=r.length-e;e>=n.length?r.set(this._buffers.shift(),o):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),o),this._buffers[0]=new v(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){let r;this._loop=!0;do switch(this._state){case 0:r=this.getInfo();break;case 1:r=this.getPayloadLength16();break;case 2:r=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:r=this.getData(e);break;case 5:this._loop=!1;return;default:this._loop=!1,w(()=>{this._state=0,this.startLoop(e)});return}while(this._loop);e(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((48&e[0])!=0)return this._loop=!1,error(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let r=(64&e[0])==64;if(r&&!this._extensions[l.extensionName])return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(128&e[0])==128,this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(r)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,error(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else{if(!(this._opcode>7)||!(this._opcode<11))return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,error(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return this._loop=!1,error(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&e[1])==128,this._isServer){if(!this._masked)return this._loop=!1,error(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,error(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),r=e.readUInt32BE(0);return r>2097151?(this._loop=!1,error(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=4294967296*r+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,error(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let r=u;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&g(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=5,this.decompress(r,e);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(e,r){let n=this._extensions[l.extensionName];n.decompress(e,this._fin,(e,n)=>{if(e)return r(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(error(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(n)}let o=this.dataMessage();if(o)return r(o);this.startLoop(r)})}dataMessage(){if(this._fin){let e=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?y(r,e):"arraybuffer"===this._binaryType?m(y(r,e)):r,this.emit("message",n,!0)}else{let n=y(r,e);if(!this._skipUTF8Validation&&!b(n))return this._loop=!1,error(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=6}controlMessage(e){if(8===this._opcode){if(this._loop=!1,0===e.length)this.emit("conclude",1005,u),this.end(),this._state=0;else{let r=e.readUInt16BE(0);if(!_(r))return error(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let n=new v(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!b(n))return error(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,n),this.end(),this._state=0}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e),this._state=6}};function error(e,r,n,o,l){let h=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(h,error),h.code=l,h[p]=o,h}function queueMicrotaskShim(e){S.then(e).catch(throwErrorNextTick)}function throwError(e){throw e}function throwErrorNextTick(e){process.nextTick(throwError,e)}e.exports=Receiver},49229:(e,r,n)=>{let{Duplex:o}=n(12781),{randomFillSync:l}=n(6113),h=n(28515),{EMPTY_BUFFER:u}=n(8234),{isValidStatusCode:p}=n(80216),{mask:d,toBuffer:y}=n(72846),m=Symbol("kByteLength"),g=Buffer.alloc(4);let Sender=class Sender{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,r){let n,o;let h=!1,u=2,p=!1;r.mask&&(n=r.maskBuffer||g,r.generateMask?r.generateMask(n):l(n,0,4),p=(n[0]|n[1]|n[2]|n[3])==0,u=6),"string"==typeof e?o=(!r.mask||p)&&void 0!==r[m]?r[m]:(e=Buffer.from(e)).length:(o=e.length,h=r.mask&&r.readOnly&&!p);let y=o;o>=65536?(u+=8,y=127):o>125&&(u+=2,y=126);let _=Buffer.allocUnsafe(h?o+u:u);return(_[0]=r.fin?128|r.opcode:r.opcode,r.rsv1&&(_[0]|=64),_[1]=y,126===y?_.writeUInt16BE(o,2):127===y&&(_[2]=_[3]=0,_.writeUIntBE(o,4,6)),r.mask)?(_[1]|=128,_[u-4]=n[0],_[u-3]=n[1],_[u-2]=n[2],_[u-1]=n[3],p)?[_,e]:h?(d(e,n,_,u,o),[_]):(d(e,n,e,0,o),[_,e]):[_,e]}close(e,r,n,o){let l;if(void 0===e)l=u;else if("number"==typeof e&&p(e)){if(void 0!==r&&r.length){let n=Buffer.byteLength(r);if(n>123)throw RangeError("The message must not be greater than 123 bytes");(l=Buffer.allocUnsafe(2+n)).writeUInt16BE(e,0),"string"==typeof r?l.write(r,2):l.set(r,2)}else(l=Buffer.allocUnsafe(2)).writeUInt16BE(e,0)}else throw TypeError("First argument must be a valid error code number");let h={[m]:l.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,l,!1,h,o]):this.sendFrame(Sender.frame(l,h),o)}ping(e,r,n){let o,l;if("string"==typeof e?(o=Buffer.byteLength(e),l=!1):(o=(e=y(e)).length,l=y.readOnly),o>125)throw RangeError("The data size must not be greater than 125 bytes");let h={[m]:o,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:l,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,h,n]):this.sendFrame(Sender.frame(e,h),n)}pong(e,r,n){let o,l;if("string"==typeof e?(o=Buffer.byteLength(e),l=!1):(o=(e=y(e)).length,l=y.readOnly),o>125)throw RangeError("The data size must not be greater than 125 bytes");let h={[m]:o,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:l,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,h,n]):this.sendFrame(Sender.frame(e,h),n)}send(e,r,n){let o,l;let u=this._extensions[h.extensionName],p=r.binary?2:1,d=r.compress;if("string"==typeof e?(o=Buffer.byteLength(e),l=!1):(o=(e=y(e)).length,l=y.readOnly),this._firstFragment?(this._firstFragment=!1,d&&u&&u.params[u._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(d=o>=u._threshold),this._compress=d):(d=!1,p=0),r.fin&&(this._firstFragment=!0),u){let h={[m]:o,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:p,readOnly:l,rsv1:d};this._deflating?this.enqueue([this.dispatch,e,this._compress,h,n]):this.dispatch(e,this._compress,h,n)}else this.sendFrame(Sender.frame(e,{[m]:o,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:p,readOnly:l,rsv1:!1}),n)}dispatch(e,r,n,o){if(!r){this.sendFrame(Sender.frame(e,n),o);return}let l=this._extensions[h.extensionName];this._bufferedBytes+=n[m],this._deflating=!0,l.compress(e,n.fin,(e,r)=>{if(this._socket.destroyed){let e=Error("The socket was closed while data was being compressed");"function"==typeof o&&o(e);for(let r=0;r<this._queue.length;r++){let n=this._queue[r],o=n[n.length-1];"function"==typeof o&&o(e)}return}this._bufferedBytes-=n[m],this._deflating=!1,n.readOnly=!1,this.sendFrame(Sender.frame(r,n),o),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][m],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][m],this._queue.push(e)}sendFrame(e,r){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};e.exports=Sender},10199:(e,r,n)=>{let{Duplex:o}=n(12781);function emitClose(e){e.emit("close")}function duplexOnEnd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function duplexOnError(e){this.removeListener("error",duplexOnError),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}function createWebSocketStream(e,r){let n=!0,l=new o({...r,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(r,n){let o=!n&&l._readableState.objectMode?r.toString():r;l.push(o)||e.pause()}),e.once("error",function(e){l.destroyed||(n=!1,l.destroy(e))}),e.once("close",function(){l.destroyed||l.push(null)}),l._destroy=function(r,o){if(e.readyState===e.CLOSED){o(r),process.nextTick(emitClose,l);return}let h=!1;e.once("error",function(e){h=!0,o(e)}),e.once("close",function(){h||o(r),process.nextTick(emitClose,l)}),n&&e.terminate()},l._final=function(r){if(e.readyState===e.CONNECTING){e.once("open",function(){l._final(r)});return}null!==e._socket&&(e._socket._writableState.finished?(r(),l._readableState.endEmitted&&l.destroy()):(e._socket.once("finish",function(){r()}),e.close()))},l._read=function(){e.isPaused&&e.resume()},l._write=function(r,n,o){if(e.readyState===e.CONNECTING){e.once("open",function(){l._write(r,n,o)});return}e.send(r,o)},l.on("end",duplexOnEnd),l.on("error",duplexOnError),l}e.exports=createWebSocketStream},15218:(e,r,n)=>{let{tokenChars:o}=n(80216);function parse(e){let r=new Set,n=-1,l=-1,h=0;for(;h<e.length;h++){let u=e.charCodeAt(h);if(-1===l&&1===o[u])-1===n&&(n=h);else if(0!==h&&(32===u||9===u))-1===l&&-1!==n&&(l=h);else if(44===u){if(-1===n)throw SyntaxError(`Unexpected character at index ${h}`);-1===l&&(l=h);let o=e.slice(n,l);if(r.has(o))throw SyntaxError(`The "${o}" subprotocol is duplicated`);r.add(o),n=l=-1}else throw SyntaxError(`Unexpected character at index ${h}`)}if(-1===n||-1!==l)throw SyntaxError("Unexpected end of input");let u=e.slice(n,h);if(r.has(u))throw SyntaxError(`The "${u}" subprotocol is duplicated`);return r.add(u),r}e.exports={parse}},80216:(e,r,n)=>{let{isUtf8:o}=n(14300);function isValidStatusCode(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function _isValidUTF8(e){let r=e.length,n=0;for(;n<r;)if((128&e[n])==0)n++;else if((224&e[n])==192){if(n+1===r||(192&e[n+1])!=128||(254&e[n])==192)return!1;n+=2}else if((240&e[n])==224){if(n+2>=r||(192&e[n+1])!=128||(192&e[n+2])!=128||224===e[n]&&(224&e[n+1])==128||237===e[n]&&(224&e[n+1])==160)return!1;n+=3}else{if((248&e[n])!=240||n+3>=r||(192&e[n+1])!=128||(192&e[n+2])!=128||(192&e[n+3])!=128||240===e[n]&&(240&e[n+1])==128||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}if(e.exports={isValidStatusCode,isValidUTF8:_isValidUTF8,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},o)e.exports.isValidUTF8=function(e){return e.length<24?_isValidUTF8(e):o(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=n(16876);e.exports.isValidUTF8=function(e){return e.length<32?_isValidUTF8(e):r(e)}}catch(e){}},59765:(e,r,n)=>{let o=n(82361),l=n(13685),{Duplex:h}=n(12781),{createHash:u}=n(6113),p=n(57750),d=n(28515),y=n(15218),m=n(99313),{GUID:g,kWebSocket:_}=n(8234),b=/^[+/0-9A-Za-z]{22}==$/;let WebSocketServer=class WebSocketServer extends o{constructor(e,r){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:m,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=l.createServer((e,r)=>{let n=l.STATUS_CODES[426];r.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),r.end(n)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let e=this.emit.bind(this,"connection");this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(r,n,o)=>{this.handleUpgrade(r,n,o,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(emitClose,this);return}if(e&&this.once("close",e),1!==this._state){if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(emitClose,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{emitClose(this)})}}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?"),n=-1!==r?e.url.slice(0,r):e.url;if(n!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,o){r.on("error",socketOnError);let l=e.headers["sec-websocket-key"],h=+e.headers["sec-websocket-version"];if("GET"!==e.method){abortHandshakeOrEmitwsClientError(this,e,r,405,"Invalid HTTP method");return}if("websocket"!==e.headers.upgrade.toLowerCase()){abortHandshakeOrEmitwsClientError(this,e,r,400,"Invalid Upgrade header");return}if(!l||!b.test(l)){abortHandshakeOrEmitwsClientError(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(8!==h&&13!==h){abortHandshakeOrEmitwsClientError(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){abortHandshake(r,400);return}let u=e.headers["sec-websocket-protocol"],m=new Set;if(void 0!==u)try{m=y.parse(u)}catch(n){abortHandshakeOrEmitwsClientError(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let g=e.headers["sec-websocket-extensions"],_={};if(this.options.perMessageDeflate&&void 0!==g){let n=new d(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=p.parse(g);e[d.extensionName]&&(n.accept(e[d.extensionName]),_[d.extensionName]=n)}catch(n){abortHandshakeOrEmitwsClientError(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let u={origin:e.headers[`${8===h?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length){this.options.verifyClient(u,(h,u,p,d)=>{if(!h)return abortHandshake(r,u||401,p,d);this.completeUpgrade(_,l,m,e,r,n,o)});return}if(!this.options.verifyClient(u))return abortHandshake(r,401)}this.completeUpgrade(_,l,m,e,r,n,o)}completeUpgrade(e,r,n,o,l,h,y){if(!l.readable||!l.writable)return l.destroy();if(l[_])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return abortHandshake(l,503);let m=u("sha1").update(r+g).digest("base64"),b=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${m}`],v=new this.options.WebSocket(null);if(n.size){let e=this.options.handleProtocols?this.options.handleProtocols(n,o):n.values().next().value;e&&(b.push(`Sec-WebSocket-Protocol: ${e}`),v._protocol=e)}if(e[d.extensionName]){let r=e[d.extensionName].params,n=p.format({[d.extensionName]:[r]});b.push(`Sec-WebSocket-Extensions: ${n}`),v._extensions=e}this.emit("headers",b,o),l.write(b.concat("\r\n").join("\r\n")),l.removeListener("error",socketOnError),v.setSocket(l,h,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(v),v.on("close",()=>{this.clients.delete(v),this._shouldEmitClose&&!this.clients.size&&process.nextTick(emitClose,this)})),y(v,o)}};function addListeners(e,r){for(let n of Object.keys(r))e.on(n,r[n]);return function(){for(let n of Object.keys(r))e.removeListener(n,r[n])}}function emitClose(e){e._state=2,e.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(e,r,n,o){n=n||l.STATUS_CODES[r],o={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...o},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${r} ${l.STATUS_CODES[r]}\r
`+Object.keys(o).map(e=>`${e}: ${o[e]}`).join("\r\n")+"\r\n\r\n"+n)}function abortHandshakeOrEmitwsClientError(e,r,n,o,l){if(e.listenerCount("wsClientError")){let o=Error(l);Error.captureStackTrace(o,abortHandshakeOrEmitwsClientError),e.emit("wsClientError",o,n,r)}else abortHandshake(n,o,l)}e.exports=WebSocketServer},99313:(e,r,n)=>{let o=n(82361),l=n(95687),h=n(13685),u=n(41808),p=n(24404),{randomBytes:d,createHash:y}=n(6113),{Duplex:m,Readable:g}=n(12781),{URL:_}=n(57310),b=n(28515),v=n(95775),S=n(49229),{BINARY_TYPES:w,EMPTY_BUFFER:E,GUID:C,kForOnEventAttribute:A,kListener:L,kStatusCode:P,kWebSocket:R,NOOP:M}=n(8234),{EventTarget:{addEventListener:N,removeEventListener:D}}=n(82060),{format:F,parse:W}=n(57750),{toBuffer:q}=n(72846),Q=Symbol("kAborted"),$=[8,13],G=["CONNECTING","OPEN","CLOSING","CLOSED"],H=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;let WebSocket=class WebSocket extends o{constructor(e,r,n){super(),this._binaryType=w[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=E,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=WebSocket.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===r?r=[]:Array.isArray(r)||("object"==typeof r&&null!==r?(n=r,r=[]):r=[r]),initAsClient(this,e,r,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){w.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let o=new v({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new S(e,this._extensions,n.generateMask),this._receiver=o,this._socket=e,o[R]=this,e[R]=this,o.on("conclude",receiverOnConclude),o.on("drain",receiverOnDrain),o.on("error",receiverOnError),o.on("message",receiverOnMessage),o.on("ping",receiverOnPing),o.on("pong",receiverOnPong),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",socketOnClose),e.on("data",socketOnData),e.on("end",socketOnEnd),e.on("error",socketOnError),this._readyState=WebSocket.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[b.extensionName]&&this._extensions[b.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){abortHandshake(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===WebSocket.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=WebSocket.CLOSING,this._sender.close(e,r,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(n=e,e=r=void 0):"function"==typeof r&&(n=r,r=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,n);return}void 0===r&&(r=!this._isServer),this._sender.ping(e||E,r,n)}pong(e,r,n){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(n=e,e=r=void 0):"function"==typeof r&&(n=r,r=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,n);return}void 0===r&&(r=!this._isServer),this._sender.pong(e||E,r,n)}resume(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof r&&(n=r,r={}),"number"==typeof e&&(e=e.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,n);return}let o={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[b.extensionName]||(o.compress=!1),this._sender.send(e||E,o,n)}terminate(){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){abortHandshake(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=WebSocket.CLOSING,this._socket.destroy())}}};function initAsClient(e,r,n,o){let u,p,m,g;let v={protocolVersion:$[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!$.includes(v.protocolVersion))throw RangeError(`Unsupported protocol version: ${v.protocolVersion} (supported versions: ${$.join(", ")})`);if(r instanceof _)u=r;else try{u=new _(r)}catch(e){throw SyntaxError(`Invalid URL: ${r}`)}"http:"===u.protocol?u.protocol="ws:":"https:"===u.protocol&&(u.protocol="wss:"),e._url=u.href;let S="wss:"===u.protocol,w="ws+unix:"===u.protocol;if("ws:"===u.protocol||S||w?w&&!u.pathname?p="The URL's pathname is empty":u.hash&&(p="The URL contains a fragment identifier"):p='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',p){let r=SyntaxError(p);if(0===e._redirects)throw r;emitErrorAndClose(e,r);return}let E=S?443:80,A=d(16).toString("base64"),L=S?l.request:h.request,P=new Set;if(v.createConnection=S?tlsConnect:netConnect,v.defaultPort=v.defaultPort||E,v.port=u.port||E,v.host=u.hostname.startsWith("[")?u.hostname.slice(1,-1):u.hostname,v.headers={...v.headers,"Sec-WebSocket-Version":v.protocolVersion,"Sec-WebSocket-Key":A,Connection:"Upgrade",Upgrade:"websocket"},v.path=u.pathname+u.search,v.timeout=v.handshakeTimeout,v.perMessageDeflate&&(m=new b(!0!==v.perMessageDeflate?v.perMessageDeflate:{},!1,v.maxPayload),v.headers["Sec-WebSocket-Extensions"]=F({[b.extensionName]:m.offer()})),n.length){for(let e of n){if("string"!=typeof e||!H.test(e)||P.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");P.add(e)}v.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(v.origin&&(v.protocolVersion<13?v.headers["Sec-WebSocket-Origin"]=v.origin:v.headers.Origin=v.origin),(u.username||u.password)&&(v.auth=`${u.username}:${u.password}`),w){let e=v.path.split(":");v.socketPath=e[0],v.path=e[1]}if(v.followRedirects){if(0===e._redirects){e._originalIpc=w,e._originalSecure=S,e._originalHostOrSocketPath=w?v.socketPath:u.host;let r=o&&o.headers;if(o={...o,headers:{}},r)for(let[e,n]of Object.entries(r))o.headers[e.toLowerCase()]=n}else if(0===e.listenerCount("redirect")){let r=w?!!e._originalIpc&&v.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&u.host===e._originalHostOrSocketPath;r&&(!e._originalSecure||S)||(delete v.headers.authorization,delete v.headers.cookie,r||delete v.headers.host,v.auth=void 0)}v.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(v.auth).toString("base64")),g=e._req=L(v),e._redirects&&e.emit("redirect",e.url,g)}else g=e._req=L(v);v.timeout&&g.on("timeout",()=>{abortHandshake(e,g,"Opening handshake has timed out")}),g.on("error",r=>{null===g||g[Q]||(g=e._req=null,emitErrorAndClose(e,r))}),g.on("response",l=>{let h=l.headers.location,u=l.statusCode;if(h&&v.followRedirects&&u>=300&&u<400){let l;if(++e._redirects>v.maxRedirects){abortHandshake(e,g,"Maximum redirects exceeded");return}g.abort();try{l=new _(h,r)}catch(n){let r=SyntaxError(`Invalid URL: ${h}`);emitErrorAndClose(e,r);return}initAsClient(e,l,n,o)}else e.emit("unexpected-response",g,l)||abortHandshake(e,g,`Unexpected server response: ${l.statusCode}`)}),g.on("upgrade",(r,n,o)=>{let l;if(e.emit("upgrade",r),e.readyState!==WebSocket.CONNECTING)return;if(g=e._req=null,"websocket"!==r.headers.upgrade.toLowerCase()){abortHandshake(e,n,"Invalid Upgrade header");return}let h=y("sha1").update(A+C).digest("base64");if(r.headers["sec-websocket-accept"]!==h){abortHandshake(e,n,"Invalid Sec-WebSocket-Accept header");return}let u=r.headers["sec-websocket-protocol"];if(void 0!==u?P.size?P.has(u)||(l="Server sent an invalid subprotocol"):l="Server sent a subprotocol but none was requested":P.size&&(l="Server sent no subprotocol"),l){abortHandshake(e,n,l);return}u&&(e._protocol=u);let p=r.headers["sec-websocket-extensions"];if(void 0!==p){let r;if(!m){abortHandshake(e,n,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{r=W(p)}catch(r){abortHandshake(e,n,"Invalid Sec-WebSocket-Extensions header");return}let o=Object.keys(r);if(1!==o.length||o[0]!==b.extensionName){abortHandshake(e,n,"Server indicated an extension that was not requested");return}try{m.accept(r[b.extensionName])}catch(r){abortHandshake(e,n,"Invalid Sec-WebSocket-Extensions header");return}e._extensions[b.extensionName]=m}e.setSocket(n,o,{generateMask:v.generateMask,maxPayload:v.maxPayload,skipUTF8Validation:v.skipUTF8Validation})}),v.finishRequest?v.finishRequest(g,e):g.end()}function emitErrorAndClose(e,r){e._readyState=WebSocket.CLOSING,e.emit("error",r),e.emitClose()}function netConnect(e){return e.path=e.socketPath,u.connect(e)}function tlsConnect(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=u.isIP(e.host)?"":e.host),p.connect(e)}function abortHandshake(e,r,n){e._readyState=WebSocket.CLOSING;let o=Error(n);Error.captureStackTrace(o,abortHandshake),r.setHeader?(r[Q]=!0,r.abort(),r.socket&&!r.socket.destroyed&&r.socket.destroy(),process.nextTick(emitErrorAndClose,e,o)):(r.destroy(o),r.once("error",e.emit.bind(e,"error")),r.once("close",e.emitClose.bind(e)))}function sendAfterClose(e,r,n){if(r){let n=q(r).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){let r=Error(`WebSocket is not open: readyState ${e.readyState} (${G[e.readyState]})`);process.nextTick(n,r)}}function receiverOnConclude(e,r){let n=this[R];n._closeFrameReceived=!0,n._closeMessage=r,n._closeCode=e,void 0!==n._socket[R]&&(n._socket.removeListener("data",socketOnData),process.nextTick(resume,n._socket),1005===e?n.close():n.close(e,r))}function receiverOnDrain(){let e=this[R];e.isPaused||e._socket.resume()}function receiverOnError(e){let r=this[R];void 0!==r._socket[R]&&(r._socket.removeListener("data",socketOnData),process.nextTick(resume,r._socket),r.close(e[P])),r.emit("error",e)}function receiverOnFinish(){this[R].emitClose()}function receiverOnMessage(e,r){this[R].emit("message",e,r)}function receiverOnPing(e){let r=this[R];r.pong(e,!r._isServer,M),r.emit("ping",e)}function receiverOnPong(e){this[R].emit("pong",e)}function resume(e){e.resume()}function socketOnClose(){let e;let r=this[R];this.removeListener("close",socketOnClose),this.removeListener("data",socketOnData),this.removeListener("end",socketOnEnd),r._readyState=WebSocket.CLOSING,this._readableState.endEmitted||r._closeFrameReceived||r._receiver._writableState.errorEmitted||null===(e=r._socket.read())||r._receiver.write(e),r._receiver.end(),this[R]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",receiverOnFinish),r._receiver.on("finish",receiverOnFinish))}function socketOnData(e){this[R]._receiver.write(e)||this.pause()}function socketOnEnd(){let e=this[R];e._readyState=WebSocket.CLOSING,e._receiver.end(),this.end()}function socketOnError(){let e=this[R];this.removeListener("error",socketOnError),this.on("error",M),e&&(e._readyState=WebSocket.CLOSING,this.destroy())}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(WebSocket,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(WebSocket,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(WebSocket,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(WebSocket.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{enumerable:!0,get(){for(let r of this.listeners(e))if(r[A])return r[L];return null},set(r){for(let r of this.listeners(e))if(r[A]){this.removeListener(e,r);break}"function"==typeof r&&this.addEventListener(e,r,{[A]:!0})}})}),WebSocket.prototype.addEventListener=N,WebSocket.prototype.removeEventListener=D,e.exports=WebSocket},7590:(e,r,n)=>{n.d(r,{i6:()=>_});var o,l=n(46896);let h=l.Client;l.ClientBase,l.Connection,l.DatabaseError,l.NeonDbError;let u=l.Pool;l.Query,l.defaults;let p=l.neon,d=l.neonConfig;l.types;var y=class extends Error{constructor(e,r){super(`VercelPostgresError - '${e}': ${r}`),this.code=e,this.name="VercelPostgresError"}};function postgresConnectionString(e="pool"){let r;switch(e){case"pool":r=process.env.POSTGRES_URL;break;case"direct":r=process.env.POSTGRES_URL_NON_POOLING;break;default:throw new y("invalid_connection_type",`Unhandled type: ${e}`)}return"undefined"===r&&(r=void 0),r}function isPooledConnectionString(e){return e.includes("-pooler.")}function isLocalhostConnectionString(e){try{let r=e.startsWith("postgresql://")?e.replace("postgresql://","https://"):e;return"localhost"===new URL(r).hostname}catch(e){if(e instanceof TypeError||"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&"Invalid URL"===e.message)return!1;throw e}}function sqlTemplate(e,...r){var n,o;if(!isTemplateStringsArray(e)||!Array.isArray(r))throw new y("incorrect_tagged_template_call","It looks like you tried to call `sql` as a function. Make sure to use it as a tagged template.\n	Example: sql`SELECT * FROM users`, not sql('SELECT * FROM users')");let l=null!=(n=e[0])?n:"";for(let r=1;r<e.length;r++)l+=`$${r}${null!=(o=e[r])?o:""}`;return[l,r]}function isTemplateStringsArray(e){return Array.isArray(e)&&"raw"in e&&Array.isArray(e.raw)}var m=class extends h{async sql(e,...r){let[n,o]=sqlTemplate(e,...r);return this.query(n,o)}},g=class extends u{constructor(e){var r;super(e),this.Client=m,this.connectionString=null!=(r=e.connectionString)?r:""}async sql(e,...r){let[n,o]=sqlTemplate(e,...r),l=p(this.connectionString,{fullResults:!0});return l(n,o)}connect(e){return super.connect(e)}};function createPool(e){var r;let n=null!=(r=null==e?void 0:e.connectionString)?r:postgresConnectionString("pool");if(!n)throw new y("missing_connection_string","You did not supply a 'connectionString' and no 'POSTGRES_URL' env var was found.");if(!isLocalhostConnectionString(n)&&!isPooledConnectionString(n))throw new y("invalid_connection_string","This connection string is meant to be used with a direct connection. Make sure to use a pooled connection string or try `createClient()` instead.");let o=null==e?void 0:e.maxUses,l=null==e?void 0:e.max;"undefined"!=typeof EdgeRuntime&&(o&&1!==o&&console.warn("@vercel/postgres: Overriding `maxUses` to 1 because the EdgeRuntime does not support client reuse."),l&&1e4!==l&&console.warn("@vercel/postgres: Overriding `max` to 10,000 because the EdgeRuntime does not support client reuse."),o=1,l=1e4);let h=new g({...e,connectionString:n,maxUses:o,max:l});return h}var _=new Proxy(()=>{},{get(e,r){o||(o=createPool());let n=Reflect.get(o,r);return"function"==typeof n?n.bind(o):n},apply:(e,r,n)=>(o||(o=createPool()),o.sql(...n))});n(10199),n(95775),n(49229);var b=n(99313);n(59765),d&&(d.webSocketConstructor=b)},45764:(e,r,n)=>{n.d(r,{ZP:()=>b});var o=n(6113),l=null;function randomBytes(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return o.randomBytes(e)}catch{}if(!l)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return l(e)}function setRandomFallback(e){l=e}function genSaltSync(e,r){if("number"!=typeof(e=e||y))throw Error("Illegal arguments: "+typeof e+", "+typeof r);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(base64_encode(randomBytes(d),d)),n.join("")}function genSalt(e,r,n){if("function"==typeof r&&(n=r,r=void 0),"function"==typeof e&&(n=e,e=void 0),void 0===e)e=y;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function _async(r){h(function(){try{r(null,genSaltSync(e))}catch(e){r(e)}})}if(!n)return new Promise(function(e,r){_async(function(n,o){if(n){r(n);return}e(o)})});if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);_async(n)}function hashSync(e,r){if(void 0===r&&(r=y),"number"==typeof r&&(r=genSaltSync(r)),"string"!=typeof e||"string"!=typeof r)throw Error("Illegal arguments: "+typeof e+", "+typeof r);return _hash(e,r)}function hash(e,r,n,o){function _async(n){"string"==typeof e&&"number"==typeof r?genSalt(r,function(r,l){_hash(e,l,n,o)}):"string"==typeof e&&"string"==typeof r?_hash(e,r,n,o):h(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof r)))}if(!n)return new Promise(function(e,r){_async(function(n,o){if(n){r(n);return}e(o)})});if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);_async(n)}function safeStringCompare(e,r){for(var n=e.length^r.length,o=0;o<e.length;++o)n|=e.charCodeAt(o)^r.charCodeAt(o);return 0===n}function compareSync(e,r){if("string"!=typeof e||"string"!=typeof r)throw Error("Illegal arguments: "+typeof e+", "+typeof r);return 60===r.length&&safeStringCompare(hashSync(e,r.substring(0,r.length-31)),r)}function compare(e,r,n,o){function _async(n){if("string"!=typeof e||"string"!=typeof r){h(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof r)));return}if(60!==r.length){h(n.bind(this,null,!1));return}hash(e,r.substring(0,29),function(e,o){e?n(e):n(null,safeStringCompare(o,r))},o)}if(!n)return new Promise(function(e,r){_async(function(n,o){if(n){r(n);return}e(o)})});if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);_async(n)}function getRounds(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)}function getSalt(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)}function truncates(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return utf8Length(e)>72}var h="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout;function utf8Length(e){for(var r=0,n=0,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?r+=1:n<2048?r+=2:(64512&n)==55296&&(64512&e.charCodeAt(o+1))==56320?(++o,r+=4):r+=3;return r}function utf8Array(e){for(var r,n,o=0,l=Array(utf8Length(e)),h=0,u=e.length;h<u;++h)(r=e.charCodeAt(h))<128?l[o++]=r:(r<2048?l[o++]=r>>6|192:((64512&r)==55296&&(64512&(n=e.charCodeAt(h+1)))==56320?(r=65536+((1023&r)<<10)+(1023&n),++h,l[o++]=r>>18|240,l[o++]=r>>12&63|128):l[o++]=r>>12|224,l[o++]=r>>6&63|128),l[o++]=63&r|128);return l}var u="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),p=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function base64_encode(e,r){var n,o,l=0,h=[];if(r<=0||r>e.length)throw Error("Illegal len: "+r);for(;l<r;){if(n=255&e[l++],h.push(u[n>>2&63]),n=(3&n)<<4,l>=r||(n|=(o=255&e[l++])>>4&15,h.push(u[63&n]),n=(15&o)<<2,l>=r)){h.push(u[63&n]);break}n|=(o=255&e[l++])>>6&3,h.push(u[63&n]),h.push(u[63&o])}return h.join("")}function base64_decode(e,r){var n,o,l,h,u,d=0,y=e.length,m=0,g=[];if(r<=0)throw Error("Illegal len: "+r);for(;d<y-1&&m<r&&(n=(u=e.charCodeAt(d++))<p.length?p[u]:-1,o=(u=e.charCodeAt(d++))<p.length?p[u]:-1,-1!=n&&-1!=o)&&(h=n<<2>>>0|(48&o)>>4,g.push(String.fromCharCode(h)),!(++m>=r||d>=y||-1==(l=(u=e.charCodeAt(d++))<p.length?p[u]:-1)||(h=(15&o)<<4>>>0|(60&l)>>2,g.push(String.fromCharCode(h)),++m>=r||d>=y)));)h=(3&l)<<6>>>0|((u=e.charCodeAt(d++))<p.length?p[u]:-1),g.push(String.fromCharCode(h)),++m;var _=[];for(d=0;d<m;d++)_.push(g[d].charCodeAt(0));return _}var d=16,y=10,m=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],g=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],_=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function _encipher(e,r,n,o){var l=e[r],h=e[r+1];return l^=n[0],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[1],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[2],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[3],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[4],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[5],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[6],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[7],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[8],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[9],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[10],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[11],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[12],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[13],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[14],h^=(o[l>>>24]+o[256|l>>16&255]^o[512|l>>8&255])+o[768|255&l]^n[15],l^=(o[h>>>24]+o[256|h>>16&255]^o[512|h>>8&255])+o[768|255&h]^n[16],e[r]=h^n[17],e[r+1]=l,e}function _streamtoword(e,r){for(var n=0,o=0;n<4;++n)o=o<<8|255&e[r],r=(r+1)%e.length;return{key:o,offp:r}}function _key(e,r,n){for(var o,l=0,h=[0,0],u=r.length,p=n.length,d=0;d<u;d++)l=(o=_streamtoword(e,l)).offp,r[d]=r[d]^o.key;for(d=0;d<u;d+=2)h=_encipher(h,0,r,n),r[d]=h[0],r[d+1]=h[1];for(d=0;d<p;d+=2)h=_encipher(h,0,r,n),n[d]=h[0],n[d+1]=h[1]}function _ekskey(e,r,n,o){for(var l,h=0,u=[0,0],p=n.length,d=o.length,y=0;y<p;y++)h=(l=_streamtoword(r,h)).offp,n[y]=n[y]^l.key;for(y=0,h=0;y<p;y+=2)h=(l=_streamtoword(e,h)).offp,u[0]^=l.key,h=(l=_streamtoword(e,h)).offp,u[1]^=l.key,u=_encipher(u,0,n,o),n[y]=u[0],n[y+1]=u[1];for(y=0;y<d;y+=2)h=(l=_streamtoword(e,h)).offp,u[0]^=l.key,h=(l=_streamtoword(e,h)).offp,u[1]^=l.key,u=_encipher(u,0,n,o),o[y]=u[0],o[y+1]=u[1]}function _crypt(e,r,n,o,l){var u,p,y=_.slice(),b=y.length;if(n<4||n>31){if(p=Error("Illegal number of rounds (4-31): "+n),o){h(o.bind(this,p));return}throw p}if(r.length!==d){if(p=Error("Illegal salt length: "+r.length+" != "+d),o){h(o.bind(this,p));return}throw p}n=1<<n>>>0;var v,S,w,E=0;function next(){if(l&&l(E/n),E<n)for(var u=Date.now();E<n&&(E+=1,_key(e,v,S),_key(r,v,S),!(Date.now()-u>100)););else{for(E=0;E<64;E++)for(w=0;w<b>>1;w++)_encipher(y,w<<1,v,S);var p=[];for(E=0;E<b;E++)p.push((y[E]>>24&255)>>>0),p.push((y[E]>>16&255)>>>0),p.push((y[E]>>8&255)>>>0),p.push((255&y[E])>>>0);return o?void o(null,p):p}o&&h(next)}if("function"==typeof Int32Array?(v=new Int32Array(m),S=new Int32Array(g)):(v=m.slice(),S=g.slice()),_ekskey(r,e,v,S),void 0!==o)next();else for(;;)if(void 0!==(u=next()))return u||[]}function _hash(e,r,n,o){if("string"!=typeof e||"string"!=typeof r){if(l=Error("Invalid string / salt: Not a string"),n){h(n.bind(this,l));return}throw l}if("$"!==r.charAt(0)||"2"!==r.charAt(1)){if(l=Error("Invalid salt version: "+r.substring(0,2)),n){h(n.bind(this,l));return}throw l}if("$"===r.charAt(2))u="\x00",p=3;else{if("a"!==(u=r.charAt(2))&&"b"!==u&&"y"!==u||"$"!==r.charAt(3)){if(l=Error("Invalid salt revision: "+r.substring(2,4)),n){h(n.bind(this,l));return}throw l}p=4}if(r.charAt(p+2)>"$"){if(l=Error("Missing salt rounds"),n){h(n.bind(this,l));return}throw l}var l,u,p,y=10*parseInt(r.substring(p,p+1),10)+parseInt(r.substring(p+1,p+2),10),m=r.substring(p+3,p+25),g=utf8Array(e+=u>="a"?"\x00":""),b=base64_decode(m,d);function finish(e){var r=[];return r.push("$2"),u>="a"&&r.push(u),r.push("$"),y<10&&r.push("0"),r.push(y.toString()),r.push("$"),r.push(base64_encode(b,b.length)),r.push(base64_encode(e,4*_.length-1)),r.join("")}if(void 0===n)return finish(_crypt(g,b,y));_crypt(g,b,y,function(e,r){e?n(e,null):n(null,finish(r))},o)}function encodeBase64(e,r){return base64_encode(e,r)}function decodeBase64(e,r){return base64_decode(e,r)}let b={setRandomFallback,genSaltSync,genSalt,hashSync,hash,compareSync,compare,getRounds,getSalt,truncates,encodeBase64,decodeBase64}}};