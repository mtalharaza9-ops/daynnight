(()=>{var e={};e.id=122,e.ids=[122],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},7934:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>l,routeModule:()=>m,tree:()=>c});var r=s(67096),a=s(16132),i=s(37284),n=s.n(i),d=s(32564),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let c=["",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,96166)),"/Users/toobaasghar/Desktop/projects/daynnight/app/admin/products/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,19591)),"/Users/toobaasghar/Desktop/projects/daynnight/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/toobaasghar/Desktop/projects/daynnight/app/admin/products/page.tsx"],x="/admin/products/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},40495:(e,t,s)=>{Promise.resolve().then(s.bind(s,77481))},77481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>AdminProducts});var r=s(30784),a=s(74284),i=s(57114),n=s(9885),d=s(11440),o=s.n(d);function AdminProducts(){let{data:e,status:t}=(0,a.useSession)(),s=(0,i.useRouter)(),[d,c]=(0,n.useState)([]),[l,x]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if("loading"!==t){if(!e||"admin"!==e.user.role){s.push("/auth/signin");return}fetchProducts()}},[e,t,s]);let fetchProducts=async()=>{try{let e=await fetch("/api/products");if(e.ok){let t=await e.json();c(t.products||[])}}catch(e){console.error("Error fetching products:",e)}finally{x(!1)}},handleDelete=async e=>{if(confirm("Are you sure you want to delete this product?"))try{let t=await fetch(`/api/admin/products/${e}`,{method:"DELETE"});t.ok?c(d.filter(t=>t.id!==e)):alert("Failed to delete product")}catch(e){console.error("Error deleting product:",e),alert("Error deleting product")}};return"loading"===t||l?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-xl",children:"Loading..."})}):e&&"admin"===e.user.role?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Products"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Add, edit, and remove products from your store"})]}),r.jsx(o(),{href:"/admin/products/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Add New Product"})]}),r.jsx("div",{className:"bg-white shadow rounded-lg",children:r.jsx("div",{className:"px-4 py-5 sm:p-6",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:r.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:e.image,alt:e.name})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.description.substring(0,50),"..."]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.price]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${e.stock>10?"bg-green-100 text-green-800":e.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[e.stock," in stock"]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[r.jsx(o(),{href:`/admin/products/${e.id}/edit`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),r.jsx("button",{onClick:()=>handleDelete(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})})})]})}):null}},96166:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(95153);let a=(0,r.createProxy)(String.raw`/Users/toobaasghar/Desktop/projects/daynnight/app/admin/products/page.tsx`),{__esModule:i,$$typeof:n}=a,d=a.default,o=d},57114:(e,t,s)=>{e.exports=s(4979)}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[657,889,710],()=>__webpack_exec__(7934));module.exports=s})();