"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/products/route";
exports.ids = ["app/api/products/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_toobaasghar_Desktop_projects_daynnight_app_api_products_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/products/route.ts */ \"(rsc)/./app/api/products/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/products/route\",\n        pathname: \"/api/products\",\n        filename: \"route\",\n        bundlePath: \"app/api/products/route\"\n    },\n    resolvedPagePath: \"/Users/toobaasghar/Desktop/projects/daynnight/app/api/products/route.ts\",\n    nextConfigOutput,\n    userland: _Users_toobaasghar_Desktop_projects_daynnight_app_api_products_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/products/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9kdWN0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvZHVjdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9kdWN0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRvb2JhYXNnaGFyJTJGRGVza3RvcCUyRnByb2plY3RzJTJGZGF5bm5pZ2h0JTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnRvb2JhYXNnaGFyJTJGRGVza3RvcCUyRnByb2plY3RzJTJGZGF5bm5pZ2h0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNxQztBQUNwRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXktbmlnaHQtaW5jLz83ZmNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy90b29iYWFzZ2hhci9EZXNrdG9wL3Byb2plY3RzL2RheW5uaWdodC9hcHAvYXBpL3Byb2R1Y3RzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdWN0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2R1Y3RzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9kdWN0cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy90b29iYWFzZ2hhci9EZXNrdG9wL3Byb2plY3RzL2RheW5uaWdodC9hcHAvYXBpL3Byb2R1Y3RzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Byb2R1Y3RzL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/products/route.ts":
/*!***********************************!*\
  !*** ./app/api/products/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n// GET /api/products - Fetch all products or search products\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const query = searchParams.get(\"q\");\n        let result;\n        if (query) {\n            result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.searchProducts)(query);\n        } else {\n            result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getProducts)();\n        }\n        if (!result.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to fetch products\",\n                details: result.error\n            }, {\n                status: 500\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: result.data,\n            count: result.data?.length || 0\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/products - Initialize database and seed data\nasync function POST(request) {\n    try {\n        // Initialize database tables\n        const initResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.initializeDatabase)();\n        if (!initResult.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to initialize database\",\n                details: initResult.error\n            }, {\n                status: 500\n            });\n        }\n        // Seed database with sample data\n        const seedResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.seedDatabase)();\n        if (!seedResult.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to seed database\",\n                details: seedResult.error\n            }, {\n                status: 500\n            });\n        }\n        // Fetch the seeded products to return\n        const productsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getProducts)();\n        if (!productsResult.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Database initialized but failed to fetch products\",\n                details: productsResult.error\n            }, {\n                status: 500\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Database initialized and seeded successfully\",\n            data: productsResult.data,\n            count: productsResult.data?.length || 0\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2R1Y3RzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDaUM7QUFFekYsNERBQTREO0FBQ3JELGVBQWVLLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTUMsUUFBUUgsYUFBYUksR0FBRyxDQUFDO1FBRS9CLElBQUlDO1FBQ0osSUFBSUYsT0FBTztZQUNURSxTQUFTLE1BQU1SLHVEQUFjQSxDQUFDTTtRQUNoQyxPQUFPO1lBQ0xFLFNBQVMsTUFBTVQsb0RBQVdBO1FBQzVCO1FBRUEsSUFBSSxDQUFDUyxPQUFPQyxPQUFPLEVBQUU7WUFDbkIsT0FBT2Isa0ZBQVlBLENBQUNjLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87Z0JBQTRCQyxTQUFTSixPQUFPRyxLQUFLO1lBQUMsR0FDM0Q7Z0JBQUVFLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE9BQU9qQixrRkFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQ3ZCRCxTQUFTO1lBQ1RLLE1BQU1OLE9BQU9NLElBQUk7WUFDakJDLE9BQU9QLE9BQU9NLElBQUksRUFBRUUsVUFBVTtRQUNoQztJQUNGLEVBQUUsT0FBT0wsT0FBTztRQUNkTSxRQUFRTixLQUFLLENBQUMsY0FBY0E7UUFDNUIsT0FBT2Ysa0ZBQVlBLENBQUNjLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUF3QixHQUNqQztZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLHlEQUF5RDtBQUNsRCxlQUFlSyxLQUFLaEIsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLDZCQUE2QjtRQUM3QixNQUFNaUIsYUFBYSxNQUFNdEIsMkRBQWtCQTtRQUMzQyxJQUFJLENBQUNzQixXQUFXVixPQUFPLEVBQUU7WUFDdkIsT0FBT2Isa0ZBQVlBLENBQUNjLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87Z0JBQWlDQyxTQUFTTyxXQUFXUixLQUFLO1lBQUMsR0FDcEU7Z0JBQUVFLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGlDQUFpQztRQUNqQyxNQUFNTyxhQUFhLE1BQU10QixxREFBWUE7UUFDckMsSUFBSSxDQUFDc0IsV0FBV1gsT0FBTyxFQUFFO1lBQ3ZCLE9BQU9iLGtGQUFZQSxDQUFDYyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO2dCQUEyQkMsU0FBU1EsV0FBV1QsS0FBSztZQUFDLEdBQzlEO2dCQUFFRSxRQUFRO1lBQUk7UUFFbEI7UUFFQSxzQ0FBc0M7UUFDdEMsTUFBTVEsaUJBQWlCLE1BQU10QixvREFBV0E7UUFDeEMsSUFBSSxDQUFDc0IsZUFBZVosT0FBTyxFQUFFO1lBQzNCLE9BQU9iLGtGQUFZQSxDQUFDYyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO2dCQUFxREMsU0FBU1MsZUFBZVYsS0FBSztZQUFDLEdBQzVGO2dCQUFFRSxRQUFRO1lBQUk7UUFFbEI7UUFFQSxPQUFPakIsa0ZBQVlBLENBQUNjLElBQUksQ0FBQztZQUN2QkQsU0FBUztZQUNUYSxTQUFTO1lBQ1RSLE1BQU1PLGVBQWVQLElBQUk7WUFDekJDLE9BQU9NLGVBQWVQLElBQUksRUFBRUUsVUFBVTtRQUN4QztJQUNGLEVBQUUsT0FBT0wsT0FBTztRQUNkTSxRQUFRTixLQUFLLENBQUMsY0FBY0E7UUFDNUIsT0FBT2Ysa0ZBQVlBLENBQUNjLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUF3QixHQUNqQztZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RheS1uaWdodC1pbmMvLi9hcHAvYXBpL3Byb2R1Y3RzL3JvdXRlLnRzPzkyYTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGluaXRpYWxpemVEYXRhYmFzZSwgc2VlZERhdGFiYXNlLCBnZXRQcm9kdWN0cywgc2VhcmNoUHJvZHVjdHMgfSBmcm9tICdAL2xpYi9kYic7XG5cbi8vIEdFVCAvYXBpL3Byb2R1Y3RzIC0gRmV0Y2ggYWxsIHByb2R1Y3RzIG9yIHNlYXJjaCBwcm9kdWN0c1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBxdWVyeSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3EnKTtcblxuICAgIGxldCByZXN1bHQ7XG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCBzZWFyY2hQcm9kdWN0cyhxdWVyeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IGdldFByb2R1Y3RzKCk7XG4gICAgfVxuXG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHByb2R1Y3RzJywgZGV0YWlsczogcmVzdWx0LmVycm9yIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgY291bnQ6IHJlc3VsdC5kYXRhPy5sZW5ndGggfHwgMCxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBUEkgRXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIFBPU1QgL2FwaS9wcm9kdWN0cyAtIEluaXRpYWxpemUgZGF0YWJhc2UgYW5kIHNlZWQgZGF0YVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBJbml0aWFsaXplIGRhdGFiYXNlIHRhYmxlc1xuICAgIGNvbnN0IGluaXRSZXN1bHQgPSBhd2FpdCBpbml0aWFsaXplRGF0YWJhc2UoKTtcbiAgICBpZiAoIWluaXRSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgZGF0YWJhc2UnLCBkZXRhaWxzOiBpbml0UmVzdWx0LmVycm9yIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBTZWVkIGRhdGFiYXNlIHdpdGggc2FtcGxlIGRhdGFcbiAgICBjb25zdCBzZWVkUmVzdWx0ID0gYXdhaXQgc2VlZERhdGFiYXNlKCk7XG4gICAgaWYgKCFzZWVkUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBzZWVkIGRhdGFiYXNlJywgZGV0YWlsczogc2VlZFJlc3VsdC5lcnJvciB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggdGhlIHNlZWRlZCBwcm9kdWN0cyB0byByZXR1cm5cbiAgICBjb25zdCBwcm9kdWN0c1Jlc3VsdCA9IGF3YWl0IGdldFByb2R1Y3RzKCk7XG4gICAgaWYgKCFwcm9kdWN0c1Jlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdEYXRhYmFzZSBpbml0aWFsaXplZCBidXQgZmFpbGVkIHRvIGZldGNoIHByb2R1Y3RzJywgZGV0YWlsczogcHJvZHVjdHNSZXN1bHQuZXJyb3IgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGluaXRpYWxpemVkIGFuZCBzZWVkZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGRhdGE6IHByb2R1Y3RzUmVzdWx0LmRhdGEsXG4gICAgICBjb3VudDogcHJvZHVjdHNSZXN1bHQuZGF0YT8ubGVuZ3RoIHx8IDAsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJpbml0aWFsaXplRGF0YWJhc2UiLCJzZWVkRGF0YWJhc2UiLCJnZXRQcm9kdWN0cyIsInNlYXJjaFByb2R1Y3RzIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInF1ZXJ5IiwiZ2V0IiwicmVzdWx0Iiwic3VjY2VzcyIsImpzb24iLCJlcnJvciIsImRldGFpbHMiLCJzdGF0dXMiLCJkYXRhIiwiY291bnQiLCJsZW5ndGgiLCJjb25zb2xlIiwiUE9TVCIsImluaXRSZXN1bHQiLCJzZWVkUmVzdWx0IiwicHJvZHVjdHNSZXN1bHQiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/products/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addToCart: () => (/* binding */ addToCart),\n/* harmony export */   createProduct: () => (/* binding */ createProduct),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getCartItems: () => (/* binding */ getCartItems),\n/* harmony export */   getCategories: () => (/* binding */ getCategories),\n/* harmony export */   getProducts: () => (/* binding */ getProducts),\n/* harmony export */   getProductsByCategory: () => (/* binding */ getProductsByCategory),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   removeFromCart: () => (/* binding */ removeFromCart),\n/* harmony export */   searchProducts: () => (/* binding */ searchProducts),\n/* harmony export */   seedDatabase: () => (/* binding */ seedDatabase),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/postgres */ \"(rsc)/./node_modules/@vercel/postgres/dist/index-node.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n// Check if Postgres is properly configured\nfunction checkPostgresConnection() {\n    const postgresUrl = process.env.POSTGRES_URL;\n    return postgresUrl && !postgresUrl.includes(\"username\") && !postgresUrl.includes(\"password\");\n}\n// Initialize memory data for development\nfunction initializeMemoryData() {\n    memoryProducts = [\n        {\n            id: 1,\n            name: \"Wireless Headphones\",\n            description: \"High-quality wireless headphones with noise cancellation\",\n            price: 199.99,\n            image: \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400\",\n            category: \"Electronics\",\n            rating: 4.5,\n            reviews: 128,\n            inStock: true\n        },\n        {\n            id: 2,\n            name: \"Smart Watch\",\n            description: \"Feature-rich smartwatch with health monitoring\",\n            price: 299.99,\n            image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400\",\n            category: \"Electronics\",\n            rating: 4.3,\n            reviews: 89,\n            inStock: true\n        },\n        {\n            id: 3,\n            name: \"Laptop Backpack\",\n            description: \"Durable laptop backpack with multiple compartments\",\n            price: 79.99,\n            image: \"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400\",\n            category: \"Accessories\",\n            rating: 4.7,\n            reviews: 156,\n            inStock: true\n        }\n    ];\n    memoryCategories = [\n        {\n            id: 1,\n            name: \"Electronics\",\n            description: \"Latest gadgets and electronic devices\",\n            image: \"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400\"\n        },\n        {\n            id: 2,\n            name: \"Accessories\",\n            description: \"Essential accessories for daily use\",\n            image: \"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400\"\n        },\n        {\n            id: 3,\n            name: \"Home & Garden\",\n            description: \"Everything for your home and garden\",\n            image: \"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400\"\n        }\n    ];\n}\n// For development, we'll use a simple in-memory fallback when Postgres is not available\nlet isPostgresAvailable = checkPostgresConnection();\n// Simple in-memory storage for development\nlet memoryProducts = [];\nlet memoryCategories = [];\nlet memoryUsers = [];\nlet memoryCartItems = [];\n// Initialize memory data immediately if Postgres is not available\nif (!isPostgresAvailable) {\n    initializeMemoryData();\n}\n// Initialize database tables\nasync function initializeDatabase() {\n    // Check if Postgres is properly configured\n    if (!isPostgresAvailable) {\n        console.log(\"Postgres not configured, using in-memory storage for development\");\n        // Initialize with sample data\n        initializeMemoryData();\n        return {\n            success: true\n        };\n    }\n    try {\n        // Create products table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS products (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        description TEXT,\n        price DECIMAL(10, 2) NOT NULL,\n        image VARCHAR(500),\n        category VARCHAR(100),\n        rating DECIMAL(2, 1) DEFAULT 0,\n        reviews INTEGER DEFAULT 0,\n        in_stock BOOLEAN DEFAULT true,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create categories table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS categories (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL UNIQUE,\n        description TEXT,\n        image VARCHAR(500),\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create users table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS users (\n        id SERIAL PRIMARY KEY,\n        email VARCHAR(255) NOT NULL UNIQUE,\n        name VARCHAR(255) NOT NULL,\n        password VARCHAR(255) NOT NULL,\n        role VARCHAR(20) DEFAULT 'user',\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create cart_items table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS cart_items (\n        id SERIAL PRIMARY KEY,\n        user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n        product_id INTEGER REFERENCES products(id) ON DELETE CASCADE,\n        quantity INTEGER NOT NULL DEFAULT 1,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create orders table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS orders (\n        id SERIAL PRIMARY KEY,\n        user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n        total DECIMAL(10, 2) NOT NULL,\n        status VARCHAR(20) DEFAULT 'pending',\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        console.log(\"Database tables initialized successfully\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error initializing database:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Seed initial data\nasync function seedDatabase() {\n    try {\n        // Insert sample categories\n        const categories = [\n            {\n                name: \"Electronics\",\n                description: \"Latest gadgets and electronic devices\",\n                image: \"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400\"\n            },\n            {\n                name: \"Clothing\",\n                description: \"Fashion and apparel for all occasions\",\n                image: \"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400\"\n            },\n            {\n                name: \"Home & Garden\",\n                description: \"Everything for your home and garden\",\n                image: \"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400\"\n            },\n            {\n                name: \"Sports\",\n                description: \"Sports equipment and fitness gear\",\n                image: \"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400\"\n            }\n        ];\n        for (const category of categories){\n            await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n        INSERT INTO categories (name, description, image)\n        VALUES (${category.name}, ${category.description}, ${category.image})\n        ON CONFLICT (name) DO NOTHING\n      `;\n        }\n        // Insert sample products\n        const products = [\n            {\n                name: \"Wireless Headphones\",\n                description: \"High-quality wireless headphones with noise cancellation\",\n                price: 199.99,\n                image: \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400\",\n                category: \"Electronics\",\n                rating: 4.5,\n                reviews: 128\n            },\n            {\n                name: \"Smart Watch\",\n                description: \"Feature-rich smartwatch with health monitoring\",\n                price: 299.99,\n                image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400\",\n                category: \"Electronics\",\n                rating: 4.3,\n                reviews: 89\n            },\n            {\n                name: \"Designer T-Shirt\",\n                description: \"Premium cotton t-shirt with modern design\",\n                price: 49.99,\n                image: \"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400\",\n                category: \"Clothing\",\n                rating: 4.7,\n                reviews: 203\n            },\n            {\n                name: \"Running Shoes\",\n                description: \"Comfortable running shoes for all terrains\",\n                price: 129.99,\n                image: \"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400\",\n                category: \"Sports\",\n                rating: 4.6,\n                reviews: 156\n            },\n            {\n                name: \"Coffee Maker\",\n                description: \"Automatic coffee maker with programmable settings\",\n                price: 89.99,\n                image: \"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=400\",\n                category: \"Home & Garden\",\n                rating: 4.4,\n                reviews: 74\n            },\n            {\n                name: \"Yoga Mat\",\n                description: \"Non-slip yoga mat for comfortable workouts\",\n                price: 39.99,\n                image: \"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=400\",\n                category: \"Sports\",\n                rating: 4.8,\n                reviews: 312\n            }\n        ];\n        for (const product of products){\n            await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n        INSERT INTO products (name, description, price, image, category, rating, reviews)\n        VALUES (${product.name}, ${product.description}, ${product.price}, ${product.image}, ${product.category}, ${product.rating}, ${product.reviews})\n        ON CONFLICT DO NOTHING\n      `;\n        }\n        // Create default admin user\n        const adminPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(\"admin123\", 10);\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO users (email, name, password, role)\n      VALUES ('admin@daynnight.com', 'Admin User', ${adminPassword}, 'admin')\n      ON CONFLICT (email) DO NOTHING\n    `;\n        console.log(\"Database seeded successfully\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error seeding database:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Get all products\nasync function getProducts() {\n    if (!isPostgresAvailable) {\n        return {\n            success: true,\n            data: memoryProducts\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM products \n      ORDER BY created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching products:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Get all categories\nasync function getCategories() {\n    if (!isPostgresAvailable) {\n        return {\n            success: true,\n            data: memoryCategories\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM categories \n      ORDER BY name ASC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching categories:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Get products by category\nasync function getProductsByCategory(category) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM products \n      WHERE category = ${category}\n      ORDER BY created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching products by category:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Search products\nasync function searchProducts(query) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM products \n      WHERE name ILIKE ${`%${query}%`} \n         OR description ILIKE ${`%${query}%`}\n         OR category ILIKE ${`%${query}%`}\n      ORDER BY created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error searching products:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// User authentication functions\nasync function createUser(email, name, password) {\n    // Check if Postgres is available\n    if (!isPostgresAvailable) {\n        // Use in-memory storage for development\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 10);\n        // Check if user already exists\n        const existingUser = memoryUsers.find((user)=>user.email === email);\n        if (existingUser) {\n            return {\n                success: false,\n                error: \"User already exists\"\n            };\n        }\n        const newUser = {\n            id: memoryUsers.length + 1,\n            email,\n            name,\n            password: hashedPassword,\n            role: \"user\",\n            createdAt: new Date()\n        };\n        memoryUsers.push(newUser);\n        // Return user without password\n        const { password: _, ...userWithoutPassword } = newUser;\n        return {\n            success: true,\n            data: userWithoutPassword\n        };\n    }\n    try {\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 10);\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO users (email, name, password, role)\n      VALUES (${email}, ${name}, ${hashedPassword}, 'user')\n      RETURNING id, email, name, role, created_at\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error creating user:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function getUserByEmail(email) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM users WHERE email = ${email}\n    `;\n        return {\n            success: true,\n            data: rows[0] || null\n        };\n    } catch (error) {\n        console.error(\"Error fetching user by email:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function verifyPassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(password, hashedPassword);\n}\n// Cart functions\nasync function addToCart(userEmail, productId, quantity = 1) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO cart_items (user_id, product_id, quantity)\n      VALUES (\n        (SELECT id FROM users WHERE email = ${userEmail}), \n        ${productId}, \n        ${quantity}\n      )\n      ON CONFLICT (user_id, product_id) \n      DO UPDATE SET quantity = cart_items.quantity + ${quantity}\n      RETURNING *\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error adding to cart:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function getCartItems(userEmail) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT ci.id, ci.product_id as \"productId\", ci.quantity, \n             json_build_object(\n               'id', p.id,\n               'name', p.name,\n               'price', p.price,\n               'image', p.image\n             ) as product\n      FROM cart_items ci\n      JOIN products p ON ci.product_id = p.id\n      JOIN users u ON ci.user_id = u.id\n      WHERE u.email = ${userEmail}\n      ORDER BY ci.created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching cart items:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function removeFromCart(userEmail, productId) {\n    try {\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      DELETE FROM cart_items \n      WHERE user_id = (SELECT id FROM users WHERE email = ${userEmail}) \n      AND product_id = ${productId}\n    `;\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error removing from cart:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Admin functions\nasync function getAllUsers() {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT id, email, name, role, created_at FROM users\n      ORDER BY created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching users:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function createProduct(product) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO products (name, description, price, image, category, rating, reviews)\n      VALUES (${product.name}, ${product.description}, ${product.price}, ${product.image}, ${product.category}, ${product.rating}, ${product.reviews})\n      RETURNING *\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error creating product:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function updateProduct(id, product) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      UPDATE products \n      SET name = COALESCE(${product.name}, name),\n          description = COALESCE(${product.description}, description),\n          price = COALESCE(${product.price}, price),\n          image = COALESCE(${product.image}, image),\n          category = COALESCE(${product.category}, category),\n          rating = COALESCE(${product.rating}, rating),\n          reviews = COALESCE(${product.reviews}, reviews),\n          in_stock = COALESCE(${product.inStock}, in_stock)\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error updating product:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function deleteProduct(id) {\n    try {\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`DELETE FROM products WHERE id = ${id}`;\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error deleting product:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVcsQ0FBQzsyQkFDNUIsRUFBRW1CLFFBQVFsQixLQUFLLENBQUM7MkJBQ2hCLEVBQUVrQixRQUFRakIsS0FBSyxDQUFDOzhCQUNiLEVBQUVpQixRQUFRaEIsUUFBUSxDQUFDOzRCQUNyQixFQUFFZ0IsUUFBUWYsTUFBTSxDQUFDOzZCQUNoQixFQUFFZSxRQUFRZCxPQUFPLENBQUM7OEJBQ2pCLEVBQUVjLFFBQVFiLE9BQU8sQ0FBQztpQkFDL0IsRUFBRVIsR0FBRzs7SUFFbEIsQ0FBQztRQUNELE9BQU87WUFBRWdCLFNBQVM7WUFBTVMsTUFBTUMsSUFBSSxDQUFDLEVBQUU7UUFBQztJQUN4QyxFQUFFLE9BQU9ULE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBTztZQUFFRCxTQUFTO1lBQU9DO1FBQU07SUFDakM7QUFDRjtBQUVPLGVBQWV5QyxjQUFjMUQsRUFBVTtJQUM1QyxJQUFJO1FBQ0YsTUFBTVYsaURBQUcsQ0FBQyxnQ0FBZ0MsRUFBRVUsR0FBRyxDQUFDO1FBQ2hELE9BQU87WUFBRWdCLFNBQVM7UUFBSztJQUN6QixFQUFFLE9BQU9DLE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBTztZQUFFRCxTQUFTO1lBQU9DO1FBQU07SUFDakM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RheS1uaWdodC1pbmMvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzcWwgfSBmcm9tICdAdmVyY2VsL3Bvc3RncmVzJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG4vLyBDaGVjayBpZiBQb3N0Z3JlcyBpcyBwcm9wZXJseSBjb25maWd1cmVkXG5mdW5jdGlvbiBjaGVja1Bvc3RncmVzQ29ubmVjdGlvbigpIHtcbiAgY29uc3QgcG9zdGdyZXNVcmwgPSBwcm9jZXNzLmVudi5QT1NUR1JFU19VUkw7XG4gIHJldHVybiBwb3N0Z3Jlc1VybCAmJiAhcG9zdGdyZXNVcmwuaW5jbHVkZXMoJ3VzZXJuYW1lJykgJiYgIXBvc3RncmVzVXJsLmluY2x1ZGVzKCdwYXNzd29yZCcpO1xufVxuXG4vLyBJbml0aWFsaXplIG1lbW9yeSBkYXRhIGZvciBkZXZlbG9wbWVudFxuZnVuY3Rpb24gaW5pdGlhbGl6ZU1lbW9yeURhdGEoKSB7XG4gIG1lbW9yeVByb2R1Y3RzID0gW1xuICAgIHtcbiAgICAgIGlkOiAxLFxuICAgICAgbmFtZTogJ1dpcmVsZXNzIEhlYWRwaG9uZXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdIaWdoLXF1YWxpdHkgd2lyZWxlc3MgaGVhZHBob25lcyB3aXRoIG5vaXNlIGNhbmNlbGxhdGlvbicsXG4gICAgICBwcmljZTogMTk5Ljk5LFxuICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwNTc0MDQyMDkyOC01ZTU2MGMwNmQzMGU/dz00MDAnLFxuICAgICAgY2F0ZWdvcnk6ICdFbGVjdHJvbmljcycsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIHJldmlld3M6IDEyOCxcbiAgICAgIGluU3RvY2s6IHRydWVcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAyLFxuICAgICAgbmFtZTogJ1NtYXJ0IFdhdGNoJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRmVhdHVyZS1yaWNoIHNtYXJ0d2F0Y2ggd2l0aCBoZWFsdGggbW9uaXRvcmluZycsXG4gICAgICBwcmljZTogMjk5Ljk5LFxuICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyMzI3NTMzNTY4NC0zNzg5OGI2YmFmMzA/dz00MDAnLFxuICAgICAgY2F0ZWdvcnk6ICdFbGVjdHJvbmljcycsXG4gICAgICByYXRpbmc6IDQuMyxcbiAgICAgIHJldmlld3M6IDg5LFxuICAgICAgaW5TdG9jazogdHJ1ZVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDMsXG4gICAgICBuYW1lOiAnTGFwdG9wIEJhY2twYWNrJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRHVyYWJsZSBsYXB0b3AgYmFja3BhY2sgd2l0aCBtdWx0aXBsZSBjb21wYXJ0bWVudHMnLFxuICAgICAgcHJpY2U6IDc5Ljk5LFxuICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1MzA2MjQwNy05OGVlYjY0YzZhNjI/dz00MDAnLFxuICAgICAgY2F0ZWdvcnk6ICdBY2Nlc3NvcmllcycsXG4gICAgICByYXRpbmc6IDQuNyxcbiAgICAgIHJldmlld3M6IDE1NixcbiAgICAgIGluU3RvY2s6IHRydWVcbiAgICB9XG4gIF07XG5cbiAgbWVtb3J5Q2F0ZWdvcmllcyA9IFtcbiAgICB7XG4gICAgICBpZDogMSxcbiAgICAgIG5hbWU6ICdFbGVjdHJvbmljcycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xhdGVzdCBnYWRnZXRzIGFuZCBlbGVjdHJvbmljIGRldmljZXMnLFxuICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ5ODA0OTc5NDU2MS03NzgwZTcyMzE2NjE/dz00MDAnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogMixcbiAgICAgIG5hbWU6ICdBY2Nlc3NvcmllcycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0Vzc2VudGlhbCBhY2Nlc3NvcmllcyBmb3IgZGFpbHkgdXNlJyxcbiAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTMwNjI0MDctOThlZWI2NGM2YTYyP3c9NDAwJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDMsXG4gICAgICBuYW1lOiAnSG9tZSAmIEdhcmRlbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0V2ZXJ5dGhpbmcgZm9yIHlvdXIgaG9tZSBhbmQgZ2FyZGVuJyxcbiAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODYwMjM0OTIxMjUtMjdiMmMwNDVlZmQ3P3c9NDAwJ1xuICAgIH1cbiAgXTtcbn1cblxuLy8gRm9yIGRldmVsb3BtZW50LCB3ZSdsbCB1c2UgYSBzaW1wbGUgaW4tbWVtb3J5IGZhbGxiYWNrIHdoZW4gUG9zdGdyZXMgaXMgbm90IGF2YWlsYWJsZVxubGV0IGlzUG9zdGdyZXNBdmFpbGFibGUgPSBjaGVja1Bvc3RncmVzQ29ubmVjdGlvbigpO1xuXG4vLyBTaW1wbGUgaW4tbWVtb3J5IHN0b3JhZ2UgZm9yIGRldmVsb3BtZW50XG5sZXQgbWVtb3J5UHJvZHVjdHM6IFByb2R1Y3RbXSA9IFtdO1xubGV0IG1lbW9yeUNhdGVnb3JpZXM6IENhdGVnb3J5W10gPSBbXTtcbmxldCBtZW1vcnlVc2VyczogVXNlcltdID0gW107XG5sZXQgbWVtb3J5Q2FydEl0ZW1zOiBDYXJ0SXRlbVtdID0gW107XG5cbi8vIEluaXRpYWxpemUgbWVtb3J5IGRhdGEgaW1tZWRpYXRlbHkgaWYgUG9zdGdyZXMgaXMgbm90IGF2YWlsYWJsZVxuaWYgKCFpc1Bvc3RncmVzQXZhaWxhYmxlKSB7XG4gIGluaXRpYWxpemVNZW1vcnlEYXRhKCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdCB7XG4gIGlkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcHJpY2U6IG51bWJlcjtcbiAgaW1hZ2U6IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgcmF0aW5nOiBudW1iZXI7XG4gIHJldmlld3M6IG51bWJlcjtcbiAgaW5TdG9jazogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXRlZ29yeSB7XG4gIGlkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgaW1hZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICByb2xlOiAndXNlcicgfCAnYWRtaW4nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FydEl0ZW0ge1xuICBpZDogbnVtYmVyO1xuICB1c2VySWQ6IG51bWJlcjtcbiAgcHJvZHVjdElkOiBudW1iZXI7XG4gIHF1YW50aXR5OiBudW1iZXI7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcmRlciB7XG4gIGlkOiBudW1iZXI7XG4gIHVzZXJJZDogbnVtYmVyO1xuICB0b3RhbDogbnVtYmVyO1xuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdzaGlwcGVkJyB8ICdkZWxpdmVyZWQnO1xuICBjcmVhdGVkQXQ6IERhdGU7XG59XG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgdGFibGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xuICAvLyBDaGVjayBpZiBQb3N0Z3JlcyBpcyBwcm9wZXJseSBjb25maWd1cmVkXG4gIGlmICghaXNQb3N0Z3Jlc0F2YWlsYWJsZSkge1xuICAgIGNvbnNvbGUubG9nKCdQb3N0Z3JlcyBub3QgY29uZmlndXJlZCwgdXNpbmcgaW4tbWVtb3J5IHN0b3JhZ2UgZm9yIGRldmVsb3BtZW50Jyk7XG4gICAgLy8gSW5pdGlhbGl6ZSB3aXRoIHNhbXBsZSBkYXRhXG4gICAgaW5pdGlhbGl6ZU1lbW9yeURhdGEoKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH1cblxuICB0cnkge1xuICAgIC8vIENyZWF0ZSBwcm9kdWN0cyB0YWJsZVxuICAgIGF3YWl0IHNxbGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHByb2R1Y3RzIChcbiAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxuICAgICAgICBuYW1lIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgcHJpY2UgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgICAgIGltYWdlIFZBUkNIQVIoNTAwKSxcbiAgICAgICAgY2F0ZWdvcnkgVkFSQ0hBUigxMDApLFxuICAgICAgICByYXRpbmcgREVDSU1BTCgyLCAxKSBERUZBVUxUIDAsXG4gICAgICAgIHJldmlld3MgSU5URUdFUiBERUZBVUxUIDAsXG4gICAgICAgIGluX3N0b2NrIEJPT0xFQU4gREVGQVVMVCB0cnVlLFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApXG4gICAgYDtcblxuICAgIC8vIENyZWF0ZSBjYXRlZ29yaWVzIHRhYmxlXG4gICAgYXdhaXQgc3FsYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2F0ZWdvcmllcyAoXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAgbmFtZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwgVU5JUVVFLFxuICAgICAgICBkZXNjcmlwdGlvbiBURVhULFxuICAgICAgICBpbWFnZSBWQVJDSEFSKDUwMCksXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgIClcbiAgICBgO1xuXG4gICAgLy8gQ3JlYXRlIHVzZXJzIHRhYmxlXG4gICAgYXdhaXQgc3FsYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgICAgICBpZCBTRVJJQUwgUFJJTUFSWSBLRVksXG4gICAgICAgIGVtYWlsIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCBVTklRVUUsXG4gICAgICAgIG5hbWUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICBwYXNzd29yZCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgIHJvbGUgVkFSQ0hBUigyMCkgREVGQVVMVCAndXNlcicsXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgIClcbiAgICBgO1xuXG4gICAgLy8gQ3JlYXRlIGNhcnRfaXRlbXMgdGFibGVcbiAgICBhd2FpdCBzcWxgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBjYXJ0X2l0ZW1zIChcbiAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxuICAgICAgICB1c2VyX2lkIElOVEVHRVIgUkVGRVJFTkNFUyB1c2VycyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIHByb2R1Y3RfaWQgSU5URUdFUiBSRUZFUkVOQ0VTIHByb2R1Y3RzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgcXVhbnRpdHkgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDEsXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgIClcbiAgICBgO1xuXG4gICAgLy8gQ3JlYXRlIG9yZGVycyB0YWJsZVxuICAgIGF3YWl0IHNxbGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAgdXNlcl9pZCBJTlRFR0VSIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgICAgICB0b3RhbCBERUNJTUFMKDEwLCAyKSBOT1QgTlVMTCxcbiAgICAgICAgc3RhdHVzIFZBUkNIQVIoMjApIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApXG4gICAgYDtcblxuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSB0YWJsZXMgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBkYXRhYmFzZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuLy8gU2VlZCBpbml0aWFsIGRhdGFcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWVkRGF0YWJhc2UoKSB7XG4gIHRyeSB7XG4gICAgLy8gSW5zZXJ0IHNhbXBsZSBjYXRlZ29yaWVzXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0VsZWN0cm9uaWNzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdMYXRlc3QgZ2FkZ2V0cyBhbmQgZWxlY3Ryb25pYyBkZXZpY2VzJyxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ5ODA0OTc5NDU2MS03NzgwZTcyMzE2NjE/dz00MDAnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0Nsb3RoaW5nJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGYXNoaW9uIGFuZCBhcHBhcmVsIGZvciBhbGwgb2NjYXNpb25zJyxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ0MTk4NjMwMDkxNy02NDY3NGJkNjAwZDg/dz00MDAnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ0hvbWUgJiBHYXJkZW4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0V2ZXJ5dGhpbmcgZm9yIHlvdXIgaG9tZSBhbmQgZ2FyZGVuJyxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU4NjAyMzQ5MjEyNS0yN2IyYzA0NWVmZDc/dz00MDAnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1Nwb3J0cycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU3BvcnRzIGVxdWlwbWVudCBhbmQgZml0bmVzcyBnZWFyJyxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3MTAxOTYxMzQ1NC0xY2IyZjk5YjJkOGI/dz00MDAnLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBjYXRlZ29yaWVzKSB7XG4gICAgICBhd2FpdCBzcWxgXG4gICAgICAgIElOU0VSVCBJTlRPIGNhdGVnb3JpZXMgKG5hbWUsIGRlc2NyaXB0aW9uLCBpbWFnZSlcbiAgICAgICAgVkFMVUVTICgke2NhdGVnb3J5Lm5hbWV9LCAke2NhdGVnb3J5LmRlc2NyaXB0aW9ufSwgJHtjYXRlZ29yeS5pbWFnZX0pXG4gICAgICAgIE9OIENPTkZMSUNUIChuYW1lKSBETyBOT1RISU5HXG4gICAgICBgO1xuICAgIH1cblxuICAgIC8vIEluc2VydCBzYW1wbGUgcHJvZHVjdHNcbiAgICBjb25zdCBwcm9kdWN0cyA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1dpcmVsZXNzIEhlYWRwaG9uZXMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0hpZ2gtcXVhbGl0eSB3aXJlbGVzcyBoZWFkcGhvbmVzIHdpdGggbm9pc2UgY2FuY2VsbGF0aW9uJyxcbiAgICAgICAgcHJpY2U6IDE5OS45OSxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwNTc0MDQyMDkyOC01ZTU2MGMwNmQzMGU/dz00MDAnLFxuICAgICAgICBjYXRlZ29yeTogJ0VsZWN0cm9uaWNzJyxcbiAgICAgICAgcmF0aW5nOiA0LjUsXG4gICAgICAgIHJldmlld3M6IDEyOCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdTbWFydCBXYXRjaCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRmVhdHVyZS1yaWNoIHNtYXJ0d2F0Y2ggd2l0aCBoZWFsdGggbW9uaXRvcmluZycsXG4gICAgICAgIHByaWNlOiAyOTkuOTksXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjMyNzUzMzU2ODQtMzc4OThiNmJhZjMwP3c9NDAwJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdFbGVjdHJvbmljcycsXG4gICAgICAgIHJhdGluZzogNC4zLFxuICAgICAgICByZXZpZXdzOiA4OSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdEZXNpZ25lciBULVNoaXJ0JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdQcmVtaXVtIGNvdHRvbiB0LXNoaXJ0IHdpdGggbW9kZXJuIGRlc2lnbicsXG4gICAgICAgIHByaWNlOiA0OS45OSxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyMTU3MjE2MzQ3NC02ODY0ZjljZjE3YWI/dz00MDAnLFxuICAgICAgICBjYXRlZ29yeTogJ0Nsb3RoaW5nJyxcbiAgICAgICAgcmF0aW5nOiA0LjcsXG4gICAgICAgIHJldmlld3M6IDIwMyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdSdW5uaW5nIFNob2VzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDb21mb3J0YWJsZSBydW5uaW5nIHNob2VzIGZvciBhbGwgdGVycmFpbnMnLFxuICAgICAgICBwcmljZTogMTI5Ljk5LFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQyMjkxMDI2LTdlZWMyNjRjMjdmZj93PTQwMCcsXG4gICAgICAgIGNhdGVnb3J5OiAnU3BvcnRzJyxcbiAgICAgICAgcmF0aW5nOiA0LjYsXG4gICAgICAgIHJldmlld3M6IDE1NixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdDb2ZmZWUgTWFrZXInLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0F1dG9tYXRpYyBjb2ZmZWUgbWFrZXIgd2l0aCBwcm9ncmFtbWFibGUgc2V0dGluZ3MnLFxuICAgICAgICBwcmljZTogODkuOTksXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTU0NzQ0NzIyODctNGQ3MWJjZGQyMDg1P3c9NDAwJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdIb21lICYgR2FyZGVuJyxcbiAgICAgICAgcmF0aW5nOiA0LjQsXG4gICAgICAgIHJldmlld3M6IDc0LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ1lvZ2EgTWF0JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdOb24tc2xpcCB5b2dhIG1hdCBmb3IgY29tZm9ydGFibGUgd29ya291dHMnLFxuICAgICAgICBwcmljZTogMzkuOTksXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NDQzNjc1NjctMGYyZmNiMDA5ZTBiP3c9NDAwJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdTcG9ydHMnLFxuICAgICAgICByYXRpbmc6IDQuOCxcbiAgICAgICAgcmV2aWV3czogMzEyLFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBwcm9kdWN0IG9mIHByb2R1Y3RzKSB7XG4gICAgICBhd2FpdCBzcWxgXG4gICAgICAgIElOU0VSVCBJTlRPIHByb2R1Y3RzIChuYW1lLCBkZXNjcmlwdGlvbiwgcHJpY2UsIGltYWdlLCBjYXRlZ29yeSwgcmF0aW5nLCByZXZpZXdzKVxuICAgICAgICBWQUxVRVMgKCR7cHJvZHVjdC5uYW1lfSwgJHtwcm9kdWN0LmRlc2NyaXB0aW9ufSwgJHtwcm9kdWN0LnByaWNlfSwgJHtwcm9kdWN0LmltYWdlfSwgJHtwcm9kdWN0LmNhdGVnb3J5fSwgJHtwcm9kdWN0LnJhdGluZ30sICR7cHJvZHVjdC5yZXZpZXdzfSlcbiAgICAgICAgT04gQ09ORkxJQ1QgRE8gTk9USElOR1xuICAgICAgYDtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZGVmYXVsdCBhZG1pbiB1c2VyXG4gICAgY29uc3QgYWRtaW5QYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKCdhZG1pbjEyMycsIDEwKTtcbiAgICBhd2FpdCBzcWxgXG4gICAgICBJTlNFUlQgSU5UTyB1c2VycyAoZW1haWwsIG5hbWUsIHBhc3N3b3JkLCByb2xlKVxuICAgICAgVkFMVUVTICgnYWRtaW5AZGF5bm5pZ2h0LmNvbScsICdBZG1pbiBVc2VyJywgJHthZG1pblBhc3N3b3JkfSwgJ2FkbWluJylcbiAgICAgIE9OIENPTkZMSUNUIChlbWFpbCkgRE8gTk9USElOR1xuICAgIGA7XG5cbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2Ugc2VlZGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWVkaW5nIGRhdGFiYXNlOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBHZXQgYWxsIHByb2R1Y3RzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZHVjdHMoKSB7XG4gIGlmICghaXNQb3N0Z3Jlc0F2YWlsYWJsZSkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1lbW9yeVByb2R1Y3RzIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBwcm9kdWN0cyBcbiAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2R1Y3RzOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBHZXQgYWxsIGNhdGVnb3JpZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXRlZ29yaWVzKCkge1xuICBpZiAoIWlzUG9zdGdyZXNBdmFpbGFibGUpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtZW1vcnlDYXRlZ29yaWVzIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBjYXRlZ29yaWVzIFxuICAgICAgT1JERVIgQlkgbmFtZSBBU0NcbiAgICBgO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvd3MgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXRlZ29yaWVzOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBHZXQgcHJvZHVjdHMgYnkgY2F0ZWdvcnlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0c0J5Q2F0ZWdvcnkoY2F0ZWdvcnk6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBwcm9kdWN0cyBcbiAgICAgIFdIRVJFIGNhdGVnb3J5ID0gJHtjYXRlZ29yeX1cbiAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2R1Y3RzIGJ5IGNhdGVnb3J5OicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBTZWFyY2ggcHJvZHVjdHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hQcm9kdWN0cyhxdWVyeTogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIHByb2R1Y3RzIFxuICAgICAgV0hFUkUgbmFtZSBJTElLRSAke2AlJHtxdWVyeX0lYH0gXG4gICAgICAgICBPUiBkZXNjcmlwdGlvbiBJTElLRSAke2AlJHtxdWVyeX0lYH1cbiAgICAgICAgIE9SIGNhdGVnb3J5IElMSUtFICR7YCUke3F1ZXJ5fSVgfVxuICAgICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXG4gICAgYDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByb3dzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIHByb2R1Y3RzOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBVc2VyIGF1dGhlbnRpY2F0aW9uIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXIoZW1haWw6IHN0cmluZywgbmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSB7XG4gIC8vIENoZWNrIGlmIFBvc3RncmVzIGlzIGF2YWlsYWJsZVxuICBpZiAoIWlzUG9zdGdyZXNBdmFpbGFibGUpIHtcbiAgICAvLyBVc2UgaW4tbWVtb3J5IHN0b3JhZ2UgZm9yIGRldmVsb3BtZW50XG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBtZW1vcnlVc2Vycy5maW5kKHVzZXIgPT4gdXNlci5lbWFpbCA9PT0gZW1haWwpO1xuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VzZXIgYWxyZWFkeSBleGlzdHMnIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICBpZDogbWVtb3J5VXNlcnMubGVuZ3RoICsgMSxcbiAgICAgIGVtYWlsLFxuICAgICAgbmFtZSxcbiAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgIHJvbGU6ICd1c2VyJyBhcyBjb25zdCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH07XG4gICAgXG4gICAgbWVtb3J5VXNlcnMucHVzaChuZXdVc2VyKTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdXNlciB3aXRob3V0IHBhc3N3b3JkXG4gICAgY29uc3QgeyBwYXNzd29yZDogXywgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gbmV3VXNlcjtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB1c2VyV2l0aG91dFBhc3N3b3JkIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIHVzZXJzIChlbWFpbCwgbmFtZSwgcGFzc3dvcmQsIHJvbGUpXG4gICAgICBWQUxVRVMgKCR7ZW1haWx9LCAke25hbWV9LCAke2hhc2hlZFBhc3N3b3JkfSwgJ3VzZXInKVxuICAgICAgUkVUVVJOSU5HIGlkLCBlbWFpbCwgbmFtZSwgcm9sZSwgY3JlYXRlZF9hdFxuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93c1swXSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gJHtlbWFpbH1cbiAgICBgO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvd3NbMF0gfHwgbnVsbCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgYnkgZW1haWw6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoZWRQYXNzd29yZDogc3RyaW5nKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpO1xufVxuXG4vLyBDYXJ0IGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFRvQ2FydCh1c2VyRW1haWw6IHN0cmluZywgcHJvZHVjdElkOiBudW1iZXIsIHF1YW50aXR5OiBudW1iZXIgPSAxKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBzcWxgXG4gICAgICBJTlNFUlQgSU5UTyBjYXJ0X2l0ZW1zICh1c2VyX2lkLCBwcm9kdWN0X2lkLCBxdWFudGl0eSlcbiAgICAgIFZBTFVFUyAoXG4gICAgICAgIChTRUxFQ1QgaWQgRlJPTSB1c2VycyBXSEVSRSBlbWFpbCA9ICR7dXNlckVtYWlsfSksIFxuICAgICAgICAke3Byb2R1Y3RJZH0sIFxuICAgICAgICAke3F1YW50aXR5fVxuICAgICAgKVxuICAgICAgT04gQ09ORkxJQ1QgKHVzZXJfaWQsIHByb2R1Y3RfaWQpIFxuICAgICAgRE8gVVBEQVRFIFNFVCBxdWFudGl0eSA9IGNhcnRfaXRlbXMucXVhbnRpdHkgKyAke3F1YW50aXR5fVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvd3NbMF0gfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgdG8gY2FydDonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhcnRJdGVtcyh1c2VyRW1haWw6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIGNpLmlkLCBjaS5wcm9kdWN0X2lkIGFzIFwicHJvZHVjdElkXCIsIGNpLnF1YW50aXR5LCBcbiAgICAgICAgICAgICBqc29uX2J1aWxkX29iamVjdChcbiAgICAgICAgICAgICAgICdpZCcsIHAuaWQsXG4gICAgICAgICAgICAgICAnbmFtZScsIHAubmFtZSxcbiAgICAgICAgICAgICAgICdwcmljZScsIHAucHJpY2UsXG4gICAgICAgICAgICAgICAnaW1hZ2UnLCBwLmltYWdlXG4gICAgICAgICAgICAgKSBhcyBwcm9kdWN0XG4gICAgICBGUk9NIGNhcnRfaXRlbXMgY2lcbiAgICAgIEpPSU4gcHJvZHVjdHMgcCBPTiBjaS5wcm9kdWN0X2lkID0gcC5pZFxuICAgICAgSk9JTiB1c2VycyB1IE9OIGNpLnVzZXJfaWQgPSB1LmlkXG4gICAgICBXSEVSRSB1LmVtYWlsID0gJHt1c2VyRW1haWx9XG4gICAgICBPUkRFUiBCWSBjaS5jcmVhdGVkX2F0IERFU0NcbiAgICBgO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvd3MgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXJ0IGl0ZW1zOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlRnJvbUNhcnQodXNlckVtYWlsOiBzdHJpbmcsIHByb2R1Y3RJZDogbnVtYmVyKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgc3FsYFxuICAgICAgREVMRVRFIEZST00gY2FydF9pdGVtcyBcbiAgICAgIFdIRVJFIHVzZXJfaWQgPSAoU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgZW1haWwgPSAke3VzZXJFbWFpbH0pIFxuICAgICAgQU5EIHByb2R1Y3RfaWQgPSAke3Byb2R1Y3RJZH1cbiAgICBgO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW1vdmluZyBmcm9tIGNhcnQ6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbi8vIEFkbWluIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIGlkLCBlbWFpbCwgbmFtZSwgcm9sZSwgY3JlYXRlZF9hdCBGUk9NIHVzZXJzXG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0NcbiAgICBgO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvd3MgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyczonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QocHJvZHVjdDogT21pdDxQcm9kdWN0LCAnaWQnPikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gcHJvZHVjdHMgKG5hbWUsIGRlc2NyaXB0aW9uLCBwcmljZSwgaW1hZ2UsIGNhdGVnb3J5LCByYXRpbmcsIHJldmlld3MpXG4gICAgICBWQUxVRVMgKCR7cHJvZHVjdC5uYW1lfSwgJHtwcm9kdWN0LmRlc2NyaXB0aW9ufSwgJHtwcm9kdWN0LnByaWNlfSwgJHtwcm9kdWN0LmltYWdlfSwgJHtwcm9kdWN0LmNhdGVnb3J5fSwgJHtwcm9kdWN0LnJhdGluZ30sICR7cHJvZHVjdC5yZXZpZXdzfSlcbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByb3dzWzBdIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcHJvZHVjdDonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3QoaWQ6IG51bWJlciwgcHJvZHVjdDogUGFydGlhbDxQcm9kdWN0Pikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIHByb2R1Y3RzIFxuICAgICAgU0VUIG5hbWUgPSBDT0FMRVNDRSgke3Byb2R1Y3QubmFtZX0sIG5hbWUpLFxuICAgICAgICAgIGRlc2NyaXB0aW9uID0gQ09BTEVTQ0UoJHtwcm9kdWN0LmRlc2NyaXB0aW9ufSwgZGVzY3JpcHRpb24pLFxuICAgICAgICAgIHByaWNlID0gQ09BTEVTQ0UoJHtwcm9kdWN0LnByaWNlfSwgcHJpY2UpLFxuICAgICAgICAgIGltYWdlID0gQ09BTEVTQ0UoJHtwcm9kdWN0LmltYWdlfSwgaW1hZ2UpLFxuICAgICAgICAgIGNhdGVnb3J5ID0gQ09BTEVTQ0UoJHtwcm9kdWN0LmNhdGVnb3J5fSwgY2F0ZWdvcnkpLFxuICAgICAgICAgIHJhdGluZyA9IENPQUxFU0NFKCR7cHJvZHVjdC5yYXRpbmd9LCByYXRpbmcpLFxuICAgICAgICAgIHJldmlld3MgPSBDT0FMRVNDRSgke3Byb2R1Y3QucmV2aWV3c30sIHJldmlld3MpLFxuICAgICAgICAgIGluX3N0b2NrID0gQ09BTEVTQ0UoJHtwcm9kdWN0LmluU3RvY2t9LCBpbl9zdG9jaylcbiAgICAgIFdIRVJFIGlkID0gJHtpZH1cbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByb3dzWzBdIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcHJvZHVjdDonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVByb2R1Y3QoaWQ6IG51bWJlcikge1xuICB0cnkge1xuICAgIGF3YWl0IHNxbGBERUxFVEUgRlJPTSBwcm9kdWN0cyBXSEVSRSBpZCA9ICR7aWR9YDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcHJvZHVjdDonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn0iXSwibmFtZXMiOlsic3FsIiwiYmNyeXB0IiwiY2hlY2tQb3N0Z3Jlc0Nvbm5lY3Rpb24iLCJwb3N0Z3Jlc1VybCIsInByb2Nlc3MiLCJlbnYiLCJQT1NUR1JFU19VUkwiLCJpbmNsdWRlcyIsImluaXRpYWxpemVNZW1vcnlEYXRhIiwibWVtb3J5UHJvZHVjdHMiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiaW1hZ2UiLCJjYXRlZ29yeSIsInJhdGluZyIsInJldmlld3MiLCJpblN0b2NrIiwibWVtb3J5Q2F0ZWdvcmllcyIsImlzUG9zdGdyZXNBdmFpbGFibGUiLCJtZW1vcnlVc2VycyIsIm1lbW9yeUNhcnRJdGVtcyIsImluaXRpYWxpemVEYXRhYmFzZSIsImNvbnNvbGUiLCJsb2ciLCJzdWNjZXNzIiwiZXJyb3IiLCJzZWVkRGF0YWJhc2UiLCJjYXRlZ29yaWVzIiwicHJvZHVjdHMiLCJwcm9kdWN0IiwiYWRtaW5QYXNzd29yZCIsImhhc2giLCJnZXRQcm9kdWN0cyIsImRhdGEiLCJyb3dzIiwiZ2V0Q2F0ZWdvcmllcyIsImdldFByb2R1Y3RzQnlDYXRlZ29yeSIsInNlYXJjaFByb2R1Y3RzIiwicXVlcnkiLCJjcmVhdGVVc2VyIiwiZW1haWwiLCJwYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiZXhpc3RpbmdVc2VyIiwiZmluZCIsInVzZXIiLCJuZXdVc2VyIiwibGVuZ3RoIiwicm9sZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJwdXNoIiwiXyIsInVzZXJXaXRob3V0UGFzc3dvcmQiLCJnZXRVc2VyQnlFbWFpbCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsImFkZFRvQ2FydCIsInVzZXJFbWFpbCIsInByb2R1Y3RJZCIsInF1YW50aXR5IiwiZ2V0Q2FydEl0ZW1zIiwicmVtb3ZlRnJvbUNhcnQiLCJnZXRBbGxVc2VycyIsImNyZWF0ZVByb2R1Y3QiLCJ1cGRhdGVQcm9kdWN0IiwiZGVsZXRlUHJvZHVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@neondatabase","vendor-chunks/ws","vendor-chunks/bcryptjs","vendor-chunks/@vercel","vendor-chunks/node-gyp-build","vendor-chunks/utf-8-validate","vendor-chunks/bufferutil"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproducts%2Froute&page=%2Fapi%2Fproducts%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproducts%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();