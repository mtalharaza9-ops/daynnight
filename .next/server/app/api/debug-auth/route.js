"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/debug-auth/route";
exports.ids = ["app/api/debug-auth/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdebug-auth%2Froute&page=%2Fapi%2Fdebug-auth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-auth%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdebug-auth%2Froute&page=%2Fapi%2Fdebug-auth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-auth%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_toobaasghar_Desktop_projects_daynnight_app_api_debug_auth_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/debug-auth/route.ts */ \"(rsc)/./app/api/debug-auth/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/debug-auth/route\",\n        pathname: \"/api/debug-auth\",\n        filename: \"route\",\n        bundlePath: \"app/api/debug-auth/route\"\n    },\n    resolvedPagePath: \"/Users/toobaasghar/Desktop/projects/daynnight/app/api/debug-auth/route.ts\",\n    nextConfigOutput,\n    userland: _Users_toobaasghar_Desktop_projects_daynnight_app_api_debug_auth_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/debug-auth/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkZWJ1Zy1hdXRoJTJGcm91dGUmcGFnZT0lMkZhcGklMkZkZWJ1Zy1hdXRoJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZGVidWctYXV0aCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRvb2JhYXNnaGFyJTJGRGVza3RvcCUyRnByb2plY3RzJTJGZGF5bm5pZ2h0JTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnRvb2JhYXNnaGFyJTJGRGVza3RvcCUyRnByb2plY3RzJTJGZGF5bm5pZ2h0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUN1QztBQUN0RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXktbmlnaHQtaW5jLz8zMzI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy90b29iYWFzZ2hhci9EZXNrdG9wL3Byb2plY3RzL2RheW5uaWdodC9hcHAvYXBpL2RlYnVnLWF1dGgvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2RlYnVnLWF1dGgvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kZWJ1Zy1hdXRoXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9kZWJ1Zy1hdXRoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3Rvb2JhYXNnaGFyL0Rlc2t0b3AvcHJvamVjdHMvZGF5bm5pZ2h0L2FwcC9hcGkvZGVidWctYXV0aC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9kZWJ1Zy1hdXRoL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdebug-auth%2Froute&page=%2Fapi%2Fdebug-auth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-auth%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/debug-auth/route.ts":
/*!*************************************!*\
  !*** ./app/api/debug-auth/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\nasync function GET(request) {\n    try {\n        console.log(\"\\uD83D\\uDD0D Debugging NextAuth configuration...\");\n        // Check if providers are configured\n        const providers = _lib_auth__WEBPACK_IMPORTED_MODULE_1__.authOptions.providers;\n        console.log(\"\\uD83D\\uDCCB Configured providers:\", providers.length);\n        providers.forEach((provider, index)=>{\n            console.log(`Provider ${index}:`, {\n                id: provider.id,\n                name: provider.name,\n                type: provider.type\n            });\n        });\n        // Check if credentials provider exists\n        const credentialsProvider = providers.find((p)=>p.id === \"credentials\");\n        console.log(\"\\uD83D\\uDD11 Credentials provider found:\", !!credentialsProvider);\n        if (credentialsProvider) {\n            console.log(\"\\uD83D\\uDD11 Credentials provider details:\", {\n                id: credentialsProvider.id,\n                name: credentialsProvider.name,\n                type: credentialsProvider.type\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            providersCount: providers.length,\n            hasCredentialsProvider: !!credentialsProvider,\n            providers: providers.map((p)=>({\n                    id: p.id,\n                    name: p.name,\n                    type: p.type\n                }))\n        });\n    } catch (error) {\n        console.error(\"\\uD83D\\uDCA5 Debug auth error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2RlYnVnLWF1dGgvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdEO0FBQ2Y7QUFFbEMsZUFBZUUsSUFBSUMsT0FBb0I7SUFDNUMsSUFBSTtRQUNGQyxRQUFRQyxHQUFHLENBQUM7UUFFWixvQ0FBb0M7UUFDcEMsTUFBTUMsWUFBWUwsa0RBQVdBLENBQUNLLFNBQVM7UUFDdkNGLFFBQVFDLEdBQUcsQ0FBQyxzQ0FBNEJDLFVBQVVDLE1BQU07UUFFeERELFVBQVVFLE9BQU8sQ0FBQyxDQUFDQyxVQUFVQztZQUMzQk4sUUFBUUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFSyxNQUFNLENBQUMsQ0FBQyxFQUFFO2dCQUNoQ0MsSUFBSUYsU0FBU0UsRUFBRTtnQkFDZkMsTUFBTUgsU0FBU0csSUFBSTtnQkFDbkJDLE1BQU1KLFNBQVNJLElBQUk7WUFDckI7UUFDRjtRQUVBLHVDQUF1QztRQUN2QyxNQUFNQyxzQkFBc0JSLFVBQVVTLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUwsRUFBRSxLQUFLO1FBQ3pEUCxRQUFRQyxHQUFHLENBQUMsNENBQWtDLENBQUMsQ0FBQ1M7UUFFaEQsSUFBSUEscUJBQXFCO1lBQ3ZCVixRQUFRQyxHQUFHLENBQUMsOENBQW9DO2dCQUM5Q00sSUFBSUcsb0JBQW9CSCxFQUFFO2dCQUMxQkMsTUFBTUUsb0JBQW9CRixJQUFJO2dCQUM5QkMsTUFBTUMsb0JBQW9CRCxJQUFJO1lBQ2hDO1FBQ0Y7UUFFQSxPQUFPYixrRkFBWUEsQ0FBQ2lCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUQyxnQkFBZ0JiLFVBQVVDLE1BQU07WUFDaENhLHdCQUF3QixDQUFDLENBQUNOO1lBQzFCUixXQUFXQSxVQUFVZSxHQUFHLENBQUNMLENBQUFBLElBQU07b0JBQzdCTCxJQUFJSyxFQUFFTCxFQUFFO29CQUNSQyxNQUFNSSxFQUFFSixJQUFJO29CQUNaQyxNQUFNRyxFQUFFSCxJQUFJO2dCQUNkO1FBQ0Y7SUFDRixFQUFFLE9BQU9TLE9BQU87UUFDZGxCLFFBQVFrQixLQUFLLENBQUMsa0NBQXdCQTtRQUN0QyxPQUFPdEIsa0ZBQVlBLENBQUNpQixJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEksT0FBT0EsaUJBQWlCQyxRQUFRRCxNQUFNRSxPQUFPLEdBQUc7UUFDbEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF5LW5pZ2h0LWluYy8uL2FwcC9hcGkvZGVidWctYXV0aC9yb3V0ZS50cz8wMzU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gRGVidWdnaW5nIE5leHRBdXRoIGNvbmZpZ3VyYXRpb24uLi4nKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBwcm92aWRlcnMgYXJlIGNvbmZpZ3VyZWRcbiAgICBjb25zdCBwcm92aWRlcnMgPSBhdXRoT3B0aW9ucy5wcm92aWRlcnM7XG4gICAgY29uc29sZS5sb2coJ/Cfk4sgQ29uZmlndXJlZCBwcm92aWRlcnM6JywgcHJvdmlkZXJzLmxlbmd0aCk7XG4gICAgXG4gICAgcHJvdmlkZXJzLmZvckVhY2goKHByb3ZpZGVyLCBpbmRleCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFByb3ZpZGVyICR7aW5kZXh9OmAsIHtcbiAgICAgICAgaWQ6IHByb3ZpZGVyLmlkLFxuICAgICAgICBuYW1lOiBwcm92aWRlci5uYW1lLFxuICAgICAgICB0eXBlOiBwcm92aWRlci50eXBlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBjcmVkZW50aWFscyBwcm92aWRlciBleGlzdHNcbiAgICBjb25zdCBjcmVkZW50aWFsc1Byb3ZpZGVyID0gcHJvdmlkZXJzLmZpbmQocCA9PiBwLmlkID09PSAnY3JlZGVudGlhbHMnKTtcbiAgICBjb25zb2xlLmxvZygn8J+UkSBDcmVkZW50aWFscyBwcm92aWRlciBmb3VuZDonLCAhIWNyZWRlbnRpYWxzUHJvdmlkZXIpO1xuICAgIFxuICAgIGlmIChjcmVkZW50aWFsc1Byb3ZpZGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UkSBDcmVkZW50aWFscyBwcm92aWRlciBkZXRhaWxzOicsIHtcbiAgICAgICAgaWQ6IGNyZWRlbnRpYWxzUHJvdmlkZXIuaWQsXG4gICAgICAgIG5hbWU6IGNyZWRlbnRpYWxzUHJvdmlkZXIubmFtZSxcbiAgICAgICAgdHlwZTogY3JlZGVudGlhbHNQcm92aWRlci50eXBlXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBwcm92aWRlcnNDb3VudDogcHJvdmlkZXJzLmxlbmd0aCxcbiAgICAgIGhhc0NyZWRlbnRpYWxzUHJvdmlkZXI6ICEhY3JlZGVudGlhbHNQcm92aWRlcixcbiAgICAgIHByb3ZpZGVyczogcHJvdmlkZXJzLm1hcChwID0+ICh7XG4gICAgICAgIGlkOiBwLmlkLFxuICAgICAgICBuYW1lOiBwLm5hbWUsXG4gICAgICAgIHR5cGU6IHAudHlwZVxuICAgICAgfSkpXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign8J+SpSBEZWJ1ZyBhdXRoIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhdXRoT3B0aW9ucyIsIkdFVCIsInJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwicHJvdmlkZXJzIiwibGVuZ3RoIiwiZm9yRWFjaCIsInByb3ZpZGVyIiwiaW5kZXgiLCJpZCIsIm5hbWUiLCJ0eXBlIiwiY3JlZGVudGlhbHNQcm92aWRlciIsImZpbmQiLCJwIiwianNvbiIsInN1Y2Nlc3MiLCJwcm92aWRlcnNDb3VudCIsImhhc0NyZWRlbnRpYWxzUHJvdmlkZXIiLCJtYXAiLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/debug-auth/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\n\nconsole.log(\"\\uD83D\\uDD27 Loading NextAuth configuration...\");\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            id: \"credentials\",\n            name: \"Credentials\",\n            type: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials, req) {\n                console.log(\"\\uD83D\\uDD0D NextAuth authorize called with:\", {\n                    email: credentials?.email,\n                    hasPassword: !!credentials?.password,\n                    req: !!req\n                });\n                if (!credentials?.email || !credentials?.password) {\n                    console.log(\"❌ Missing credentials\");\n                    return null;\n                }\n                try {\n                    console.log(\"\\uD83D\\uDD0D Looking up user by email:\", credentials.email);\n                    const userResult = await (0,_db__WEBPACK_IMPORTED_MODULE_1__.getUserByEmail)(credentials.email);\n                    console.log(\"\\uD83D\\uDD0D User lookup result:\", userResult);\n                    if (!userResult.success || !userResult.data) {\n                        console.log(\"❌ User not found\");\n                        return null;\n                    }\n                    const user = userResult.data;\n                    console.log(\"✅ Found user:\", {\n                        id: user.id,\n                        email: user.email,\n                        role: user.role\n                    });\n                    console.log(\"\\uD83D\\uDD0D Verifying password...\");\n                    const isValidPassword = await (0,_db__WEBPACK_IMPORTED_MODULE_1__.verifyPassword)(credentials.password, user.password);\n                    console.log(\"\\uD83D\\uDD0D Password validation result:\", isValidPassword);\n                    if (!isValidPassword) {\n                        console.log(\"❌ Invalid password\");\n                        return null;\n                    }\n                    const authUser = {\n                        id: user.id.toString(),\n                        email: user.email,\n                        name: user.name || user.email,\n                        role: user.role\n                    };\n                    console.log(\"✅ Returning authenticated user:\", authUser);\n                    return authUser;\n                } catch (error) {\n                    console.error(\"\\uD83D\\uDCA5 Error in authorize function:\", error);\n                    return null;\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    jwt: {\n        maxAge: 30 * 24 * 60 * 60\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.sub;\n                session.user.role = token.role;\n            }\n            return session;\n        },\n        async redirect ({ url, baseUrl }) {\n            console.log(\"\\uD83D\\uDD04 NextAuth redirect callback:\", {\n                url,\n                baseUrl\n            });\n            // Handle callback URLs properly\n            if (url.startsWith(\"/\")) {\n                const fullUrl = `${baseUrl}${url}`;\n                console.log(\"\\uD83D\\uDCCD Relative URL redirect:\", fullUrl);\n                return fullUrl;\n            }\n            // If it's a callback URL, extract the actual destination\n            if (url.includes(\"callbackUrl=\")) {\n                const urlObj = new URL(url);\n                const callbackUrl = urlObj.searchParams.get(\"callbackUrl\");\n                if (callbackUrl) {\n                    const decodedCallback = decodeURIComponent(callbackUrl);\n                    console.log(\"\\uD83D\\uDCCD Decoded callback URL:\", decodedCallback);\n                    if (decodedCallback.startsWith(baseUrl)) {\n                        return decodedCallback;\n                    }\n                }\n            }\n            // Allow same origin URLs\n            if (new URL(url).origin === baseUrl) {\n                console.log(\"✅ Same origin URL allowed:\", url);\n                return url;\n            }\n            // Default to base URL\n            console.log(\"\\uD83C\\uDFE0 Defaulting to base URL:\", baseUrl);\n            return baseUrl;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    debug: \"development\" === \"development\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxHQUFHLEVBQUVDLE9BQU8sRUFBRTtZQUM3QmhDLFFBQVFDLEdBQUcsQ0FBQyw0Q0FBa0M7Z0JBQUU4QjtnQkFBS0M7WUFBUTtZQUU3RCxnQ0FBZ0M7WUFDaEMsSUFBSUQsSUFBSUUsVUFBVSxDQUFDLE1BQU07Z0JBQ3ZCLE1BQU1DLFVBQVUsQ0FBQyxFQUFFRixRQUFRLEVBQUVELElBQUksQ0FBQztnQkFDbEMvQixRQUFRQyxHQUFHLENBQUMsdUNBQTZCaUM7Z0JBQ3pDLE9BQU9BO1lBQ1Q7WUFFQSx5REFBeUQ7WUFDekQsSUFBSUgsSUFBSUksUUFBUSxDQUFDLGlCQUFpQjtnQkFDaEMsTUFBTUMsU0FBUyxJQUFJQyxJQUFJTjtnQkFDdkIsTUFBTU8sY0FBY0YsT0FBT0csWUFBWSxDQUFDQyxHQUFHLENBQUM7Z0JBQzVDLElBQUlGLGFBQWE7b0JBQ2YsTUFBTUcsa0JBQWtCQyxtQkFBbUJKO29CQUMzQ3RDLFFBQVFDLEdBQUcsQ0FBQyxzQ0FBNEJ3QztvQkFFeEMsSUFBSUEsZ0JBQWdCUixVQUFVLENBQUNELFVBQVU7d0JBQ3ZDLE9BQU9TO29CQUNUO2dCQUNGO1lBQ0Y7WUFFQSx5QkFBeUI7WUFDekIsSUFBSSxJQUFJSixJQUFJTixLQUFLWSxNQUFNLEtBQUtYLFNBQVM7Z0JBQ25DaEMsUUFBUUMsR0FBRyxDQUFDLDhCQUE4QjhCO2dCQUMxQyxPQUFPQTtZQUNUO1lBRUEsc0JBQXNCO1lBQ3RCL0IsUUFBUUMsR0FBRyxDQUFDLHdDQUE4QitCO1lBQzFDLE9BQU9BO1FBQ1Q7SUFDRjtJQUNBWSxPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUNBQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7SUFDbkNDLE9BQU9ILGtCQUF5QjtBQUNsQyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF5LW5pZ2h0LWluYy8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgZ2V0VXNlckJ5RW1haWwsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSAnLi9kYic7XG5cbmNvbnNvbGUubG9nKCfwn5SnIExvYWRpbmcgTmV4dEF1dGggY29uZmlndXJhdGlvbi4uLicpO1xuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBpZDogJ2NyZWRlbnRpYWxzJyxcbiAgICAgIG5hbWU6ICdDcmVkZW50aWFscycsXG4gICAgICB0eXBlOiAnY3JlZGVudGlhbHMnLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscywgcmVxKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIE5leHRBdXRoIGF1dGhvcml6ZSBjYWxsZWQgd2l0aDonLCB7IFxuICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscz8uZW1haWwsXG4gICAgICAgICAgaGFzUGFzc3dvcmQ6ICEhY3JlZGVudGlhbHM/LnBhc3N3b3JkLFxuICAgICAgICAgIHJlcTogISFyZXFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy5lbWFpbCB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBNaXNzaW5nIGNyZWRlbnRpYWxzJyk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIExvb2tpbmcgdXAgdXNlciBieSBlbWFpbDonLCBjcmVkZW50aWFscy5lbWFpbCk7XG4gICAgICAgICAgY29uc3QgdXNlclJlc3VsdCA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGNyZWRlbnRpYWxzLmVtYWlsKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBVc2VyIGxvb2t1cCByZXN1bHQ6JywgdXNlclJlc3VsdCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF1c2VyUmVzdWx0LnN1Y2Nlc3MgfHwgIXVzZXJSZXN1bHQuZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdXNlciA9IHVzZXJSZXN1bHQuZGF0YTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEZvdW5kIHVzZXI6JywgeyBpZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBWZXJpZnlpbmcgcGFzc3dvcmQuLi4nKTtcbiAgICAgICAgICBjb25zdCBpc1ZhbGlkUGFzc3dvcmQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChjcmVkZW50aWFscy5wYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gUGFzc3dvcmQgdmFsaWRhdGlvbiByZXN1bHQ6JywgaXNWYWxpZFBhc3N3b3JkKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBJbnZhbGlkIHBhc3N3b3JkJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBhdXRoVXNlciA9IHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBSZXR1cm5pbmcgYXV0aGVudGljYXRlZCB1c2VyOicsIGF1dGhVc2VyKTtcbiAgICAgICAgICByZXR1cm4gYXV0aFVzZXI7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign8J+SpSBFcnJvciBpbiBhdXRob3JpemUgZnVuY3Rpb246JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiAnand0JyxcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gIH0sXG4gIGp3dDoge1xuICAgIG1heEFnZTogMzAgKiAyNCAqIDYwICogNjAsIC8vIDMwIGRheXNcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4ucm9sZSA9IHVzZXIucm9sZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAodG9rZW4gJiYgc2Vzc2lvbi51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLnN1YiE7XG4gICAgICAgIHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gICAgYXN5bmMgcmVkaXJlY3QoeyB1cmwsIGJhc2VVcmwgfSkge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgTmV4dEF1dGggcmVkaXJlY3QgY2FsbGJhY2s6JywgeyB1cmwsIGJhc2VVcmwgfSk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBjYWxsYmFjayBVUkxzIHByb3Blcmx5XG4gICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxVcmwgPSBgJHtiYXNlVXJsfSR7dXJsfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5ONIFJlbGF0aXZlIFVSTCByZWRpcmVjdDonLCBmdWxsVXJsKTtcbiAgICAgICAgcmV0dXJuIGZ1bGxVcmw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIGl0J3MgYSBjYWxsYmFjayBVUkwsIGV4dHJhY3QgdGhlIGFjdHVhbCBkZXN0aW5hdGlvblxuICAgICAgaWYgKHVybC5pbmNsdWRlcygnY2FsbGJhY2tVcmw9JykpIHtcbiAgICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICBjb25zdCBjYWxsYmFja1VybCA9IHVybE9iai5zZWFyY2hQYXJhbXMuZ2V0KCdjYWxsYmFja1VybCcpO1xuICAgICAgICBpZiAoY2FsbGJhY2tVcmwpIHtcbiAgICAgICAgICBjb25zdCBkZWNvZGVkQ2FsbGJhY2sgPSBkZWNvZGVVUklDb21wb25lbnQoY2FsbGJhY2tVcmwpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5ONIERlY29kZWQgY2FsbGJhY2sgVVJMOicsIGRlY29kZWRDYWxsYmFjayk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGRlY29kZWRDYWxsYmFjay5zdGFydHNXaXRoKGJhc2VVcmwpKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlZENhbGxiYWNrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBbGxvdyBzYW1lIG9yaWdpbiBVUkxzXG4gICAgICBpZiAobmV3IFVSTCh1cmwpLm9yaWdpbiA9PT0gYmFzZVVybCkge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFNhbWUgb3JpZ2luIFVSTCBhbGxvd2VkOicsIHVybCk7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIERlZmF1bHQgdG8gYmFzZSBVUkxcbiAgICAgIGNvbnNvbGUubG9nKCfwn4+gIERlZmF1bHRpbmcgdG8gYmFzZSBVUkw6JywgYmFzZVVybCk7XG4gICAgICByZXR1cm4gYmFzZVVybDtcbiAgICB9LFxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogJy9hdXRoL3NpZ25pbicsXG4gIH0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcsXG59OyJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiZ2V0VXNlckJ5RW1haWwiLCJ2ZXJpZnlQYXNzd29yZCIsImNvbnNvbGUiLCJsb2ciLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsImlkIiwibmFtZSIsInR5cGUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsInJlcSIsImhhc1Bhc3N3b3JkIiwidXNlclJlc3VsdCIsInN1Y2Nlc3MiLCJkYXRhIiwidXNlciIsInJvbGUiLCJpc1ZhbGlkUGFzc3dvcmQiLCJhdXRoVXNlciIsInRvU3RyaW5nIiwiZXJyb3IiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJqd3QiLCJjYWxsYmFja3MiLCJ0b2tlbiIsInN1YiIsInJlZGlyZWN0IiwidXJsIiwiYmFzZVVybCIsInN0YXJ0c1dpdGgiLCJmdWxsVXJsIiwiaW5jbHVkZXMiLCJ1cmxPYmoiLCJVUkwiLCJjYWxsYmFja1VybCIsInNlYXJjaFBhcmFtcyIsImdldCIsImRlY29kZWRDYWxsYmFjayIsImRlY29kZVVSSUNvbXBvbmVudCIsIm9yaWdpbiIsInBhZ2VzIiwic2lnbkluIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsImRlYnVnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addToCart: () => (/* binding */ addToCart),\n/* harmony export */   createProduct: () => (/* binding */ createProduct),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteOrder: () => (/* binding */ deleteOrder),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   getAllOrders: () => (/* binding */ getAllOrders),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getCartItems: () => (/* binding */ getCartItems),\n/* harmony export */   getCategories: () => (/* binding */ getCategories),\n/* harmony export */   getProducts: () => (/* binding */ getProducts),\n/* harmony export */   getProductsByCategory: () => (/* binding */ getProductsByCategory),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   removeFromCart: () => (/* binding */ removeFromCart),\n/* harmony export */   searchProducts: () => (/* binding */ searchProducts),\n/* harmony export */   seedDatabase: () => (/* binding */ seedDatabase),\n/* harmony export */   updateOrderStatus: () => (/* binding */ updateOrderStatus),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/postgres */ \"(rsc)/./node_modules/@vercel/postgres/dist/index-node.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n// Check if Postgres is properly configured\nfunction checkPostgresConnection() {\n    const postgresUrl = process.env.POSTGRES_URL;\n    console.log(\"\\uD83D\\uDD0D Checking Postgres connection...\");\n    console.log(\"POSTGRES_URL exists:\", !!postgresUrl);\n    console.log(\"POSTGRES_URL is configured:\", postgresUrl && !postgresUrl.includes(\"username\") && !postgresUrl.includes(\"password\"));\n    return postgresUrl && !postgresUrl.includes(\"username\") && !postgresUrl.includes(\"password\");\n}\n// Initialize memory data for development\nasync function initializeMemoryData() {\n    console.log(\"\\uD83D\\uDE80 Initializing in-memory database...\");\n    memoryProducts = [\n        {\n            id: 1,\n            name: \"Wireless Headphones\",\n            description: \"High-quality wireless headphones with noise cancellation\",\n            price: 199.99,\n            image: \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400\",\n            category: \"Electronics\",\n            rating: 4.5,\n            reviews: 128,\n            inStock: true\n        },\n        {\n            id: 2,\n            name: \"Smart Watch\",\n            description: \"Feature-rich smartwatch with health monitoring\",\n            price: 299.99,\n            image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400\",\n            category: \"Electronics\",\n            rating: 4.3,\n            reviews: 89,\n            inStock: true\n        },\n        {\n            id: 3,\n            name: \"Laptop Backpack\",\n            description: \"Durable laptop backpack with multiple compartments\",\n            price: 79.99,\n            image: \"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400\",\n            category: \"Accessories\",\n            rating: 4.7,\n            reviews: 156,\n            inStock: true\n        }\n    ];\n    memoryCategories = [\n        {\n            id: 1,\n            name: \"Electronics\",\n            description: \"Latest gadgets and electronic devices\",\n            image: \"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400\"\n        },\n        {\n            id: 2,\n            name: \"Accessories\",\n            description: \"Essential accessories for daily use\",\n            image: \"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400\"\n        },\n        {\n            id: 3,\n            name: \"Home & Garden\",\n            description: \"Everything for your home and garden\",\n            image: \"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400\"\n        }\n    ];\n    // Create default admin user for development\n    const adminPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(\"admin123\", 10);\n    memoryUsers = [\n        {\n            id: 1,\n            email: \"admin@example.com\",\n            name: \"Admin User\",\n            password: adminPassword,\n            role: \"admin\",\n            createdAt: new Date()\n        },\n        {\n            id: 2,\n            email: \"user@example.com\",\n            name: \"Regular User\",\n            password: await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(\"user123\", 10),\n            role: \"user\",\n            createdAt: new Date()\n        }\n    ];\n    console.log(\"✅ In-memory database initialized with admin user: admin@example.com\");\n}\n// For development, we'll use a simple in-memory fallback when Postgres is not available\nlet isPostgresAvailable = checkPostgresConnection();\n// Simple in-memory storage for development\nlet memoryProducts = [];\nlet memoryCategories = [];\nlet memoryUsers = [];\nlet memoryCartItems = [];\n// Track initialization status\nlet memoryInitialized = false;\nlet initializationPromise = null;\n// Initialize memory data immediately if Postgres is not available\nif (!isPostgresAvailable) {\n    initializationPromise = initializeMemoryData().then(()=>{\n        memoryInitialized = true;\n        console.log(\"In-memory database initialized successfully\");\n    }).catch((error)=>{\n        console.error(\"Failed to initialize in-memory database:\", error);\n    });\n}\n// Ensure initialization is complete before any database operations\nasync function ensureMemoryInitialized() {\n    if (!isPostgresAvailable && !memoryInitialized) {\n        if (initializationPromise) {\n            await initializationPromise;\n        } else {\n            await initializeMemoryData();\n            memoryInitialized = true;\n        }\n    }\n}\n// Initialize database tables\nasync function initializeDatabase() {\n    // Check if Postgres is properly configured\n    if (!isPostgresAvailable) {\n        console.log(\"Postgres not configured, using in-memory storage for development\");\n        // Initialize with sample data\n        initializeMemoryData();\n        return {\n            success: true\n        };\n    }\n    try {\n        // Create products table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS products (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        description TEXT,\n        price DECIMAL(10, 2) NOT NULL,\n        image VARCHAR(500),\n        category VARCHAR(100),\n        rating DECIMAL(2, 1) DEFAULT 0,\n        reviews INTEGER DEFAULT 0,\n        in_stock BOOLEAN DEFAULT true,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create categories table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS categories (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL UNIQUE,\n        description TEXT,\n        image VARCHAR(500),\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create users table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS users (\n        id SERIAL PRIMARY KEY,\n        email VARCHAR(255) NOT NULL UNIQUE,\n        name VARCHAR(255) NOT NULL,\n        password VARCHAR(255) NOT NULL,\n        role VARCHAR(20) DEFAULT 'user',\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create cart_items table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS cart_items (\n        id SERIAL PRIMARY KEY,\n        user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n        product_id INTEGER REFERENCES products(id) ON DELETE CASCADE,\n        quantity INTEGER NOT NULL DEFAULT 1,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        // Create orders table\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      CREATE TABLE IF NOT EXISTS orders (\n        id SERIAL PRIMARY KEY,\n        user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,\n        total DECIMAL(10, 2) NOT NULL,\n        status VARCHAR(20) DEFAULT 'pending',\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    `;\n        console.log(\"Database tables initialized successfully\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error initializing database:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Seed initial data\nasync function seedDatabase() {\n    try {\n        // Insert sample categories\n        const categories = [\n            {\n                name: \"Electronics\",\n                description: \"Latest gadgets and electronic devices\",\n                image: \"https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400\"\n            },\n            {\n                name: \"Clothing\",\n                description: \"Fashion and apparel for all occasions\",\n                image: \"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400\"\n            },\n            {\n                name: \"Home & Garden\",\n                description: \"Everything for your home and garden\",\n                image: \"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400\"\n            },\n            {\n                name: \"Sports\",\n                description: \"Sports equipment and fitness gear\",\n                image: \"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400\"\n            }\n        ];\n        for (const category of categories){\n            await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n        INSERT INTO categories (name, description, image)\n        VALUES (${category.name}, ${category.description}, ${category.image})\n        ON CONFLICT (name) DO NOTHING\n      `;\n        }\n        // Insert sample products\n        const products = [\n            {\n                name: \"Wireless Headphones\",\n                description: \"High-quality wireless headphones with noise cancellation\",\n                price: 199.99,\n                image: \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400\",\n                category: \"Electronics\",\n                rating: 4.5,\n                reviews: 128\n            },\n            {\n                name: \"Smart Watch\",\n                description: \"Feature-rich smartwatch with health monitoring\",\n                price: 299.99,\n                image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400\",\n                category: \"Electronics\",\n                rating: 4.3,\n                reviews: 89\n            },\n            {\n                name: \"Designer T-Shirt\",\n                description: \"Premium cotton t-shirt with modern design\",\n                price: 49.99,\n                image: \"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400\",\n                category: \"Clothing\",\n                rating: 4.7,\n                reviews: 203\n            },\n            {\n                name: \"Running Shoes\",\n                description: \"Comfortable running shoes for all terrains\",\n                price: 129.99,\n                image: \"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400\",\n                category: \"Sports\",\n                rating: 4.6,\n                reviews: 156\n            },\n            {\n                name: \"Coffee Maker\",\n                description: \"Automatic coffee maker with programmable settings\",\n                price: 89.99,\n                image: \"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=400\",\n                category: \"Home & Garden\",\n                rating: 4.4,\n                reviews: 74\n            },\n            {\n                name: \"Yoga Mat\",\n                description: \"Non-slip yoga mat for comfortable workouts\",\n                price: 39.99,\n                image: \"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=400\",\n                category: \"Sports\",\n                rating: 4.8,\n                reviews: 312\n            }\n        ];\n        for (const product of products){\n            await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n        INSERT INTO products (name, description, price, image, category, rating, reviews)\n        VALUES (${product.name}, ${product.description}, ${product.price}, ${product.image}, ${product.category}, ${product.rating}, ${product.reviews})\n        ON CONFLICT DO NOTHING\n      `;\n        }\n        // Create default admin user\n        const adminPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(\"admin123\", 10);\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO users (email, name, password, role)\n      VALUES ('admin@daynnight.com', 'Admin User', ${adminPassword}, 'admin')\n      ON CONFLICT (email) DO NOTHING\n    `;\n        console.log(\"Database seeded successfully\");\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error seeding database:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Get all products\nasync function getProducts() {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        return {\n            success: true,\n            data: memoryProducts\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM products \n      ORDER BY created_at DESC\n    `;\n        // Convert price from string to number (PostgreSQL DECIMAL returns as string)\n        const products = rows.map((row)=>({\n                ...row,\n                price: parseFloat(row.price),\n                rating: parseFloat(row.rating)\n            }));\n        return {\n            success: true,\n            data: products\n        };\n    } catch (error) {\n        console.error(\"Error fetching products:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Get all categories\nasync function getCategories() {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        return {\n            success: true,\n            data: memoryCategories\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM categories \n      ORDER BY name ASC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching categories:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Get products by category\nasync function getProductsByCategory(category) {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        return {\n            success: true,\n            data: memoryProducts.filter((p)=>p.category.toLowerCase() === category.toLowerCase())\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM products \n      WHERE LOWER(category) = LOWER(${category})\n      ORDER BY created_at DESC\n    `;\n        // Convert price from string to number (PostgreSQL DECIMAL returns as string)\n        const products = rows.map((row)=>({\n                ...row,\n                price: parseFloat(row.price),\n                rating: parseFloat(row.rating)\n            }));\n        return {\n            success: true,\n            data: products\n        };\n    } catch (error) {\n        console.error(\"Error fetching products by category:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Search products\nasync function searchProducts(query) {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        return {\n            success: true,\n            data: memoryProducts.filter((p)=>p.name.toLowerCase().includes(query.toLowerCase()) || p.description.toLowerCase().includes(query.toLowerCase()) || p.category.toLowerCase().includes(query.toLowerCase()))\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM products \n      WHERE name ILIKE ${`%${query}%`} \n         OR description ILIKE ${`%${query}%`}\n         OR category ILIKE ${`%${query}%`}\n      ORDER BY created_at DESC\n    `;\n        // Convert price from string to number (PostgreSQL DECIMAL returns as string)\n        const products = rows.map((row)=>({\n                ...row,\n                price: parseFloat(row.price),\n                rating: parseFloat(row.rating)\n            }));\n        return {\n            success: true,\n            data: products\n        };\n    } catch (error) {\n        console.error(\"Error searching products:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// User authentication functions\nasync function createUser(email, name, password) {\n    // Check if Postgres is available\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        // Use in-memory storage for development\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 10);\n        // Check if user already exists\n        const existingUser = memoryUsers.find((user)=>user.email === email);\n        if (existingUser) {\n            return {\n                success: false,\n                error: \"User already exists\"\n            };\n        }\n        const newUser = {\n            id: memoryUsers.length + 1,\n            email,\n            name,\n            password: hashedPassword,\n            role: \"user\",\n            createdAt: new Date()\n        };\n        memoryUsers.push(newUser);\n        // Return user without password\n        const { password: _, ...userWithoutPassword } = newUser;\n        return {\n            success: true,\n            data: userWithoutPassword\n        };\n    }\n    try {\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 10);\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO users (email, name, password, role)\n      VALUES (${email}, ${name}, ${hashedPassword}, 'user')\n      RETURNING id, email, name, role, created_at\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error creating user:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function getUserByEmail(email) {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        const user = memoryUsers.find((u)=>u.email === email);\n        if (user) {\n            return {\n                success: true,\n                data: {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    password: user.password,\n                    role: user.role,\n                    created_at: user.createdAt\n                }\n            };\n        }\n        return {\n            success: true,\n            data: null\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT * FROM users WHERE email = ${email}\n    `;\n        return {\n            success: true,\n            data: rows[0] || null\n        };\n    } catch (error) {\n        console.error(\"Error fetching user by email, falling back to memory:\", error);\n        // Fallback to in-memory storage\n        await ensureMemoryInitialized();\n        const user = memoryUsers.find((u)=>u.email === email);\n        if (user) {\n            return {\n                success: true,\n                data: {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    password: user.password,\n                    role: user.role,\n                    created_at: user.createdAt\n                }\n            };\n        }\n        return {\n            success: true,\n            data: null\n        };\n    }\n}\nasync function verifyPassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(password, hashedPassword);\n}\n// Cart functions\nasync function addToCart(userEmail, productId, quantity = 1) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO cart_items (user_id, product_id, quantity)\n      VALUES (\n        (SELECT id FROM users WHERE email = ${userEmail}), \n        ${productId}, \n        ${quantity}\n      )\n      ON CONFLICT (user_id, product_id) \n      DO UPDATE SET quantity = cart_items.quantity + ${quantity}\n      RETURNING *\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error adding to cart:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function getCartItems(userEmail) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT ci.id, ci.product_id as \"productId\", ci.quantity, \n             json_build_object(\n               'id', p.id,\n               'name', p.name,\n               'price', p.price,\n               'image', p.image\n             ) as product\n      FROM cart_items ci\n      JOIN products p ON ci.product_id = p.id\n      JOIN users u ON ci.user_id = u.id\n      WHERE u.email = ${userEmail}\n      ORDER BY ci.created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching cart items:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function removeFromCart(userEmail, productId) {\n    try {\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      DELETE FROM cart_items \n      WHERE user_id = (SELECT id FROM users WHERE email = ${userEmail}) \n      AND product_id = ${productId}\n    `;\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error removing from cart:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Admin functions\nasync function getAllUsers() {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT id, email, name, role, created_at FROM users\n      ORDER BY created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching users:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function createProduct(product) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      INSERT INTO products (name, description, price, image, category, rating, reviews)\n      VALUES (${product.name}, ${product.description}, ${product.price}, ${product.image}, ${product.category}, ${product.rating}, ${product.reviews})\n      RETURNING *\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error creating product:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function updateProduct(id, product) {\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      UPDATE products \n      SET name = COALESCE(${product.name}, name),\n          description = COALESCE(${product.description}, description),\n          price = COALESCE(${product.price}, price),\n          image = COALESCE(${product.image}, image),\n          category = COALESCE(${product.category}, category),\n          rating = COALESCE(${product.rating}, rating),\n          reviews = COALESCE(${product.reviews}, reviews),\n          in_stock = COALESCE(${product.inStock}, in_stock)\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error updating product:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function deleteProduct(id) {\n    try {\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`DELETE FROM products WHERE id = ${id}`;\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error deleting product:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function updateUser(id, updates) {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        // Memory fallback\n        const userIndex = memoryUsers.findIndex((user)=>user.id === id);\n        if (userIndex === -1) {\n            return {\n                success: false,\n                error: \"User not found\"\n            };\n        }\n        memoryUsers[userIndex] = {\n            ...memoryUsers[userIndex],\n            ...updates\n        };\n        return {\n            success: true,\n            data: memoryUsers[userIndex]\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      UPDATE users \n      SET name = COALESCE(${updates.name}, name),\n          email = COALESCE(${updates.email}, email),\n          role = COALESCE(${updates.role}, role)\n      WHERE id = ${id}\n      RETURNING id, email, name, role, created_at\n    `;\n        if (rows.length === 0) {\n            return {\n                success: false,\n                error: \"User not found\"\n            };\n        }\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error updating user:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function deleteUser(id) {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        // Memory fallback\n        const userIndex = memoryUsers.findIndex((user)=>user.id === id);\n        if (userIndex === -1) {\n            return {\n                success: false,\n                error: \"User not found\"\n            };\n        }\n        memoryUsers.splice(userIndex, 1);\n        return {\n            success: true\n        };\n    }\n    try {\n        const { rowCount } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`DELETE FROM users WHERE id = ${id}`;\n        if (rowCount === 0) {\n            return {\n                success: false,\n                error: \"User not found\"\n            };\n        }\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error deleting user:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Order management functions\nlet memoryOrders = [];\nasync function getAllOrders() {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        // Memory fallback with sample orders\n        if (memoryOrders.length === 0) {\n            memoryOrders = [\n                {\n                    id: 1,\n                    userId: 1,\n                    total: 299.99,\n                    status: \"delivered\",\n                    createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000) // 7 days ago\n                },\n                {\n                    id: 2,\n                    userId: 1,\n                    total: 149.99,\n                    status: \"shipped\",\n                    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000) // 3 days ago\n                },\n                {\n                    id: 3,\n                    userId: 1,\n                    total: 79.99,\n                    status: \"processing\",\n                    createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000) // 1 day ago\n                },\n                {\n                    id: 4,\n                    userId: 1,\n                    total: 199.99,\n                    status: \"pending\",\n                    createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000) // 2 hours ago\n                }\n            ];\n        }\n        return {\n            success: true,\n            data: memoryOrders\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      SELECT o.*, u.name as user_name, u.email as user_email\n      FROM orders o\n      JOIN users u ON o.user_id = u.id\n      ORDER BY o.created_at DESC\n    `;\n        return {\n            success: true,\n            data: rows\n        };\n    } catch (error) {\n        console.error(\"Error fetching orders:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function updateOrderStatus(id, status) {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        // Memory fallback\n        const orderIndex = memoryOrders.findIndex((order)=>order.id === id);\n        if (orderIndex === -1) {\n            return {\n                success: false,\n                error: \"Order not found\"\n            };\n        }\n        memoryOrders[orderIndex].status = status;\n        return {\n            success: true,\n            data: memoryOrders[orderIndex]\n        };\n    }\n    try {\n        const { rows } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`\n      UPDATE orders \n      SET status = ${status}\n      WHERE id = ${id}\n      RETURNING *\n    `;\n        if (rows.length === 0) {\n            return {\n                success: false,\n                error: \"Order not found\"\n            };\n        }\n        return {\n            success: true,\n            data: rows[0]\n        };\n    } catch (error) {\n        console.error(\"Error updating order status:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nasync function deleteOrder(id) {\n    if (!isPostgresAvailable) {\n        await ensureMemoryInitialized();\n        // Memory fallback\n        const orderIndex = memoryOrders.findIndex((order)=>order.id === id);\n        if (orderIndex === -1) {\n            return {\n                success: false,\n                error: \"Order not found\"\n            };\n        }\n        memoryOrders.splice(orderIndex, 1);\n        return {\n            success: true\n        };\n    }\n    try {\n        const { rowCount } = await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`DELETE FROM orders WHERE id = ${id}`;\n        if (rowCount === 0) {\n            return {\n                success: false,\n                error: \"Order not found\"\n            };\n        }\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error deleting order:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFDVDtBQUU5QiwyQ0FBMkM7QUFDM0MsU0FBU0U7SUFDUCxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7SUFDNUNDLFFBQVFDLEdBQUcsQ0FBQztJQUNaRCxRQUFRQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsQ0FBQ0w7SUFDdENJLFFBQVFDLEdBQUcsQ0FBQywrQkFBK0JMLGVBQWUsQ0FBQ0EsWUFBWU0sUUFBUSxDQUFDLGVBQWUsQ0FBQ04sWUFBWU0sUUFBUSxDQUFDO0lBRXJILE9BQU9OLGVBQWUsQ0FBQ0EsWUFBWU0sUUFBUSxDQUFDLGVBQWUsQ0FBQ04sWUFBWU0sUUFBUSxDQUFDO0FBQ25GO0FBRUEseUNBQXlDO0FBQ3pDLGVBQWVDO0lBQ2JILFFBQVFDLEdBQUcsQ0FBQztJQUVaRyxpQkFBaUI7UUFDZjtZQUNFQyxJQUFJO1lBQ0pDLE1BQU07WUFDTkMsYUFBYTtZQUNiQyxPQUFPO1lBQ1BDLE9BQU87WUFDUEMsVUFBVTtZQUNWQyxRQUFRO1lBQ1JDLFNBQVM7WUFDVEMsU0FBUztRQUNYO1FBQ0E7WUFDRVIsSUFBSTtZQUNKQyxNQUFNO1lBQ05DLGFBQWE7WUFDYkMsT0FBTztZQUNQQyxPQUFPO1lBQ1BDLFVBQVU7WUFDVkMsUUFBUTtZQUNSQyxTQUFTO1lBQ1RDLFNBQVM7UUFDWDtRQUNBO1lBQ0VSLElBQUk7WUFDSkMsTUFBTTtZQUNOQyxhQUFhO1lBQ2JDLE9BQU87WUFDUEMsT0FBTztZQUNQQyxVQUFVO1lBQ1ZDLFFBQVE7WUFDUkMsU0FBUztZQUNUQyxTQUFTO1FBQ1g7S0FDRDtJQUVEQyxtQkFBbUI7UUFDakI7WUFDRVQsSUFBSTtZQUNKQyxNQUFNO1lBQ05DLGFBQWE7WUFDYkUsT0FBTztRQUNUO1FBQ0E7WUFDRUosSUFBSTtZQUNKQyxNQUFNO1lBQ05DLGFBQWE7WUFDYkUsT0FBTztRQUNUO1FBQ0E7WUFDRUosSUFBSTtZQUNKQyxNQUFNO1lBQ05DLGFBQWE7WUFDYkUsT0FBTztRQUNUO0tBQ0Q7SUFFRCw0Q0FBNEM7SUFDNUMsTUFBTU0sZ0JBQWdCLE1BQU1yQixxREFBVyxDQUFDLFlBQVk7SUFDcER1QixjQUFjO1FBQ1o7WUFDRVosSUFBSTtZQUNKYSxPQUFPO1lBQ1BaLE1BQU07WUFDTmEsVUFBVUo7WUFDVkssTUFBTTtZQUNOQyxXQUFXLElBQUlDO1FBQ2pCO1FBQ0E7WUFDRWpCLElBQUk7WUFDSmEsT0FBTztZQUNQWixNQUFNO1lBQ05hLFVBQVUsTUFBTXpCLHFEQUFXLENBQUMsV0FBVztZQUN2QzBCLE1BQU07WUFDTkMsV0FBVyxJQUFJQztRQUNqQjtLQUNEO0lBRUR0QixRQUFRQyxHQUFHLENBQUM7QUFDZDtBQUVBLHdGQUF3RjtBQUN4RixJQUFJc0Isc0JBQXNCNUI7QUFFMUIsMkNBQTJDO0FBQzNDLElBQUlTLGlCQUE0QixFQUFFO0FBQ2xDLElBQUlVLG1CQUErQixFQUFFO0FBQ3JDLElBQUlHLGNBQXNCLEVBQUU7QUFDNUIsSUFBSU8sa0JBQThCLEVBQUU7QUFFcEMsOEJBQThCO0FBQzlCLElBQUlDLG9CQUFvQjtBQUN4QixJQUFJQyx3QkFBOEM7QUFFbEQsa0VBQWtFO0FBQ2xFLElBQUksQ0FBQ0gscUJBQXFCO0lBQ3hCRyx3QkFBd0J2Qix1QkFBdUJ3QixJQUFJLENBQUM7UUFDbERGLG9CQUFvQjtRQUNwQnpCLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEdBQUcyQixLQUFLLENBQUNDLENBQUFBO1FBQ1A3QixRQUFRNkIsS0FBSyxDQUFDLDRDQUE0Q0E7SUFDNUQ7QUFDRjtBQUVBLG1FQUFtRTtBQUNuRSxlQUFlQztJQUNiLElBQUksQ0FBQ1AsdUJBQXVCLENBQUNFLG1CQUFtQjtRQUM5QyxJQUFJQyx1QkFBdUI7WUFDekIsTUFBTUE7UUFDUixPQUFPO1lBQ0wsTUFBTXZCO1lBQ05zQixvQkFBb0I7UUFDdEI7SUFDRjtBQUNGO0FBOENBLDZCQUE2QjtBQUN0QixlQUFlTTtJQUNwQiwyQ0FBMkM7SUFDM0MsSUFBSSxDQUFDUixxQkFBcUI7UUFDeEJ2QixRQUFRQyxHQUFHLENBQUM7UUFDWiw4QkFBOEI7UUFDOUJFO1FBQ0EsT0FBTztZQUFFNkIsU0FBUztRQUFLO0lBQ3pCO0lBRUEsSUFBSTtRQUNGLHdCQUF3QjtRQUN4QixNQUFNdkMsaURBQUcsQ0FBQzs7Ozs7Ozs7Ozs7OztJQWFWLENBQUM7UUFFRCwwQkFBMEI7UUFDMUIsTUFBTUEsaURBQUcsQ0FBQzs7Ozs7Ozs7SUFRVixDQUFDO1FBRUQscUJBQXFCO1FBQ3JCLE1BQU1BLGlEQUFHLENBQUM7Ozs7Ozs7OztJQVNWLENBQUM7UUFFRCwwQkFBMEI7UUFDMUIsTUFBTUEsaURBQUcsQ0FBQzs7Ozs7Ozs7SUFRVixDQUFDO1FBRUQsc0JBQXNCO1FBQ3RCLE1BQU1BLGlEQUFHLENBQUM7Ozs7Ozs7O0lBUVYsQ0FBQztRQUVETyxRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPO1lBQUUrQixTQUFTO1FBQUs7SUFDekIsRUFBRSxPQUFPSCxPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVBLG9CQUFvQjtBQUNiLGVBQWVJO0lBQ3BCLElBQUk7UUFDRiwyQkFBMkI7UUFDM0IsTUFBTUMsYUFBYTtZQUNqQjtnQkFDRTVCLE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JFLE9BQU87WUFDVDtZQUNBO2dCQUNFSCxNQUFNO2dCQUNOQyxhQUFhO2dCQUNiRSxPQUFPO1lBQ1Q7WUFDQTtnQkFDRUgsTUFBTTtnQkFDTkMsYUFBYTtnQkFDYkUsT0FBTztZQUNUO1lBQ0E7Z0JBQ0VILE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JFLE9BQU87WUFDVDtTQUNEO1FBRUQsS0FBSyxNQUFNQyxZQUFZd0IsV0FBWTtZQUNqQyxNQUFNekMsaURBQUcsQ0FBQzs7Z0JBRUEsRUFBRWlCLFNBQVNKLElBQUksQ0FBQyxFQUFFLEVBQUVJLFNBQVNILFdBQVcsQ0FBQyxFQUFFLEVBQUVHLFNBQVNELEtBQUssQ0FBQzs7TUFFdEUsQ0FBQztRQUNIO1FBRUEseUJBQXlCO1FBQ3pCLE1BQU0wQixXQUFXO1lBQ2Y7Z0JBQ0U3QixNQUFNO2dCQUNOQyxhQUFhO2dCQUNiQyxPQUFPO2dCQUNQQyxPQUFPO2dCQUNQQyxVQUFVO2dCQUNWQyxRQUFRO2dCQUNSQyxTQUFTO1lBQ1g7WUFDQTtnQkFDRU4sTUFBTTtnQkFDTkMsYUFBYTtnQkFDYkMsT0FBTztnQkFDUEMsT0FBTztnQkFDUEMsVUFBVTtnQkFDVkMsUUFBUTtnQkFDUkMsU0FBUztZQUNYO1lBQ0E7Z0JBQ0VOLE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JDLE9BQU87Z0JBQ1BDLE9BQU87Z0JBQ1BDLFVBQVU7Z0JBQ1ZDLFFBQVE7Z0JBQ1JDLFNBQVM7WUFDWDtZQUNBO2dCQUNFTixNQUFNO2dCQUNOQyxhQUFhO2dCQUNiQyxPQUFPO2dCQUNQQyxPQUFPO2dCQUNQQyxVQUFVO2dCQUNWQyxRQUFRO2dCQUNSQyxTQUFTO1lBQ1g7WUFDQTtnQkFDRU4sTUFBTTtnQkFDTkMsYUFBYTtnQkFDYkMsT0FBTztnQkFDUEMsT0FBTztnQkFDUEMsVUFBVTtnQkFDVkMsUUFBUTtnQkFDUkMsU0FBUztZQUNYO1lBQ0E7Z0JBQ0VOLE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JDLE9BQU87Z0JBQ1BDLE9BQU87Z0JBQ1BDLFVBQVU7Z0JBQ1ZDLFFBQVE7Z0JBQ1JDLFNBQVM7WUFDWDtTQUNEO1FBRUQsS0FBSyxNQUFNd0IsV0FBV0QsU0FBVTtZQUM5QixNQUFNMUMsaURBQUcsQ0FBQzs7Z0JBRUEsRUFBRTJDLFFBQVE5QixJQUFJLENBQUMsRUFBRSxFQUFFOEIsUUFBUTdCLFdBQVcsQ0FBQyxFQUFFLEVBQUU2QixRQUFRNUIsS0FBSyxDQUFDLEVBQUUsRUFBRTRCLFFBQVEzQixLQUFLLENBQUMsRUFBRSxFQUFFMkIsUUFBUTFCLFFBQVEsQ0FBQyxFQUFFLEVBQUUwQixRQUFRekIsTUFBTSxDQUFDLEVBQUUsRUFBRXlCLFFBQVF4QixPQUFPLENBQUM7O01BRWpKLENBQUM7UUFDSDtRQUVBLDRCQUE0QjtRQUM1QixNQUFNRyxnQkFBZ0IsTUFBTXJCLHFEQUFXLENBQUMsWUFBWTtRQUNwRCxNQUFNRCxpREFBRyxDQUFDOzttREFFcUMsRUFBRXNCLGNBQWM7O0lBRS9ELENBQUM7UUFFRGYsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBTztZQUFFK0IsU0FBUztRQUFLO0lBQ3pCLEVBQUUsT0FBT0gsT0FBTztRQUNkN0IsUUFBUTZCLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU87WUFBRUcsU0FBUztZQUFPSDtRQUFNO0lBQ2pDO0FBQ0Y7QUFFQSxtQkFBbUI7QUFDWixlQUFlUTtJQUNwQixJQUFJLENBQUNkLHFCQUFxQjtRQUN4QixNQUFNTztRQUNOLE9BQU87WUFBRUUsU0FBUztZQUFNTSxNQUFNbEM7UUFBZTtJQUMvQztJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVtQyxJQUFJLEVBQUUsR0FBRyxNQUFNOUMsaURBQUcsQ0FBQzs7O0lBRzNCLENBQUM7UUFFRCw2RUFBNkU7UUFDN0UsTUFBTTBDLFdBQVdJLEtBQUtDLEdBQUcsQ0FBQ0MsQ0FBQUEsTUFBUTtnQkFDaEMsR0FBR0EsR0FBRztnQkFDTmpDLE9BQU9rQyxXQUFXRCxJQUFJakMsS0FBSztnQkFDM0JHLFFBQVErQixXQUFXRCxJQUFJOUIsTUFBTTtZQUMvQjtRQUVBLE9BQU87WUFBRXFCLFNBQVM7WUFBTU0sTUFBTUg7UUFBUztJQUN6QyxFQUFFLE9BQU9OLE9BQU87UUFDZDdCLFFBQVE2QixLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPO1lBQUVHLFNBQVM7WUFBT0g7UUFBTTtJQUNqQztBQUNGO0FBRUEscUJBQXFCO0FBQ2QsZUFBZWM7SUFDcEIsSUFBSSxDQUFDcEIscUJBQXFCO1FBQ3hCLE1BQU1PO1FBQ04sT0FBTztZQUFFRSxTQUFTO1lBQU1NLE1BQU14QjtRQUFpQjtJQUNqRDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUV5QixJQUFJLEVBQUUsR0FBRyxNQUFNOUMsaURBQUcsQ0FBQzs7O0lBRzNCLENBQUM7UUFDRCxPQUFPO1lBQUV1QyxTQUFTO1lBQU1NLE1BQU1DO1FBQUs7SUFDckMsRUFBRSxPQUFPVixPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVBLDJCQUEyQjtBQUNwQixlQUFlZSxzQkFBc0JsQyxRQUFnQjtJQUMxRCxJQUFJLENBQUNhLHFCQUFxQjtRQUN4QixNQUFNTztRQUNOLE9BQU87WUFBRUUsU0FBUztZQUFNTSxNQUFNbEMsZUFBZXlDLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRXBDLFFBQVEsQ0FBQ3FDLFdBQVcsT0FBT3JDLFNBQVNxQyxXQUFXO1FBQUk7SUFDaEg7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFUixJQUFJLEVBQUUsR0FBRyxNQUFNOUMsaURBQUcsQ0FBQzs7b0NBRUssRUFBRWlCLFNBQVM7O0lBRTNDLENBQUM7UUFFRCw2RUFBNkU7UUFDN0UsTUFBTXlCLFdBQVdJLEtBQUtDLEdBQUcsQ0FBQ0MsQ0FBQUEsTUFBUTtnQkFDaEMsR0FBR0EsR0FBRztnQkFDTmpDLE9BQU9rQyxXQUFXRCxJQUFJakMsS0FBSztnQkFDM0JHLFFBQVErQixXQUFXRCxJQUFJOUIsTUFBTTtZQUMvQjtRQUVBLE9BQU87WUFBRXFCLFNBQVM7WUFBTU0sTUFBTUg7UUFBUztJQUN6QyxFQUFFLE9BQU9OLE9BQU87UUFDZDdCLFFBQVE2QixLQUFLLENBQUMsd0NBQXdDQTtRQUN0RCxPQUFPO1lBQUVHLFNBQVM7WUFBT0g7UUFBTTtJQUNqQztBQUNGO0FBRUEsa0JBQWtCO0FBQ1gsZUFBZW1CLGVBQWVDLEtBQWE7SUFDaEQsSUFBSSxDQUFDMUIscUJBQXFCO1FBQ3hCLE1BQU1PO1FBQ04sT0FBTztZQUNMRSxTQUFTO1lBQ1RNLE1BQU1sQyxlQUFleUMsTUFBTSxDQUFDQyxDQUFBQSxJQUMxQkEsRUFBRXhDLElBQUksQ0FBQ3lDLFdBQVcsR0FBRzdDLFFBQVEsQ0FBQytDLE1BQU1GLFdBQVcsT0FDL0NELEVBQUV2QyxXQUFXLENBQUN3QyxXQUFXLEdBQUc3QyxRQUFRLENBQUMrQyxNQUFNRixXQUFXLE9BQ3RERCxFQUFFcEMsUUFBUSxDQUFDcUMsV0FBVyxHQUFHN0MsUUFBUSxDQUFDK0MsTUFBTUYsV0FBVztRQUV2RDtJQUNGO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRVIsSUFBSSxFQUFFLEdBQUcsTUFBTTlDLGlEQUFHLENBQUM7O3VCQUVSLEVBQUUsQ0FBQyxDQUFDLEVBQUV3RCxNQUFNLENBQUMsQ0FBQyxDQUFDOzhCQUNSLEVBQUUsQ0FBQyxDQUFDLEVBQUVBLE1BQU0sQ0FBQyxDQUFDLENBQUM7MkJBQ2xCLEVBQUUsQ0FBQyxDQUFDLEVBQUVBLE1BQU0sQ0FBQyxDQUFDLENBQUM7O0lBRXRDLENBQUM7UUFFRCw2RUFBNkU7UUFDN0UsTUFBTWQsV0FBV0ksS0FBS0MsR0FBRyxDQUFDQyxDQUFBQSxNQUFRO2dCQUNoQyxHQUFHQSxHQUFHO2dCQUNOakMsT0FBT2tDLFdBQVdELElBQUlqQyxLQUFLO2dCQUMzQkcsUUFBUStCLFdBQVdELElBQUk5QixNQUFNO1lBQy9CO1FBRUEsT0FBTztZQUFFcUIsU0FBUztZQUFNTSxNQUFNSDtRQUFTO0lBQ3pDLEVBQUUsT0FBT04sT0FBTztRQUNkN0IsUUFBUTZCLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU87WUFBRUcsU0FBUztZQUFPSDtRQUFNO0lBQ2pDO0FBQ0Y7QUFFQSxnQ0FBZ0M7QUFDekIsZUFBZXFCLFdBQVdoQyxLQUFhLEVBQUVaLElBQVksRUFBRWEsUUFBZ0I7SUFDNUUsaUNBQWlDO0lBQ2pDLElBQUksQ0FBQ0kscUJBQXFCO1FBQ3hCLE1BQU1PO1FBQ04sd0NBQXdDO1FBQ3hDLE1BQU1xQixpQkFBaUIsTUFBTXpELHFEQUFXLENBQUN5QixVQUFVO1FBRW5ELCtCQUErQjtRQUMvQixNQUFNaUMsZUFBZW5DLFlBQVlvQyxJQUFJLENBQUNDLENBQUFBLE9BQVFBLEtBQUtwQyxLQUFLLEtBQUtBO1FBQzdELElBQUlrQyxjQUFjO1lBQ2hCLE9BQU87Z0JBQUVwQixTQUFTO2dCQUFPSCxPQUFPO1lBQXNCO1FBQ3hEO1FBRUEsTUFBTTBCLFVBQVU7WUFDZGxELElBQUlZLFlBQVl1QyxNQUFNLEdBQUc7WUFDekJ0QztZQUNBWjtZQUNBYSxVQUFVZ0M7WUFDVi9CLE1BQU07WUFDTkMsV0FBVyxJQUFJQztRQUNqQjtRQUVBTCxZQUFZd0MsSUFBSSxDQUFDRjtRQUVqQiwrQkFBK0I7UUFDL0IsTUFBTSxFQUFFcEMsVUFBVXVDLENBQUMsRUFBRSxHQUFHQyxxQkFBcUIsR0FBR0o7UUFDaEQsT0FBTztZQUFFdkIsU0FBUztZQUFNTSxNQUFNcUI7UUFBb0I7SUFDcEQ7SUFFQSxJQUFJO1FBQ0YsTUFBTVIsaUJBQWlCLE1BQU16RCxxREFBVyxDQUFDeUIsVUFBVTtRQUNuRCxNQUFNLEVBQUVvQixJQUFJLEVBQUUsR0FBRyxNQUFNOUMsaURBQUcsQ0FBQzs7Y0FFakIsRUFBRXlCLE1BQU0sRUFBRSxFQUFFWixLQUFLLEVBQUUsRUFBRTZDLGVBQWU7O0lBRTlDLENBQUM7UUFDRCxPQUFPO1lBQUVuQixTQUFTO1lBQU1NLE1BQU1DLElBQUksQ0FBQyxFQUFFO1FBQUM7SUFDeEMsRUFBRSxPQUFPVixPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVPLGVBQWUrQixlQUFlMUMsS0FBYTtJQUNoRCxJQUFJLENBQUNLLHFCQUFxQjtRQUN4QixNQUFNTztRQUNOLE1BQU13QixPQUFPckMsWUFBWW9DLElBQUksQ0FBQ1EsQ0FBQUEsSUFBS0EsRUFBRTNDLEtBQUssS0FBS0E7UUFDL0MsSUFBSW9DLE1BQU07WUFDUixPQUFPO2dCQUNMdEIsU0FBUztnQkFDVE0sTUFBTTtvQkFDSmpDLElBQUlpRCxLQUFLakQsRUFBRTtvQkFDWGEsT0FBT29DLEtBQUtwQyxLQUFLO29CQUNqQlosTUFBTWdELEtBQUtoRCxJQUFJO29CQUNmYSxVQUFVbUMsS0FBS25DLFFBQVE7b0JBQ3ZCQyxNQUFNa0MsS0FBS2xDLElBQUk7b0JBQ2YwQyxZQUFZUixLQUFLakMsU0FBUztnQkFDNUI7WUFDRjtRQUNGO1FBQ0EsT0FBTztZQUFFVyxTQUFTO1lBQU1NLE1BQU07UUFBSztJQUNyQztJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHLE1BQU05QyxpREFBRyxDQUFDO3dDQUNTLEVBQUV5QixNQUFNO0lBQzVDLENBQUM7UUFDRCxPQUFPO1lBQUVjLFNBQVM7WUFBTU0sTUFBTUMsSUFBSSxDQUFDLEVBQUUsSUFBSTtRQUFLO0lBQ2hELEVBQUUsT0FBT1YsT0FBTztRQUNkN0IsUUFBUTZCLEtBQUssQ0FBQyx5REFBeURBO1FBRXZFLGdDQUFnQztRQUNoQyxNQUFNQztRQUNOLE1BQU13QixPQUFPckMsWUFBWW9DLElBQUksQ0FBQ1EsQ0FBQUEsSUFBS0EsRUFBRTNDLEtBQUssS0FBS0E7UUFDL0MsSUFBSW9DLE1BQU07WUFDUixPQUFPO2dCQUNMdEIsU0FBUztnQkFDVE0sTUFBTTtvQkFDSmpDLElBQUlpRCxLQUFLakQsRUFBRTtvQkFDWGEsT0FBT29DLEtBQUtwQyxLQUFLO29CQUNqQlosTUFBTWdELEtBQUtoRCxJQUFJO29CQUNmYSxVQUFVbUMsS0FBS25DLFFBQVE7b0JBQ3ZCQyxNQUFNa0MsS0FBS2xDLElBQUk7b0JBQ2YwQyxZQUFZUixLQUFLakMsU0FBUztnQkFDNUI7WUFDRjtRQUNGO1FBQ0EsT0FBTztZQUFFVyxTQUFTO1lBQU1NLE1BQU07UUFBSztJQUNyQztBQUNGO0FBRU8sZUFBZXlCLGVBQWU1QyxRQUFnQixFQUFFZ0MsY0FBc0I7SUFDM0UsT0FBT3pELHdEQUFjLENBQUN5QixVQUFVZ0M7QUFDbEM7QUFFQSxpQkFBaUI7QUFDVixlQUFlYyxVQUFVQyxTQUFpQixFQUFFQyxTQUFpQixFQUFFQyxXQUFtQixDQUFDO0lBQ3hGLElBQUk7UUFDRixNQUFNLEVBQUU3QixJQUFJLEVBQUUsR0FBRyxNQUFNOUMsaURBQUcsQ0FBQzs7OzRDQUdhLEVBQUV5RSxVQUFVO1FBQ2hELEVBQUVDLFVBQVU7UUFDWixFQUFFQyxTQUFTOzs7cURBR2tDLEVBQUVBLFNBQVM7O0lBRTVELENBQUM7UUFDRCxPQUFPO1lBQUVwQyxTQUFTO1lBQU1NLE1BQU1DLElBQUksQ0FBQyxFQUFFO1FBQUM7SUFDeEMsRUFBRSxPQUFPVixPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVPLGVBQWV3QyxhQUFhSCxTQUFpQjtJQUNsRCxJQUFJO1FBQ0YsTUFBTSxFQUFFM0IsSUFBSSxFQUFFLEdBQUcsTUFBTTlDLGlEQUFHLENBQUM7Ozs7Ozs7Ozs7O3NCQVdULEVBQUV5RSxVQUFVOztJQUU5QixDQUFDO1FBQ0QsT0FBTztZQUFFbEMsU0FBUztZQUFNTSxNQUFNQztRQUFLO0lBQ3JDLEVBQUUsT0FBT1YsT0FBTztRQUNkN0IsUUFBUTZCLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87WUFBRUcsU0FBUztZQUFPSDtRQUFNO0lBQ2pDO0FBQ0Y7QUFFTyxlQUFleUMsZUFBZUosU0FBaUIsRUFBRUMsU0FBaUI7SUFDdkUsSUFBSTtRQUNGLE1BQU0xRSxpREFBRyxDQUFDOzswREFFNEMsRUFBRXlFLFVBQVU7dUJBQy9DLEVBQUVDLFVBQVU7SUFDL0IsQ0FBQztRQUNELE9BQU87WUFBRW5DLFNBQVM7UUFBSztJQUN6QixFQUFFLE9BQU9ILE9BQU87UUFDZDdCLFFBQVE2QixLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPO1lBQUVHLFNBQVM7WUFBT0g7UUFBTTtJQUNqQztBQUNGO0FBRUEsa0JBQWtCO0FBQ1gsZUFBZTBDO0lBQ3BCLElBQUk7UUFDRixNQUFNLEVBQUVoQyxJQUFJLEVBQUUsR0FBRyxNQUFNOUMsaURBQUcsQ0FBQzs7O0lBRzNCLENBQUM7UUFDRCxPQUFPO1lBQUV1QyxTQUFTO1lBQU1NLE1BQU1DO1FBQUs7SUFDckMsRUFBRSxPQUFPVixPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVPLGVBQWUyQyxjQUFjcEMsT0FBNEI7SUFDOUQsSUFBSTtRQUNGLE1BQU0sRUFBRUcsSUFBSSxFQUFFLEdBQUcsTUFBTTlDLGlEQUFHLENBQUM7O2NBRWpCLEVBQUUyQyxRQUFROUIsSUFBSSxDQUFDLEVBQUUsRUFBRThCLFFBQVE3QixXQUFXLENBQUMsRUFBRSxFQUFFNkIsUUFBUTVCLEtBQUssQ0FBQyxFQUFFLEVBQUU0QixRQUFRM0IsS0FBSyxDQUFDLEVBQUUsRUFBRTJCLFFBQVExQixRQUFRLENBQUMsRUFBRSxFQUFFMEIsUUFBUXpCLE1BQU0sQ0FBQyxFQUFFLEVBQUV5QixRQUFReEIsT0FBTyxDQUFDOztJQUVqSixDQUFDO1FBQ0QsT0FBTztZQUFFb0IsU0FBUztZQUFNTSxNQUFNQyxJQUFJLENBQUMsRUFBRTtRQUFDO0lBQ3hDLEVBQUUsT0FBT1YsT0FBTztRQUNkN0IsUUFBUTZCLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU87WUFBRUcsU0FBUztZQUFPSDtRQUFNO0lBQ2pDO0FBQ0Y7QUFFTyxlQUFlNEMsY0FBY3BFLEVBQVUsRUFBRStCLE9BQXlCO0lBQ3ZFLElBQUk7UUFDRixNQUFNLEVBQUVHLElBQUksRUFBRSxHQUFHLE1BQU05QyxpREFBRyxDQUFDOzswQkFFTCxFQUFFMkMsUUFBUTlCLElBQUksQ0FBQztpQ0FDUixFQUFFOEIsUUFBUTdCLFdBQVcsQ0FBQzsyQkFDNUIsRUFBRTZCLFFBQVE1QixLQUFLLENBQUM7MkJBQ2hCLEVBQUU0QixRQUFRM0IsS0FBSyxDQUFDOzhCQUNiLEVBQUUyQixRQUFRMUIsUUFBUSxDQUFDOzRCQUNyQixFQUFFMEIsUUFBUXpCLE1BQU0sQ0FBQzs2QkFDaEIsRUFBRXlCLFFBQVF4QixPQUFPLENBQUM7OEJBQ2pCLEVBQUV3QixRQUFRdkIsT0FBTyxDQUFDO2lCQUMvQixFQUFFUixHQUFHOztJQUVsQixDQUFDO1FBQ0QsT0FBTztZQUFFMkIsU0FBUztZQUFNTSxNQUFNQyxJQUFJLENBQUMsRUFBRTtRQUFDO0lBQ3hDLEVBQUUsT0FBT1YsT0FBTztRQUNkN0IsUUFBUTZCLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU87WUFBRUcsU0FBUztZQUFPSDtRQUFNO0lBQ2pDO0FBQ0Y7QUFFTyxlQUFlNkMsY0FBY3JFLEVBQVU7SUFDNUMsSUFBSTtRQUNGLE1BQU1aLGlEQUFHLENBQUMsZ0NBQWdDLEVBQUVZLEdBQUcsQ0FBQztRQUNoRCxPQUFPO1lBQUUyQixTQUFTO1FBQUs7SUFDekIsRUFBRSxPQUFPSCxPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVPLGVBQWU4QyxXQUFXdEUsRUFBVSxFQUFFdUUsT0FBc0I7SUFDakUsSUFBSSxDQUFDckQscUJBQXFCO1FBQ3hCLE1BQU1PO1FBQ04sa0JBQWtCO1FBQ2xCLE1BQU0rQyxZQUFZNUQsWUFBWTZELFNBQVMsQ0FBQ3hCLENBQUFBLE9BQVFBLEtBQUtqRCxFQUFFLEtBQUtBO1FBQzVELElBQUl3RSxjQUFjLENBQUMsR0FBRztZQUNwQixPQUFPO2dCQUFFN0MsU0FBUztnQkFBT0gsT0FBTztZQUFpQjtRQUNuRDtRQUVBWixXQUFXLENBQUM0RCxVQUFVLEdBQUc7WUFBRSxHQUFHNUQsV0FBVyxDQUFDNEQsVUFBVTtZQUFFLEdBQUdELE9BQU87UUFBQztRQUNqRSxPQUFPO1lBQUU1QyxTQUFTO1lBQU1NLE1BQU1yQixXQUFXLENBQUM0RCxVQUFVO1FBQUM7SUFDdkQ7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFdEMsSUFBSSxFQUFFLEdBQUcsTUFBTTlDLGlEQUFHLENBQUM7OzBCQUVMLEVBQUVtRixRQUFRdEUsSUFBSSxDQUFDOzJCQUNkLEVBQUVzRSxRQUFRMUQsS0FBSyxDQUFDOzBCQUNqQixFQUFFMEQsUUFBUXhELElBQUksQ0FBQztpQkFDeEIsRUFBRWYsR0FBRzs7SUFFbEIsQ0FBQztRQUVELElBQUlrQyxLQUFLaUIsTUFBTSxLQUFLLEdBQUc7WUFDckIsT0FBTztnQkFBRXhCLFNBQVM7Z0JBQU9ILE9BQU87WUFBaUI7UUFDbkQ7UUFFQSxPQUFPO1lBQUVHLFNBQVM7WUFBTU0sTUFBTUMsSUFBSSxDQUFDLEVBQUU7UUFBQztJQUN4QyxFQUFFLE9BQU9WLE9BQU87UUFDZDdCLFFBQVE2QixLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxPQUFPO1lBQUVHLFNBQVM7WUFBT0g7UUFBTTtJQUNqQztBQUNGO0FBRU8sZUFBZWtELFdBQVcxRSxFQUFVO0lBQ3pDLElBQUksQ0FBQ2tCLHFCQUFxQjtRQUN4QixNQUFNTztRQUNOLGtCQUFrQjtRQUNsQixNQUFNK0MsWUFBWTVELFlBQVk2RCxTQUFTLENBQUN4QixDQUFBQSxPQUFRQSxLQUFLakQsRUFBRSxLQUFLQTtRQUM1RCxJQUFJd0UsY0FBYyxDQUFDLEdBQUc7WUFDcEIsT0FBTztnQkFBRTdDLFNBQVM7Z0JBQU9ILE9BQU87WUFBaUI7UUFDbkQ7UUFFQVosWUFBWStELE1BQU0sQ0FBQ0gsV0FBVztRQUM5QixPQUFPO1lBQUU3QyxTQUFTO1FBQUs7SUFDekI7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFaUQsUUFBUSxFQUFFLEdBQUcsTUFBTXhGLGlEQUFHLENBQUMsNkJBQTZCLEVBQUVZLEdBQUcsQ0FBQztRQUVsRSxJQUFJNEUsYUFBYSxHQUFHO1lBQ2xCLE9BQU87Z0JBQUVqRCxTQUFTO2dCQUFPSCxPQUFPO1lBQWlCO1FBQ25EO1FBRUEsT0FBTztZQUFFRyxTQUFTO1FBQUs7SUFDekIsRUFBRSxPQUFPSCxPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVBLDZCQUE2QjtBQUM3QixJQUFJcUQsZUFBd0IsRUFBRTtBQUV2QixlQUFlQztJQUNwQixJQUFJLENBQUM1RCxxQkFBcUI7UUFDeEIsTUFBTU87UUFDTixxQ0FBcUM7UUFDckMsSUFBSW9ELGFBQWExQixNQUFNLEtBQUssR0FBRztZQUM3QjBCLGVBQWU7Z0JBQ2I7b0JBQ0U3RSxJQUFJO29CQUNKK0UsUUFBUTtvQkFDUkMsT0FBTztvQkFDUEMsUUFBUTtvQkFDUmpFLFdBQVcsSUFBSUMsS0FBS0EsS0FBS2lFLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLLE1BQU0sYUFBYTtnQkFDekU7Z0JBQ0E7b0JBQ0VsRixJQUFJO29CQUNKK0UsUUFBUTtvQkFDUkMsT0FBTztvQkFDUEMsUUFBUTtvQkFDUmpFLFdBQVcsSUFBSUMsS0FBS0EsS0FBS2lFLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLLE1BQU0sYUFBYTtnQkFDekU7Z0JBQ0E7b0JBQ0VsRixJQUFJO29CQUNKK0UsUUFBUTtvQkFDUkMsT0FBTztvQkFDUEMsUUFBUTtvQkFDUmpFLFdBQVcsSUFBSUMsS0FBS0EsS0FBS2lFLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLLE1BQU0sWUFBWTtnQkFDeEU7Z0JBQ0E7b0JBQ0VsRixJQUFJO29CQUNKK0UsUUFBUTtvQkFDUkMsT0FBTztvQkFDUEMsUUFBUTtvQkFDUmpFLFdBQVcsSUFBSUMsS0FBS0EsS0FBS2lFLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxNQUFNLGNBQWM7Z0JBQ3JFO2FBQ0Q7UUFDSDtRQUNBLE9BQU87WUFBRXZELFNBQVM7WUFBTU0sTUFBTTRDO1FBQWE7SUFDN0M7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFM0MsSUFBSSxFQUFFLEdBQUcsTUFBTTlDLGlEQUFHLENBQUM7Ozs7O0lBSzNCLENBQUM7UUFDRCxPQUFPO1lBQUV1QyxTQUFTO1lBQU1NLE1BQU1DO1FBQUs7SUFDckMsRUFBRSxPQUFPVixPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVPLGVBQWUyRCxrQkFBa0JuRixFQUFVLEVBQUVpRixNQUF1QjtJQUN6RSxJQUFJLENBQUMvRCxxQkFBcUI7UUFDeEIsTUFBTU87UUFDTixrQkFBa0I7UUFDbEIsTUFBTTJELGFBQWFQLGFBQWFKLFNBQVMsQ0FBQ1ksQ0FBQUEsUUFBU0EsTUFBTXJGLEVBQUUsS0FBS0E7UUFDaEUsSUFBSW9GLGVBQWUsQ0FBQyxHQUFHO1lBQ3JCLE9BQU87Z0JBQUV6RCxTQUFTO2dCQUFPSCxPQUFPO1lBQWtCO1FBQ3BEO1FBRUFxRCxZQUFZLENBQUNPLFdBQVcsQ0FBQ0gsTUFBTSxHQUFHQTtRQUNsQyxPQUFPO1lBQUV0RCxTQUFTO1lBQU1NLE1BQU00QyxZQUFZLENBQUNPLFdBQVc7UUFBQztJQUN6RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVsRCxJQUFJLEVBQUUsR0FBRyxNQUFNOUMsaURBQUcsQ0FBQzs7bUJBRVosRUFBRTZGLE9BQU87aUJBQ1gsRUFBRWpGLEdBQUc7O0lBRWxCLENBQUM7UUFFRCxJQUFJa0MsS0FBS2lCLE1BQU0sS0FBSyxHQUFHO1lBQ3JCLE9BQU87Z0JBQUV4QixTQUFTO2dCQUFPSCxPQUFPO1lBQWtCO1FBQ3BEO1FBRUEsT0FBTztZQUFFRyxTQUFTO1lBQU1NLE1BQU1DLElBQUksQ0FBQyxFQUFFO1FBQUM7SUFDeEMsRUFBRSxPQUFPVixPQUFPO1FBQ2Q3QixRQUFRNkIsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBTztZQUFFRyxTQUFTO1lBQU9IO1FBQU07SUFDakM7QUFDRjtBQUVPLGVBQWU4RCxZQUFZdEYsRUFBVTtJQUMxQyxJQUFJLENBQUNrQixxQkFBcUI7UUFDeEIsTUFBTU87UUFDTixrQkFBa0I7UUFDbEIsTUFBTTJELGFBQWFQLGFBQWFKLFNBQVMsQ0FBQ1ksQ0FBQUEsUUFBU0EsTUFBTXJGLEVBQUUsS0FBS0E7UUFDaEUsSUFBSW9GLGVBQWUsQ0FBQyxHQUFHO1lBQ3JCLE9BQU87Z0JBQUV6RCxTQUFTO2dCQUFPSCxPQUFPO1lBQWtCO1FBQ3BEO1FBRUFxRCxhQUFhRixNQUFNLENBQUNTLFlBQVk7UUFDaEMsT0FBTztZQUFFekQsU0FBUztRQUFLO0lBQ3pCO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRWlELFFBQVEsRUFBRSxHQUFHLE1BQU14RixpREFBRyxDQUFDLDhCQUE4QixFQUFFWSxHQUFHLENBQUM7UUFFbkUsSUFBSTRFLGFBQWEsR0FBRztZQUNsQixPQUFPO2dCQUFFakQsU0FBUztnQkFBT0gsT0FBTztZQUFrQjtRQUNwRDtRQUVBLE9BQU87WUFBRUcsU0FBUztRQUFLO0lBQ3pCLEVBQUUsT0FBT0gsT0FBTztRQUNkN0IsUUFBUTZCLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU87WUFBRUcsU0FBUztZQUFPSDtRQUFNO0lBQ2pDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXktbmlnaHQtaW5jLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3FsIH0gZnJvbSAnQHZlcmNlbC9wb3N0Z3Jlcyc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcblxuLy8gQ2hlY2sgaWYgUG9zdGdyZXMgaXMgcHJvcGVybHkgY29uZmlndXJlZFxuZnVuY3Rpb24gY2hlY2tQb3N0Z3Jlc0Nvbm5lY3Rpb24oKSB7XG4gIGNvbnN0IHBvc3RncmVzVXJsID0gcHJvY2Vzcy5lbnYuUE9TVEdSRVNfVVJMO1xuICBjb25zb2xlLmxvZygn8J+UjSBDaGVja2luZyBQb3N0Z3JlcyBjb25uZWN0aW9uLi4uJyk7XG4gIGNvbnNvbGUubG9nKCdQT1NUR1JFU19VUkwgZXhpc3RzOicsICEhcG9zdGdyZXNVcmwpO1xuICBjb25zb2xlLmxvZygnUE9TVEdSRVNfVVJMIGlzIGNvbmZpZ3VyZWQ6JywgcG9zdGdyZXNVcmwgJiYgIXBvc3RncmVzVXJsLmluY2x1ZGVzKCd1c2VybmFtZScpICYmICFwb3N0Z3Jlc1VybC5pbmNsdWRlcygncGFzc3dvcmQnKSk7XG4gIFxuICByZXR1cm4gcG9zdGdyZXNVcmwgJiYgIXBvc3RncmVzVXJsLmluY2x1ZGVzKCd1c2VybmFtZScpICYmICFwb3N0Z3Jlc1VybC5pbmNsdWRlcygncGFzc3dvcmQnKTtcbn1cblxuLy8gSW5pdGlhbGl6ZSBtZW1vcnkgZGF0YSBmb3IgZGV2ZWxvcG1lbnRcbmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVNZW1vcnlEYXRhKCkge1xuICBjb25zb2xlLmxvZygn8J+agCBJbml0aWFsaXppbmcgaW4tbWVtb3J5IGRhdGFiYXNlLi4uJyk7XG4gIFxuICBtZW1vcnlQcm9kdWN0cyA9IFtcbiAgICB7XG4gICAgICBpZDogMSxcbiAgICAgIG5hbWU6ICdXaXJlbGVzcyBIZWFkcGhvbmVzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnSGlnaC1xdWFsaXR5IHdpcmVsZXNzIGhlYWRwaG9uZXMgd2l0aCBub2lzZSBjYW5jZWxsYXRpb24nLFxuICAgICAgcHJpY2U6IDE5OS45OSxcbiAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDU3NDA0MjA5MjgtNWU1NjBjMDZkMzBlP3c9NDAwJyxcbiAgICAgIGNhdGVnb3J5OiAnRWxlY3Ryb25pY3MnLFxuICAgICAgcmF0aW5nOiA0LjUsXG4gICAgICByZXZpZXdzOiAxMjgsXG4gICAgICBpblN0b2NrOiB0cnVlXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogMixcbiAgICAgIG5hbWU6ICdTbWFydCBXYXRjaCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0ZlYXR1cmUtcmljaCBzbWFydHdhdGNoIHdpdGggaGVhbHRoIG1vbml0b3JpbmcnLFxuICAgICAgcHJpY2U6IDI5OS45OSxcbiAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjMyNzUzMzU2ODQtMzc4OThiNmJhZjMwP3c9NDAwJyxcbiAgICAgIGNhdGVnb3J5OiAnRWxlY3Ryb25pY3MnLFxuICAgICAgcmF0aW5nOiA0LjMsXG4gICAgICByZXZpZXdzOiA4OSxcbiAgICAgIGluU3RvY2s6IHRydWVcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAzLFxuICAgICAgbmFtZTogJ0xhcHRvcCBCYWNrcGFjaycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0R1cmFibGUgbGFwdG9wIGJhY2twYWNrIHdpdGggbXVsdGlwbGUgY29tcGFydG1lbnRzJyxcbiAgICAgIHByaWNlOiA3OS45OSxcbiAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTMwNjI0MDctOThlZWI2NGM2YTYyP3c9NDAwJyxcbiAgICAgIGNhdGVnb3J5OiAnQWNjZXNzb3JpZXMnLFxuICAgICAgcmF0aW5nOiA0LjcsXG4gICAgICByZXZpZXdzOiAxNTYsXG4gICAgICBpblN0b2NrOiB0cnVlXG4gICAgfVxuICBdO1xuXG4gIG1lbW9yeUNhdGVnb3JpZXMgPSBbXG4gICAge1xuICAgICAgaWQ6IDEsXG4gICAgICBuYW1lOiAnRWxlY3Ryb25pY3MnLFxuICAgICAgZGVzY3JpcHRpb246ICdMYXRlc3QgZ2FkZ2V0cyBhbmQgZWxlY3Ryb25pYyBkZXZpY2VzJyxcbiAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTgwNDk3OTQ1NjEtNzc4MGU3MjMxNjYxP3c9NDAwJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDIsXG4gICAgICBuYW1lOiAnQWNjZXNzb3JpZXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdFc3NlbnRpYWwgYWNjZXNzb3JpZXMgZm9yIGRhaWx5IHVzZScsXG4gICAgICBpbWFnZTogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTUzMDYyNDA3LTk4ZWViNjRjNmE2Mj93PTQwMCdcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAzLFxuICAgICAgbmFtZTogJ0hvbWUgJiBHYXJkZW4nLFxuICAgICAgZGVzY3JpcHRpb246ICdFdmVyeXRoaW5nIGZvciB5b3VyIGhvbWUgYW5kIGdhcmRlbicsXG4gICAgICBpbWFnZTogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg2MDIzNDkyMTI1LTI3YjJjMDQ1ZWZkNz93PTQwMCdcbiAgICB9XG4gIF07XG5cbiAgLy8gQ3JlYXRlIGRlZmF1bHQgYWRtaW4gdXNlciBmb3IgZGV2ZWxvcG1lbnRcbiAgY29uc3QgYWRtaW5QYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKCdhZG1pbjEyMycsIDEwKTtcbiAgbWVtb3J5VXNlcnMgPSBbXG4gICAge1xuICAgICAgaWQ6IDEsXG4gICAgICBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICAgIG5hbWU6ICdBZG1pbiBVc2VyJyxcbiAgICAgIHBhc3N3b3JkOiBhZG1pblBhc3N3b3JkLFxuICAgICAgcm9sZTogJ2FkbWluJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDIsXG4gICAgICBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nLFxuICAgICAgbmFtZTogJ1JlZ3VsYXIgVXNlcicsXG4gICAgICBwYXNzd29yZDogYXdhaXQgYmNyeXB0Lmhhc2goJ3VzZXIxMjMnLCAxMCksXG4gICAgICByb2xlOiAndXNlcicsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9XG4gIF07XG4gIFxuICBjb25zb2xlLmxvZygn4pyFIEluLW1lbW9yeSBkYXRhYmFzZSBpbml0aWFsaXplZCB3aXRoIGFkbWluIHVzZXI6IGFkbWluQGV4YW1wbGUuY29tJyk7XG59XG5cbi8vIEZvciBkZXZlbG9wbWVudCwgd2UnbGwgdXNlIGEgc2ltcGxlIGluLW1lbW9yeSBmYWxsYmFjayB3aGVuIFBvc3RncmVzIGlzIG5vdCBhdmFpbGFibGVcbmxldCBpc1Bvc3RncmVzQXZhaWxhYmxlID0gY2hlY2tQb3N0Z3Jlc0Nvbm5lY3Rpb24oKTtcblxuLy8gU2ltcGxlIGluLW1lbW9yeSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudFxubGV0IG1lbW9yeVByb2R1Y3RzOiBQcm9kdWN0W10gPSBbXTtcbmxldCBtZW1vcnlDYXRlZ29yaWVzOiBDYXRlZ29yeVtdID0gW107XG5sZXQgbWVtb3J5VXNlcnM6IFVzZXJbXSA9IFtdO1xubGV0IG1lbW9yeUNhcnRJdGVtczogQ2FydEl0ZW1bXSA9IFtdO1xuXG4vLyBUcmFjayBpbml0aWFsaXphdGlvbiBzdGF0dXNcbmxldCBtZW1vcnlJbml0aWFsaXplZCA9IGZhbHNlO1xubGV0IGluaXRpYWxpemF0aW9uUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsO1xuXG4vLyBJbml0aWFsaXplIG1lbW9yeSBkYXRhIGltbWVkaWF0ZWx5IGlmIFBvc3RncmVzIGlzIG5vdCBhdmFpbGFibGVcbmlmICghaXNQb3N0Z3Jlc0F2YWlsYWJsZSkge1xuICBpbml0aWFsaXphdGlvblByb21pc2UgPSBpbml0aWFsaXplTWVtb3J5RGF0YSgpLnRoZW4oKCkgPT4ge1xuICAgIG1lbW9yeUluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICBjb25zb2xlLmxvZygnSW4tbWVtb3J5IGRhdGFiYXNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgaW4tbWVtb3J5IGRhdGFiYXNlOicsIGVycm9yKTtcbiAgfSk7XG59XG5cbi8vIEVuc3VyZSBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZSBiZWZvcmUgYW55IGRhdGFiYXNlIG9wZXJhdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZU1lbW9yeUluaXRpYWxpemVkKCkge1xuICBpZiAoIWlzUG9zdGdyZXNBdmFpbGFibGUgJiYgIW1lbW9yeUluaXRpYWxpemVkKSB7XG4gICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xuICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBpbml0aWFsaXplTWVtb3J5RGF0YSgpO1xuICAgICAgbWVtb3J5SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2R1Y3Qge1xuICBpZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHByaWNlOiBudW1iZXI7XG4gIGltYWdlOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBzdHJpbmc7XG4gIHJhdGluZzogbnVtYmVyO1xuICByZXZpZXdzOiBudW1iZXI7XG4gIGluU3RvY2s6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2F0ZWdvcnkge1xuICBpZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGltYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBudW1iZXI7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgcm9sZTogJ3VzZXInIHwgJ2FkbWluJztcbiAgY3JlYXRlZEF0OiBEYXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcnRJdGVtIHtcbiAgaWQ6IG51bWJlcjtcbiAgdXNlcklkOiBudW1iZXI7XG4gIHByb2R1Y3RJZDogbnVtYmVyO1xuICBxdWFudGl0eTogbnVtYmVyO1xuICBjcmVhdGVkQXQ6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JkZXIge1xuICBpZDogbnVtYmVyO1xuICB1c2VySWQ6IG51bWJlcjtcbiAgdG90YWw6IG51bWJlcjtcbiAgc3RhdHVzOiAncGVuZGluZycgfCAncHJvY2Vzc2luZycgfCAnc2hpcHBlZCcgfCAnZGVsaXZlcmVkJztcbiAgY3JlYXRlZEF0OiBEYXRlO1xufVxuXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlIHRhYmxlc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhYmFzZSgpIHtcbiAgLy8gQ2hlY2sgaWYgUG9zdGdyZXMgaXMgcHJvcGVybHkgY29uZmlndXJlZFxuICBpZiAoIWlzUG9zdGdyZXNBdmFpbGFibGUpIHtcbiAgICBjb25zb2xlLmxvZygnUG9zdGdyZXMgbm90IGNvbmZpZ3VyZWQsIHVzaW5nIGluLW1lbW9yeSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudCcpO1xuICAgIC8vIEluaXRpYWxpemUgd2l0aCBzYW1wbGUgZGF0YVxuICAgIGluaXRpYWxpemVNZW1vcnlEYXRhKCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBDcmVhdGUgcHJvZHVjdHMgdGFibGVcbiAgICBhd2FpdCBzcWxgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwcm9kdWN0cyAoXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAgbmFtZSBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXG4gICAgICAgIHByaWNlIERFQ0lNQUwoMTAsIDIpIE5PVCBOVUxMLFxuICAgICAgICBpbWFnZSBWQVJDSEFSKDUwMCksXG4gICAgICAgIGNhdGVnb3J5IFZBUkNIQVIoMTAwKSxcbiAgICAgICAgcmF0aW5nIERFQ0lNQUwoMiwgMSkgREVGQVVMVCAwLFxuICAgICAgICByZXZpZXdzIElOVEVHRVIgREVGQVVMVCAwLFxuICAgICAgICBpbl9zdG9jayBCT09MRUFOIERFRkFVTFQgdHJ1ZSxcbiAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgKVxuICAgIGA7XG5cbiAgICAvLyBDcmVhdGUgY2F0ZWdvcmllcyB0YWJsZVxuICAgIGF3YWl0IHNxbGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNhdGVnb3JpZXMgKFxuICAgICAgICBpZCBTRVJJQUwgUFJJTUFSWSBLRVksXG4gICAgICAgIG5hbWUgVkFSQ0hBUigyNTUpIE5PVCBOVUxMIFVOSVFVRSxcbiAgICAgICAgZGVzY3JpcHRpb24gVEVYVCxcbiAgICAgICAgaW1hZ2UgVkFSQ0hBUig1MDApLFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApXG4gICAgYDtcblxuICAgIC8vIENyZWF0ZSB1c2VycyB0YWJsZVxuICAgIGF3YWl0IHNxbGBcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxuICAgICAgICBlbWFpbCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwgVU5JUVVFLFxuICAgICAgICBuYW1lIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICByb2xlIFZBUkNIQVIoMjApIERFRkFVTFQgJ3VzZXInLFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApXG4gICAgYDtcblxuICAgIC8vIENyZWF0ZSBjYXJ0X2l0ZW1zIHRhYmxlXG4gICAgYXdhaXQgc3FsYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgY2FydF9pdGVtcyAoXG4gICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAgdXNlcl9pZCBJTlRFR0VSIFJFRkVSRU5DRVMgdXNlcnMoaWQpIE9OIERFTEVURSBDQVNDQURFLFxuICAgICAgICBwcm9kdWN0X2lkIElOVEVHRVIgUkVGRVJFTkNFUyBwcm9kdWN0cyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIHF1YW50aXR5IElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAxLFxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgICApXG4gICAgYDtcblxuICAgIC8vIENyZWF0ZSBvcmRlcnMgdGFibGVcbiAgICBhd2FpdCBzcWxgXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBvcmRlcnMgKFxuICAgICAgICBpZCBTRVJJQUwgUFJJTUFSWSBLRVksXG4gICAgICAgIHVzZXJfaWQgSU5URUdFUiBSRUZFUkVOQ0VTIHVzZXJzKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgdG90YWwgREVDSU1BTCgxMCwgMikgTk9UIE5VTEwsXG4gICAgICAgIHN0YXR1cyBWQVJDSEFSKDIwKSBERUZBVUxUICdwZW5kaW5nJyxcbiAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgICAgKVxuICAgIGA7XG5cbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgdGFibGVzIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgZGF0YWJhc2U6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbi8vIFNlZWQgaW5pdGlhbCBkYXRhXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VlZERhdGFiYXNlKCkge1xuICB0cnkge1xuICAgIC8vIEluc2VydCBzYW1wbGUgY2F0ZWdvcmllc1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdFbGVjdHJvbmljcycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTGF0ZXN0IGdhZGdldHMgYW5kIGVsZWN0cm9uaWMgZGV2aWNlcycsXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTgwNDk3OTQ1NjEtNzc4MGU3MjMxNjYxP3c9NDAwJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdDbG90aGluZycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRmFzaGlvbiBhbmQgYXBwYXJlbCBmb3IgYWxsIG9jY2FzaW9ucycsXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NDE5ODYzMDA5MTctNjQ2NzRiZDYwMGQ4P3c9NDAwJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdIb21lICYgR2FyZGVuJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdFdmVyeXRoaW5nIGZvciB5b3VyIGhvbWUgYW5kIGdhcmRlbicsXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODYwMjM0OTIxMjUtMjdiMmMwNDVlZmQ3P3c9NDAwJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdTcG9ydHMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1Nwb3J0cyBlcXVpcG1lbnQgYW5kIGZpdG5lc3MgZ2VhcicsXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzEwMTk2MTM0NTQtMWNiMmY5OWIyZDhiP3c9NDAwJyxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xuICAgICAgYXdhaXQgc3FsYFxuICAgICAgICBJTlNFUlQgSU5UTyBjYXRlZ29yaWVzIChuYW1lLCBkZXNjcmlwdGlvbiwgaW1hZ2UpXG4gICAgICAgIFZBTFVFUyAoJHtjYXRlZ29yeS5uYW1lfSwgJHtjYXRlZ29yeS5kZXNjcmlwdGlvbn0sICR7Y2F0ZWdvcnkuaW1hZ2V9KVxuICAgICAgICBPTiBDT05GTElDVCAobmFtZSkgRE8gTk9USElOR1xuICAgICAgYDtcbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgc2FtcGxlIHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdXaXJlbGVzcyBIZWFkcGhvbmVzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdIaWdoLXF1YWxpdHkgd2lyZWxlc3MgaGVhZHBob25lcyB3aXRoIG5vaXNlIGNhbmNlbGxhdGlvbicsXG4gICAgICAgIHByaWNlOiAxOTkuOTksXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDU3NDA0MjA5MjgtNWU1NjBjMDZkMzBlP3c9NDAwJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdFbGVjdHJvbmljcycsXG4gICAgICAgIHJhdGluZzogNC41LFxuICAgICAgICByZXZpZXdzOiAxMjgsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnU21hcnQgV2F0Y2gnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ZlYXR1cmUtcmljaCBzbWFydHdhdGNoIHdpdGggaGVhbHRoIG1vbml0b3JpbmcnLFxuICAgICAgICBwcmljZTogMjk5Ljk5LFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTIzMjc1MzM1Njg0LTM3ODk4YjZiYWYzMD93PTQwMCcsXG4gICAgICAgIGNhdGVnb3J5OiAnRWxlY3Ryb25pY3MnLFxuICAgICAgICByYXRpbmc6IDQuMyxcbiAgICAgICAgcmV2aWV3czogODksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnRGVzaWduZXIgVC1TaGlydCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUHJlbWl1bSBjb3R0b24gdC1zaGlydCB3aXRoIG1vZGVybiBkZXNpZ24nLFxuICAgICAgICBwcmljZTogNDkuOTksXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjE1NzIxNjM0NzQtNjg2NGY5Y2YxN2FiP3c9NDAwJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdDbG90aGluZycsXG4gICAgICAgIHJhdGluZzogNC43LFxuICAgICAgICByZXZpZXdzOiAyMDMsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnUnVubmluZyBTaG9lcycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tZm9ydGFibGUgcnVubmluZyBzaG9lcyBmb3IgYWxsIHRlcnJhaW5zJyxcbiAgICAgICAgcHJpY2U6IDEyOS45OSxcbiAgICAgICAgaW1hZ2U6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU0MjI5MTAyNi03ZWVjMjY0YzI3ZmY/dz00MDAnLFxuICAgICAgICBjYXRlZ29yeTogJ1Nwb3J0cycsXG4gICAgICAgIHJhdGluZzogNC42LFxuICAgICAgICByZXZpZXdzOiAxNTYsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnQ29mZmVlIE1ha2VyJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBdXRvbWF0aWMgY29mZmVlIG1ha2VyIHdpdGggcHJvZ3JhbW1hYmxlIHNldHRpbmdzJyxcbiAgICAgICAgcHJpY2U6IDg5Ljk5LFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDk1NDc0NDcyMjg3LTRkNzFiY2RkMjA4NT93PTQwMCcsXG4gICAgICAgIGNhdGVnb3J5OiAnSG9tZSAmIEdhcmRlbicsXG4gICAgICAgIHJhdGluZzogNC40LFxuICAgICAgICByZXZpZXdzOiA3NCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdZb2dhIE1hdCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTm9uLXNsaXAgeW9nYSBtYXQgZm9yIGNvbWZvcnRhYmxlIHdvcmtvdXRzJyxcbiAgICAgICAgcHJpY2U6IDM5Ljk5LFxuICAgICAgICBpbWFnZTogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQ0MzY3NTY3LTBmMmZjYjAwOWUwYj93PTQwMCcsXG4gICAgICAgIGNhdGVnb3J5OiAnU3BvcnRzJyxcbiAgICAgICAgcmF0aW5nOiA0LjgsXG4gICAgICAgIHJldmlld3M6IDMxMixcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xuICAgICAgYXdhaXQgc3FsYFxuICAgICAgICBJTlNFUlQgSU5UTyBwcm9kdWN0cyAobmFtZSwgZGVzY3JpcHRpb24sIHByaWNlLCBpbWFnZSwgY2F0ZWdvcnksIHJhdGluZywgcmV2aWV3cylcbiAgICAgICAgVkFMVUVTICgke3Byb2R1Y3QubmFtZX0sICR7cHJvZHVjdC5kZXNjcmlwdGlvbn0sICR7cHJvZHVjdC5wcmljZX0sICR7cHJvZHVjdC5pbWFnZX0sICR7cHJvZHVjdC5jYXRlZ29yeX0sICR7cHJvZHVjdC5yYXRpbmd9LCAke3Byb2R1Y3QucmV2aWV3c30pXG4gICAgICAgIE9OIENPTkZMSUNUIERPIE5PVEhJTkdcbiAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgYWRtaW4gdXNlclxuICAgIGNvbnN0IGFkbWluUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCgnYWRtaW4xMjMnLCAxMCk7XG4gICAgYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gdXNlcnMgKGVtYWlsLCBuYW1lLCBwYXNzd29yZCwgcm9sZSlcbiAgICAgIFZBTFVFUyAoJ2FkbWluQGRheW5uaWdodC5jb20nLCAnQWRtaW4gVXNlcicsICR7YWRtaW5QYXNzd29yZH0sICdhZG1pbicpXG4gICAgICBPTiBDT05GTElDVCAoZW1haWwpIERPIE5PVEhJTkdcbiAgICBgO1xuXG4gICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIHNlZWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VlZGluZyBkYXRhYmFzZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuLy8gR2V0IGFsbCBwcm9kdWN0c1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkge1xuICBpZiAoIWlzUG9zdGdyZXNBdmFpbGFibGUpIHtcbiAgICBhd2FpdCBlbnN1cmVNZW1vcnlJbml0aWFsaXplZCgpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1lbW9yeVByb2R1Y3RzIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBwcm9kdWN0cyBcbiAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgIGA7XG4gICAgXG4gICAgLy8gQ29udmVydCBwcmljZSBmcm9tIHN0cmluZyB0byBudW1iZXIgKFBvc3RncmVTUUwgREVDSU1BTCByZXR1cm5zIGFzIHN0cmluZylcbiAgICBjb25zdCBwcm9kdWN0cyA9IHJvd3MubWFwKHJvdyA9PiAoe1xuICAgICAgLi4ucm93LFxuICAgICAgcHJpY2U6IHBhcnNlRmxvYXQocm93LnByaWNlKSxcbiAgICAgIHJhdGluZzogcGFyc2VGbG9hdChyb3cucmF0aW5nKVxuICAgIH0pKTtcbiAgICBcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBwcm9kdWN0cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2R1Y3RzOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBHZXQgYWxsIGNhdGVnb3JpZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXRlZ29yaWVzKCkge1xuICBpZiAoIWlzUG9zdGdyZXNBdmFpbGFibGUpIHtcbiAgICBhd2FpdCBlbnN1cmVNZW1vcnlJbml0aWFsaXplZCgpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG1lbW9yeUNhdGVnb3JpZXMgfTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBzcWxgXG4gICAgICBTRUxFQ1QgKiBGUk9NIGNhdGVnb3JpZXMgXG4gICAgICBPUkRFUiBCWSBuYW1lIEFTQ1xuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNhdGVnb3JpZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbi8vIEdldCBwcm9kdWN0cyBieSBjYXRlZ29yeVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzQnlDYXRlZ29yeShjYXRlZ29yeTogc3RyaW5nKSB7XG4gIGlmICghaXNQb3N0Z3Jlc0F2YWlsYWJsZSkge1xuICAgIGF3YWl0IGVuc3VyZU1lbW9yeUluaXRpYWxpemVkKCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbWVtb3J5UHJvZHVjdHMuZmlsdGVyKHAgPT4gcC5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpID09PSBjYXRlZ29yeS50b0xvd2VyQ2FzZSgpKSB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gcHJvZHVjdHMgXG4gICAgICBXSEVSRSBMT1dFUihjYXRlZ29yeSkgPSBMT1dFUigke2NhdGVnb3J5fSlcbiAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgIGA7XG4gICAgXG4gICAgLy8gQ29udmVydCBwcmljZSBmcm9tIHN0cmluZyB0byBudW1iZXIgKFBvc3RncmVTUUwgREVDSU1BTCByZXR1cm5zIGFzIHN0cmluZylcbiAgICBjb25zdCBwcm9kdWN0cyA9IHJvd3MubWFwKHJvdyA9PiAoe1xuICAgICAgLi4ucm93LFxuICAgICAgcHJpY2U6IHBhcnNlRmxvYXQocm93LnByaWNlKSxcbiAgICAgIHJhdGluZzogcGFyc2VGbG9hdChyb3cucmF0aW5nKVxuICAgIH0pKTtcbiAgICBcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBwcm9kdWN0cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2R1Y3RzIGJ5IGNhdGVnb3J5OicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBTZWFyY2ggcHJvZHVjdHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hQcm9kdWN0cyhxdWVyeTogc3RyaW5nKSB7XG4gIGlmICghaXNQb3N0Z3Jlc0F2YWlsYWJsZSkge1xuICAgIGF3YWl0IGVuc3VyZU1lbW9yeUluaXRpYWxpemVkKCk7XG4gICAgcmV0dXJuIHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIGRhdGE6IG1lbW9yeVByb2R1Y3RzLmZpbHRlcihwID0+IFxuICAgICAgICBwLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKSB8fFxuICAgICAgICBwLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgICAgcC5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXG4gICAgICApIFxuICAgIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUICogRlJPTSBwcm9kdWN0cyBcbiAgICAgIFdIRVJFIG5hbWUgSUxJS0UgJHtgJSR7cXVlcnl9JWB9IFxuICAgICAgICAgT1IgZGVzY3JpcHRpb24gSUxJS0UgJHtgJSR7cXVlcnl9JWB9XG4gICAgICAgICBPUiBjYXRlZ29yeSBJTElLRSAke2AlJHtxdWVyeX0lYH1cbiAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgIGA7XG4gICAgXG4gICAgLy8gQ29udmVydCBwcmljZSBmcm9tIHN0cmluZyB0byBudW1iZXIgKFBvc3RncmVTUUwgREVDSU1BTCByZXR1cm5zIGFzIHN0cmluZylcbiAgICBjb25zdCBwcm9kdWN0cyA9IHJvd3MubWFwKHJvdyA9PiAoe1xuICAgICAgLi4ucm93LFxuICAgICAgcHJpY2U6IHBhcnNlRmxvYXQocm93LnByaWNlKSxcbiAgICAgIHJhdGluZzogcGFyc2VGbG9hdChyb3cucmF0aW5nKVxuICAgIH0pKTtcbiAgICBcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBwcm9kdWN0cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyBwcm9kdWN0czonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuLy8gVXNlciBhdXRoZW50aWNhdGlvbiBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKGVtYWlsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICAvLyBDaGVjayBpZiBQb3N0Z3JlcyBpcyBhdmFpbGFibGVcbiAgaWYgKCFpc1Bvc3RncmVzQXZhaWxhYmxlKSB7XG4gICAgYXdhaXQgZW5zdXJlTWVtb3J5SW5pdGlhbGl6ZWQoKTtcbiAgICAvLyBVc2UgaW4tbWVtb3J5IHN0b3JhZ2UgZm9yIGRldmVsb3BtZW50XG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBtZW1vcnlVc2Vycy5maW5kKHVzZXIgPT4gdXNlci5lbWFpbCA9PT0gZW1haWwpO1xuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VzZXIgYWxyZWFkeSBleGlzdHMnIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG5ld1VzZXIgPSB7XG4gICAgICBpZDogbWVtb3J5VXNlcnMubGVuZ3RoICsgMSxcbiAgICAgIGVtYWlsLFxuICAgICAgbmFtZSxcbiAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgIHJvbGU6ICd1c2VyJyBhcyBjb25zdCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH07XG4gICAgXG4gICAgbWVtb3J5VXNlcnMucHVzaChuZXdVc2VyKTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdXNlciB3aXRob3V0IHBhc3N3b3JkXG4gICAgY29uc3QgeyBwYXNzd29yZDogXywgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gbmV3VXNlcjtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB1c2VyV2l0aG91dFBhc3N3b3JkIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIHVzZXJzIChlbWFpbCwgbmFtZSwgcGFzc3dvcmQsIHJvbGUpXG4gICAgICBWQUxVRVMgKCR7ZW1haWx9LCAke25hbWV9LCAke2hhc2hlZFBhc3N3b3JkfSwgJ3VzZXInKVxuICAgICAgUkVUVVJOSU5HIGlkLCBlbWFpbCwgbmFtZSwgcm9sZSwgY3JlYXRlZF9hdFxuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93c1swXSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gIGlmICghaXNQb3N0Z3Jlc0F2YWlsYWJsZSkge1xuICAgIGF3YWl0IGVuc3VyZU1lbW9yeUluaXRpYWxpemVkKCk7XG4gICAgY29uc3QgdXNlciA9IG1lbW9yeVVzZXJzLmZpbmQodSA9PiB1LmVtYWlsID09PSBlbWFpbCk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZCxcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgICAgY3JlYXRlZF9hdDogdXNlci5jcmVhdGVkQXRcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbnVsbCB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgZW1haWwgPSAke2VtYWlsfVxuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93c1swXSB8fCBudWxsIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBieSBlbWFpbCwgZmFsbGluZyBiYWNrIHRvIG1lbW9yeTonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gaW4tbWVtb3J5IHN0b3JhZ2VcbiAgICBhd2FpdCBlbnN1cmVNZW1vcnlJbml0aWFsaXplZCgpO1xuICAgIGNvbnN0IHVzZXIgPSBtZW1vcnlVc2Vycy5maW5kKHUgPT4gdS5lbWFpbCA9PT0gZW1haWwpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsXG4gICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IHVzZXIuY3JlYXRlZEF0XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IG51bGwgfTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZywgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZykge1xuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbn1cblxuLy8gQ2FydCBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRUb0NhcnQodXNlckVtYWlsOiBzdHJpbmcsIHByb2R1Y3RJZDogbnVtYmVyLCBxdWFudGl0eTogbnVtYmVyID0gMSkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgSU5TRVJUIElOVE8gY2FydF9pdGVtcyAodXNlcl9pZCwgcHJvZHVjdF9pZCwgcXVhbnRpdHkpXG4gICAgICBWQUxVRVMgKFxuICAgICAgICAoU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgZW1haWwgPSAke3VzZXJFbWFpbH0pLCBcbiAgICAgICAgJHtwcm9kdWN0SWR9LCBcbiAgICAgICAgJHtxdWFudGl0eX1cbiAgICAgIClcbiAgICAgIE9OIENPTkZMSUNUICh1c2VyX2lkLCBwcm9kdWN0X2lkKSBcbiAgICAgIERPIFVQREFURSBTRVQgcXVhbnRpdHkgPSBjYXJ0X2l0ZW1zLnF1YW50aXR5ICsgJHtxdWFudGl0eX1cbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByb3dzWzBdIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIHRvIGNhcnQ6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYXJ0SXRlbXModXNlckVtYWlsOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCBjaS5pZCwgY2kucHJvZHVjdF9pZCBhcyBcInByb2R1Y3RJZFwiLCBjaS5xdWFudGl0eSwgXG4gICAgICAgICAgICAganNvbl9idWlsZF9vYmplY3QoXG4gICAgICAgICAgICAgICAnaWQnLCBwLmlkLFxuICAgICAgICAgICAgICAgJ25hbWUnLCBwLm5hbWUsXG4gICAgICAgICAgICAgICAncHJpY2UnLCBwLnByaWNlLFxuICAgICAgICAgICAgICAgJ2ltYWdlJywgcC5pbWFnZVxuICAgICAgICAgICAgICkgYXMgcHJvZHVjdFxuICAgICAgRlJPTSBjYXJ0X2l0ZW1zIGNpXG4gICAgICBKT0lOIHByb2R1Y3RzIHAgT04gY2kucHJvZHVjdF9pZCA9IHAuaWRcbiAgICAgIEpPSU4gdXNlcnMgdSBPTiBjaS51c2VyX2lkID0gdS5pZFxuICAgICAgV0hFUkUgdS5lbWFpbCA9ICR7dXNlckVtYWlsfVxuICAgICAgT1JERVIgQlkgY2kuY3JlYXRlZF9hdCBERVNDXG4gICAgYDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByb3dzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FydCBpdGVtczonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUZyb21DYXJ0KHVzZXJFbWFpbDogc3RyaW5nLCBwcm9kdWN0SWQ6IG51bWJlcikge1xuICB0cnkge1xuICAgIGF3YWl0IHNxbGBcbiAgICAgIERFTEVURSBGUk9NIGNhcnRfaXRlbXMgXG4gICAgICBXSEVSRSB1c2VyX2lkID0gKFNFTEVDVCBpZCBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gJHt1c2VyRW1haWx9KSBcbiAgICAgIEFORCBwcm9kdWN0X2lkID0gJHtwcm9kdWN0SWR9XG4gICAgYDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVtb3ZpbmcgZnJvbSBjYXJ0OicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBBZG1pbiBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxVc2VycygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIFNFTEVDVCBpZCwgZW1haWwsIG5hbWUsIHJvbGUsIGNyZWF0ZWRfYXQgRlJPTSB1c2Vyc1xuICAgICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDXG4gICAgYDtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByb3dzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQcm9kdWN0KHByb2R1Y3Q6IE9taXQ8UHJvZHVjdCwgJ2lkJz4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIElOU0VSVCBJTlRPIHByb2R1Y3RzIChuYW1lLCBkZXNjcmlwdGlvbiwgcHJpY2UsIGltYWdlLCBjYXRlZ29yeSwgcmF0aW5nLCByZXZpZXdzKVxuICAgICAgVkFMVUVTICgke3Byb2R1Y3QubmFtZX0sICR7cHJvZHVjdC5kZXNjcmlwdGlvbn0sICR7cHJvZHVjdC5wcmljZX0sICR7cHJvZHVjdC5pbWFnZX0sICR7cHJvZHVjdC5jYXRlZ29yeX0sICR7cHJvZHVjdC5yYXRpbmd9LCAke3Byb2R1Y3QucmV2aWV3c30pXG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93c1swXSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHByb2R1Y3Q6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9kdWN0KGlkOiBudW1iZXIsIHByb2R1Y3Q6IFBhcnRpYWw8UHJvZHVjdD4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIFVQREFURSBwcm9kdWN0cyBcbiAgICAgIFNFVCBuYW1lID0gQ09BTEVTQ0UoJHtwcm9kdWN0Lm5hbWV9LCBuYW1lKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbiA9IENPQUxFU0NFKCR7cHJvZHVjdC5kZXNjcmlwdGlvbn0sIGRlc2NyaXB0aW9uKSxcbiAgICAgICAgICBwcmljZSA9IENPQUxFU0NFKCR7cHJvZHVjdC5wcmljZX0sIHByaWNlKSxcbiAgICAgICAgICBpbWFnZSA9IENPQUxFU0NFKCR7cHJvZHVjdC5pbWFnZX0sIGltYWdlKSxcbiAgICAgICAgICBjYXRlZ29yeSA9IENPQUxFU0NFKCR7cHJvZHVjdC5jYXRlZ29yeX0sIGNhdGVnb3J5KSxcbiAgICAgICAgICByYXRpbmcgPSBDT0FMRVNDRSgke3Byb2R1Y3QucmF0aW5nfSwgcmF0aW5nKSxcbiAgICAgICAgICByZXZpZXdzID0gQ09BTEVTQ0UoJHtwcm9kdWN0LnJldmlld3N9LCByZXZpZXdzKSxcbiAgICAgICAgICBpbl9zdG9jayA9IENPQUxFU0NFKCR7cHJvZHVjdC5pblN0b2NrfSwgaW5fc3RvY2spXG4gICAgICBXSEVSRSBpZCA9ICR7aWR9XG4gICAgICBSRVRVUk5JTkcgKlxuICAgIGA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93c1swXSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHByb2R1Y3Q6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQcm9kdWN0KGlkOiBudW1iZXIpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzcWxgREVMRVRFIEZST00gcHJvZHVjdHMgV0hFUkUgaWQgPSAke2lkfWA7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHByb2R1Y3Q6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyKGlkOiBudW1iZXIsIHVwZGF0ZXM6IFBhcnRpYWw8VXNlcj4pIHtcbiAgaWYgKCFpc1Bvc3RncmVzQXZhaWxhYmxlKSB7XG4gICAgYXdhaXQgZW5zdXJlTWVtb3J5SW5pdGlhbGl6ZWQoKTtcbiAgICAvLyBNZW1vcnkgZmFsbGJhY2tcbiAgICBjb25zdCB1c2VySW5kZXggPSBtZW1vcnlVc2Vycy5maW5kSW5kZXgodXNlciA9PiB1c2VyLmlkID09PSBpZCk7XG4gICAgaWYgKHVzZXJJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9O1xuICAgIH1cbiAgICBcbiAgICBtZW1vcnlVc2Vyc1t1c2VySW5kZXhdID0geyAuLi5tZW1vcnlVc2Vyc1t1c2VySW5kZXhdLCAuLi51cGRhdGVzIH07XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbWVtb3J5VXNlcnNbdXNlckluZGV4XSB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHNxbGBcbiAgICAgIFVQREFURSB1c2VycyBcbiAgICAgIFNFVCBuYW1lID0gQ09BTEVTQ0UoJHt1cGRhdGVzLm5hbWV9LCBuYW1lKSxcbiAgICAgICAgICBlbWFpbCA9IENPQUxFU0NFKCR7dXBkYXRlcy5lbWFpbH0sIGVtYWlsKSxcbiAgICAgICAgICByb2xlID0gQ09BTEVTQ0UoJHt1cGRhdGVzLnJvbGV9LCByb2xlKVxuICAgICAgV0hFUkUgaWQgPSAke2lkfVxuICAgICAgUkVUVVJOSU5HIGlkLCBlbWFpbCwgbmFtZSwgcm9sZSwgY3JlYXRlZF9hdFxuICAgIGA7XG4gICAgXG4gICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcgfTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93c1swXSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKGlkOiBudW1iZXIpIHtcbiAgaWYgKCFpc1Bvc3RncmVzQXZhaWxhYmxlKSB7XG4gICAgYXdhaXQgZW5zdXJlTWVtb3J5SW5pdGlhbGl6ZWQoKTtcbiAgICAvLyBNZW1vcnkgZmFsbGJhY2tcbiAgICBjb25zdCB1c2VySW5kZXggPSBtZW1vcnlVc2Vycy5maW5kSW5kZXgodXNlciA9PiB1c2VyLmlkID09PSBpZCk7XG4gICAgaWYgKHVzZXJJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9O1xuICAgIH1cbiAgICBcbiAgICBtZW1vcnlVc2Vycy5zcGxpY2UodXNlckluZGV4LCAxKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcm93Q291bnQgfSA9IGF3YWl0IHNxbGBERUxFVEUgRlJPTSB1c2VycyBXSEVSRSBpZCA9ICR7aWR9YDtcbiAgICBcbiAgICBpZiAocm93Q291bnQgPT09IDApIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuLy8gT3JkZXIgbWFuYWdlbWVudCBmdW5jdGlvbnNcbmxldCBtZW1vcnlPcmRlcnM6IE9yZGVyW10gPSBbXTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbE9yZGVycygpIHtcbiAgaWYgKCFpc1Bvc3RncmVzQXZhaWxhYmxlKSB7XG4gICAgYXdhaXQgZW5zdXJlTWVtb3J5SW5pdGlhbGl6ZWQoKTtcbiAgICAvLyBNZW1vcnkgZmFsbGJhY2sgd2l0aCBzYW1wbGUgb3JkZXJzXG4gICAgaWYgKG1lbW9yeU9yZGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIG1lbW9yeU9yZGVycyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIHVzZXJJZDogMSxcbiAgICAgICAgICB0b3RhbDogMjk5Ljk5LFxuICAgICAgICAgIHN0YXR1czogJ2RlbGl2ZXJlZCcsXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApIC8vIDcgZGF5cyBhZ29cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAyLFxuICAgICAgICAgIHVzZXJJZDogMSxcbiAgICAgICAgICB0b3RhbDogMTQ5Ljk5LFxuICAgICAgICAgIHN0YXR1czogJ3NoaXBwZWQnLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSAvLyAzIGRheXMgYWdvXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogMyxcbiAgICAgICAgICB1c2VySWQ6IDEsXG4gICAgICAgICAgdG90YWw6IDc5Ljk5LFxuICAgICAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDEgKiAyNCAqIDYwICogNjAgKiAxMDAwKSAvLyAxIGRheSBhZ29cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiA0LFxuICAgICAgICAgIHVzZXJJZDogMSxcbiAgICAgICAgICB0b3RhbDogMTk5Ljk5LFxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDIgKiA2MCAqIDYwICogMTAwMCkgLy8gMiBob3VycyBhZ29cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbWVtb3J5T3JkZXJzIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgU0VMRUNUIG8uKiwgdS5uYW1lIGFzIHVzZXJfbmFtZSwgdS5lbWFpbCBhcyB1c2VyX2VtYWlsXG4gICAgICBGUk9NIG9yZGVycyBvXG4gICAgICBKT0lOIHVzZXJzIHUgT04gby51c2VyX2lkID0gdS5pZFxuICAgICAgT1JERVIgQlkgby5jcmVhdGVkX2F0IERFU0NcbiAgICBgO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJvd3MgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBvcmRlcnM6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvciB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVPcmRlclN0YXR1cyhpZDogbnVtYmVyLCBzdGF0dXM6IE9yZGVyWydzdGF0dXMnXSkge1xuICBpZiAoIWlzUG9zdGdyZXNBdmFpbGFibGUpIHtcbiAgICBhd2FpdCBlbnN1cmVNZW1vcnlJbml0aWFsaXplZCgpO1xuICAgIC8vIE1lbW9yeSBmYWxsYmFja1xuICAgIGNvbnN0IG9yZGVySW5kZXggPSBtZW1vcnlPcmRlcnMuZmluZEluZGV4KG9yZGVyID0+IG9yZGVyLmlkID09PSBpZCk7XG4gICAgaWYgKG9yZGVySW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdPcmRlciBub3QgZm91bmQnIH07XG4gICAgfVxuICAgIFxuICAgIG1lbW9yeU9yZGVyc1tvcmRlckluZGV4XS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbWVtb3J5T3JkZXJzW29yZGVySW5kZXhdIH07XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgc3FsYFxuICAgICAgVVBEQVRFIG9yZGVycyBcbiAgICAgIFNFVCBzdGF0dXMgPSAke3N0YXR1c31cbiAgICAgIFdIRVJFIGlkID0gJHtpZH1cbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICBcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZCcgfTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcm93c1swXSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG9yZGVyIHN0YXR1czonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKGlkOiBudW1iZXIpIHtcbiAgaWYgKCFpc1Bvc3RncmVzQXZhaWxhYmxlKSB7XG4gICAgYXdhaXQgZW5zdXJlTWVtb3J5SW5pdGlhbGl6ZWQoKTtcbiAgICAvLyBNZW1vcnkgZmFsbGJhY2tcbiAgICBjb25zdCBvcmRlckluZGV4ID0gbWVtb3J5T3JkZXJzLmZpbmRJbmRleChvcmRlciA9PiBvcmRlci5pZCA9PT0gaWQpO1xuICAgIGlmIChvcmRlckluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnT3JkZXIgbm90IGZvdW5kJyB9O1xuICAgIH1cbiAgICBcbiAgICBtZW1vcnlPcmRlcnMuc3BsaWNlKG9yZGVySW5kZXgsIDEpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyByb3dDb3VudCB9ID0gYXdhaXQgc3FsYERFTEVURSBGUk9NIG9yZGVycyBXSEVSRSBpZCA9ICR7aWR9YDtcbiAgICBcbiAgICBpZiAocm93Q291bnQgPT09IDApIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZCcgfTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIG9yZGVyOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufSJdLCJuYW1lcyI6WyJzcWwiLCJiY3J5cHQiLCJjaGVja1Bvc3RncmVzQ29ubmVjdGlvbiIsInBvc3RncmVzVXJsIiwicHJvY2VzcyIsImVudiIsIlBPU1RHUkVTX1VSTCIsImNvbnNvbGUiLCJsb2ciLCJpbmNsdWRlcyIsImluaXRpYWxpemVNZW1vcnlEYXRhIiwibWVtb3J5UHJvZHVjdHMiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiaW1hZ2UiLCJjYXRlZ29yeSIsInJhdGluZyIsInJldmlld3MiLCJpblN0b2NrIiwibWVtb3J5Q2F0ZWdvcmllcyIsImFkbWluUGFzc3dvcmQiLCJoYXNoIiwibWVtb3J5VXNlcnMiLCJlbWFpbCIsInBhc3N3b3JkIiwicm9sZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJpc1Bvc3RncmVzQXZhaWxhYmxlIiwibWVtb3J5Q2FydEl0ZW1zIiwibWVtb3J5SW5pdGlhbGl6ZWQiLCJpbml0aWFsaXphdGlvblByb21pc2UiLCJ0aGVuIiwiY2F0Y2giLCJlcnJvciIsImVuc3VyZU1lbW9yeUluaXRpYWxpemVkIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwic3VjY2VzcyIsInNlZWREYXRhYmFzZSIsImNhdGVnb3JpZXMiLCJwcm9kdWN0cyIsInByb2R1Y3QiLCJnZXRQcm9kdWN0cyIsImRhdGEiLCJyb3dzIiwibWFwIiwicm93IiwicGFyc2VGbG9hdCIsImdldENhdGVnb3JpZXMiLCJnZXRQcm9kdWN0c0J5Q2F0ZWdvcnkiLCJmaWx0ZXIiLCJwIiwidG9Mb3dlckNhc2UiLCJzZWFyY2hQcm9kdWN0cyIsInF1ZXJ5IiwiY3JlYXRlVXNlciIsImhhc2hlZFBhc3N3b3JkIiwiZXhpc3RpbmdVc2VyIiwiZmluZCIsInVzZXIiLCJuZXdVc2VyIiwibGVuZ3RoIiwicHVzaCIsIl8iLCJ1c2VyV2l0aG91dFBhc3N3b3JkIiwiZ2V0VXNlckJ5RW1haWwiLCJ1IiwiY3JlYXRlZF9hdCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsImFkZFRvQ2FydCIsInVzZXJFbWFpbCIsInByb2R1Y3RJZCIsInF1YW50aXR5IiwiZ2V0Q2FydEl0ZW1zIiwicmVtb3ZlRnJvbUNhcnQiLCJnZXRBbGxVc2VycyIsImNyZWF0ZVByb2R1Y3QiLCJ1cGRhdGVQcm9kdWN0IiwiZGVsZXRlUHJvZHVjdCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVzIiwidXNlckluZGV4IiwiZmluZEluZGV4IiwiZGVsZXRlVXNlciIsInNwbGljZSIsInJvd0NvdW50IiwibWVtb3J5T3JkZXJzIiwiZ2V0QWxsT3JkZXJzIiwidXNlcklkIiwidG90YWwiLCJzdGF0dXMiLCJub3ciLCJ1cGRhdGVPcmRlclN0YXR1cyIsIm9yZGVySW5kZXgiLCJvcmRlciIsImRlbGV0ZU9yZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@neondatabase","vendor-chunks/ws","vendor-chunks/bcryptjs","vendor-chunks/@vercel","vendor-chunks/node-gyp-build","vendor-chunks/utf-8-validate","vendor-chunks/bufferutil"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdebug-auth%2Froute&page=%2Fapi%2Fdebug-auth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-auth%2Froute.ts&appDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftoobaasghar%2FDesktop%2Fprojects%2Fdaynnight&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();