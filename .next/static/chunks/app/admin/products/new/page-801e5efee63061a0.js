(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{9808:function(e,r,s){Promise.resolve().then(s.bind(s,298))},298:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return NewProduct}});var t=s(7437),n=s(2749),i=s(4033),o=s(2265);function NewProduct(){let{data:e,status:r}=(0,n.useSession)(),s=(0,i.useRouter)(),[a,d]=(0,o.useState)(!1),[c,l]=(0,o.useState)({name:"",description:"",price:"",category:"",inStock:!0,image:"",rating:5,reviews:0});(0,o.useEffect)(()=>{if("loading"!==r&&(!e||"admin"!==e.user.role)){s.push("/auth/signin");return}},[e,r,s]);let handleSubmit=async e=>{e.preventDefault(),d(!0);try{let e=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,price:parseFloat(c.price)})});if(e.ok)s.push("/admin/products");else{let r=await e.json();alert(r.error||"Failed to create product")}}catch(e){console.error("Error creating product:",e),alert("Error creating product")}finally{d(!1)}},handleChange=e=>{let{name:r,value:s,type:t}=e.target;l(n=>({...n,[r]:"checkbox"===t?e.target.checked:s}))};return"loading"===r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-xl",children:"Loading..."})}):e&&"admin"===e.user.role?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Product"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Create a new product for your store"})]}),(0,t.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"px-4 py-5 sm:p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name"}),(0,t.jsx)("input",{type:"text",name:"name",id:"name",required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:c.name,onChange:handleChange})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{name:"description",id:"description",rows:3,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:c.description,onChange:handleChange})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price ($)"}),(0,t.jsx)("input",{type:"number",name:"price",id:"price",step:"0.01",min:"0",required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:c.price,onChange:handleChange})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,t.jsxs)("select",{name:"category",id:"category",required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:c.category,onChange:handleChange,children:[(0,t.jsx)("option",{value:"",children:"Select a category"}),(0,t.jsx)("option",{value:"Electronics",children:"Electronics"}),(0,t.jsx)("option",{value:"Clothing",children:"Clothing"}),(0,t.jsx)("option",{value:"Home & Garden",children:"Home & Garden"}),(0,t.jsx)("option",{value:"Sports",children:"Sports"}),(0,t.jsx)("option",{value:"Books",children:"Books"}),(0,t.jsx)("option",{value:"Beauty",children:"Beauty"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Image URL"}),(0,t.jsx)("input",{type:"url",name:"image",id:"image",required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:c.image,onChange:handleChange,placeholder:"https://example.com/image.jpg"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",name:"inStock",id:"inStock",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:c.inStock,onChange:handleChange}),(0,t.jsx)("label",{htmlFor:"inStock",className:"ml-2 block text-sm text-gray-900",children:"In Stock"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>s.push("/admin/products"),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:a,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:a?"Creating...":"Create Product"})]})]})})]})}):null}},4033:function(e,r,s){e.exports=s(94)}},function(e){e.O(0,[749,971,472,744],function(){return e(e.s=9808)}),_N_E=e.O()}]);